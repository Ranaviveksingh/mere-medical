{"version":3,"file":"dexie.worker.js","mappings":"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","sources":["webpack://rxdb/./node_modules/is-observable/index.js","webpack://rxdb/./node_modules/mingo/aggregator.js","webpack://rxdb/./node_modules/mingo/core.js","webpack://rxdb/./node_modules/mingo/cursor.js","webpack://rxdb/./node_modules/mingo/lazy.js","webpack://rxdb/./node_modules/mingo/operators/_predicates.js","webpack://rxdb/./node_modules/mingo/operators/accumulator/_internal.js","webpack://rxdb/./node_modules/mingo/operators/accumulator/accumulator.js","webpack://rxdb/./node_modules/mingo/operators/accumulator/addToSet.js","webpack://rxdb/./node_modules/mingo/operators/accumulator/avg.js","webpack://rxdb/./node_modules/mingo/operators/accumulator/bottom.js","webpack://rxdb/./node_modules/mingo/operators/accumulator/bottomN.js","webpack://rxdb/./node_modules/mingo/operators/accumulator/count.js","webpack://rxdb/./node_modules/mingo/operators/accumulator/covariancePop.js","webpack://rxdb/./node_modules/mingo/operators/accumulator/covarianceSamp.js","webpack://rxdb/./node_modules/mingo/operators/accumulator/first.js","webpack://rxdb/./node_modules/mingo/operators/accumulator/firstN.js","webpack://rxdb/./node_modules/mingo/operators/accumulator/index.js","webpack://rxdb/./node_modules/mingo/operators/accumulator/last.js","webpack://rxdb/./node_modules/mingo/operators/accumulator/lastN.js","webpack://rxdb/./node_modules/mingo/operators/accumulator/max.js","webpack://rxdb/./node_modules/mingo/operators/accumulator/maxN.js","webpack://rxdb/./node_modules/mingo/operators/accumulator/mergeObjects.js","webpack://rxdb/./node_modules/mingo/operators/accumulator/min.js","webpack://rxdb/./node_modules/mingo/operators/accumulator/minN.js","webpack://rxdb/./node_modules/mingo/operators/accumulator/push.js","webpack://rxdb/./node_modules/mingo/operators/accumulator/stdDevPop.js","webpack://rxdb/./node_modules/mingo/operators/accumulator/stdDevSamp.js","webpack://rxdb/./node_modules/mingo/operators/accumulator/sum.js","webpack://rxdb/./node_modules/mingo/operators/accumulator/top.js","webpack://rxdb/./node_modules/mingo/operators/accumulator/topN.js","webpack://rxdb/./node_modules/mingo/operators/expression/date/_internal.js","webpack://rxdb/./node_modules/mingo/operators/expression/date/dateAdd.js","webpack://rxdb/./node_modules/mingo/operators/expression/object/mergeObjects.js","webpack://rxdb/./node_modules/mingo/operators/pipeline/addFields.js","webpack://rxdb/./node_modules/mingo/operators/pipeline/bucket.js","webpack://rxdb/./node_modules/mingo/operators/pipeline/bucketAuto.js","webpack://rxdb/./node_modules/mingo/operators/pipeline/count.js","webpack://rxdb/./node_modules/mingo/operators/pipeline/facet.js","webpack://rxdb/./node_modules/mingo/operators/pipeline/group.js","webpack://rxdb/./node_modules/mingo/operators/pipeline/index.js","webpack://rxdb/./node_modules/mingo/operators/pipeline/limit.js","webpack://rxdb/./node_modules/mingo/operators/pipeline/lookup.js","webpack://rxdb/./node_modules/mingo/operators/pipeline/match.js","webpack://rxdb/./node_modules/mingo/operators/pipeline/merge.js","webpack://rxdb/./node_modules/mingo/operators/pipeline/out.js","webpack://rxdb/./node_modules/mingo/operators/pipeline/project.js","webpack://rxdb/./node_modules/mingo/operators/pipeline/redact.js","webpack://rxdb/./node_modules/mingo/operators/pipeline/replaceRoot.js","webpack://rxdb/./node_modules/mingo/operators/pipeline/replaceWith.js","webpack://rxdb/./node_modules/mingo/operators/pipeline/sample.js","webpack://rxdb/./node_modules/mingo/operators/pipeline/set.js","webpack://rxdb/./node_modules/mingo/operators/pipeline/setWindowFields.js","webpack://rxdb/./node_modules/mingo/operators/pipeline/skip.js","webpack://rxdb/./node_modules/mingo/operators/pipeline/sort.js","webpack://rxdb/./node_modules/mingo/operators/pipeline/sortByCount.js","webpack://rxdb/./node_modules/mingo/operators/pipeline/unionWith.js","webpack://rxdb/./node_modules/mingo/operators/pipeline/unset.js","webpack://rxdb/./node_modules/mingo/operators/pipeline/unwind.js","webpack://rxdb/./node_modules/mingo/operators/query/array/all.js","webpack://rxdb/./node_modules/mingo/operators/query/array/elemMatch.js","webpack://rxdb/./node_modules/mingo/operators/query/array/index.js","webpack://rxdb/./node_modules/mingo/operators/query/array/size.js","webpack://rxdb/./node_modules/mingo/operators/query/bitwise/_internal.js","webpack://rxdb/./node_modules/mingo/operators/query/bitwise/bitsAllClear.js","webpack://rxdb/./node_modules/mingo/operators/query/bitwise/bitsAllSet.js","webpack://rxdb/./node_modules/mingo/operators/query/bitwise/bitsAnyClear.js","webpack://rxdb/./node_modules/mingo/operators/query/bitwise/bitsAnySet.js","webpack://rxdb/./node_modules/mingo/operators/query/bitwise/index.js","webpack://rxdb/./node_modules/mingo/operators/query/comparison/eq.js","webpack://rxdb/./node_modules/mingo/operators/query/comparison/gt.js","webpack://rxdb/./node_modules/mingo/operators/query/comparison/gte.js","webpack://rxdb/./node_modules/mingo/operators/query/comparison/in.js","webpack://rxdb/./node_modules/mingo/operators/query/comparison/index.js","webpack://rxdb/./node_modules/mingo/operators/query/comparison/lt.js","webpack://rxdb/./node_modules/mingo/operators/query/comparison/lte.js","webpack://rxdb/./node_modules/mingo/operators/query/comparison/ne.js","webpack://rxdb/./node_modules/mingo/operators/query/comparison/nin.js","webpack://rxdb/./node_modules/mingo/operators/query/element/exists.js","webpack://rxdb/./node_modules/mingo/operators/query/element/index.js","webpack://rxdb/./node_modules/mingo/operators/query/element/type.js","webpack://rxdb/./node_modules/mingo/operators/query/evaluation/expr.js","webpack://rxdb/./node_modules/mingo/operators/query/evaluation/index.js","webpack://rxdb/./node_modules/mingo/operators/query/evaluation/jsonSchema.js","webpack://rxdb/./node_modules/mingo/operators/query/evaluation/mod.js","webpack://rxdb/./node_modules/mingo/operators/query/evaluation/regex.js","webpack://rxdb/./node_modules/mingo/operators/query/evaluation/where.js","webpack://rxdb/./node_modules/mingo/operators/query/index.js","webpack://rxdb/./node_modules/mingo/operators/query/logical/and.js","webpack://rxdb/./node_modules/mingo/operators/query/logical/index.js","webpack://rxdb/./node_modules/mingo/operators/query/logical/nor.js","webpack://rxdb/./node_modules/mingo/operators/query/logical/not.js","webpack://rxdb/./node_modules/mingo/operators/query/logical/or.js","webpack://rxdb/./node_modules/mingo/query.js","webpack://rxdb/./node_modules/mingo/util.js","webpack://rxdb/./node_modules/object-path/index.js","webpack://rxdb/./node_modules/threads/dist/common.js","webpack://rxdb/./node_modules/threads/dist/serializers.js","webpack://rxdb/./node_modules/threads/dist/symbols.js","webpack://rxdb/./node_modules/threads/dist/transferable.js","webpack://rxdb/./node_modules/threads/dist/types/messages.js","webpack://rxdb/./node_modules/threads/dist/worker/implementation.browser.js","webpack://rxdb/./node_modules/threads/dist/worker/index.js","webpack://rxdb/webpack/bootstrap","webpack://rxdb/webpack/runtime/compat get default export","webpack://rxdb/webpack/runtime/define property getters","webpack://rxdb/webpack/runtime/hasOwnProperty shorthand","webpack://rxdb/./node_modules/dexie/dist/modern/dexie.min.mjs","webpack://rxdb/./node_modules/js-base64/base64.mjs","webpack://rxdb/./src/util.ts","webpack://rxdb/./node_modules/@babel/runtime/helpers/esm/typeof.js","webpack://rxdb/./node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","webpack://rxdb/./node_modules/@babel/runtime/helpers/esm/toPrimitive.js","webpack://rxdb/./node_modules/@babel/runtime/helpers/esm/createClass.js","webpack://rxdb/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://rxdb/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://rxdb/./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","webpack://rxdb/./node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","webpack://rxdb/./node_modules/@babel/runtime/helpers/esm/construct.js","webpack://rxdb/./node_modules/@babel/runtime/helpers/esm/wrapNativeSuper.js","webpack://rxdb/./node_modules/@babel/runtime/helpers/esm/isNativeFunction.js","webpack://rxdb/./src/overwritable.ts","webpack://rxdb/./src/rx-error.ts","webpack://rxdb/./src/rx-schema-helper.ts","webpack://rxdb/./src/rx-query-mingo.ts","webpack://rxdb/./src/plugins/dexie/dexie-helper.ts","webpack://rxdb/./node_modules/tslib/tslib.es6.js","webpack://rxdb/./node_modules/rxjs/dist/esm5/internal/util/isFunction.js","webpack://rxdb/./node_modules/rxjs/dist/esm5/internal/util/createErrorClass.js","webpack://rxdb/./node_modules/rxjs/dist/esm5/internal/util/UnsubscriptionError.js","webpack://rxdb/./node_modules/rxjs/dist/esm5/internal/util/arrRemove.js","webpack://rxdb/./node_modules/rxjs/dist/esm5/internal/Subscription.js","webpack://rxdb/./node_modules/rxjs/dist/esm5/internal/config.js","webpack://rxdb/./node_modules/rxjs/dist/esm5/internal/scheduler/timeoutProvider.js","webpack://rxdb/./node_modules/rxjs/dist/esm5/internal/util/reportUnhandledError.js","webpack://rxdb/./node_modules/rxjs/dist/esm5/internal/util/noop.js","webpack://rxdb/./node_modules/rxjs/dist/esm5/internal/NotificationFactories.js","webpack://rxdb/./node_modules/rxjs/dist/esm5/internal/util/errorContext.js","webpack://rxdb/./node_modules/rxjs/dist/esm5/internal/Subscriber.js","webpack://rxdb/./node_modules/rxjs/dist/esm5/internal/symbol/observable.js","webpack://rxdb/./node_modules/rxjs/dist/esm5/internal/util/identity.js","webpack://rxdb/./node_modules/rxjs/dist/esm5/internal/util/pipe.js","webpack://rxdb/./node_modules/rxjs/dist/esm5/internal/Observable.js","webpack://rxdb/./node_modules/rxjs/dist/esm5/internal/util/ObjectUnsubscribedError.js","webpack://rxdb/./node_modules/rxjs/dist/esm5/internal/Subject.js","webpack://rxdb/./src/query-planner.ts","webpack://rxdb/./src/plugins/dexie/dexie-statics.ts","webpack://rxdb/./src/plugins/dexie/dexie-query.ts","webpack://rxdb/./src/rx-storage-helper.ts","webpack://rxdb/./node_modules/rxjs/dist/esm5/internal/util/lift.js","webpack://rxdb/./node_modules/rxjs/dist/esm5/internal/util/argsOrArgArray.js","webpack://rxdb/./node_modules/rxjs/dist/esm5/internal/operators/OperatorSubscriber.js","webpack://rxdb/./node_modules/rxjs/dist/esm5/internal/util/isArrayLike.js","webpack://rxdb/./node_modules/rxjs/dist/esm5/internal/util/isPromise.js","webpack://rxdb/./node_modules/rxjs/dist/esm5/internal/util/isInteropObservable.js","webpack://rxdb/./node_modules/rxjs/dist/esm5/internal/util/isAsyncIterable.js","webpack://rxdb/./node_modules/rxjs/dist/esm5/internal/util/throwUnobservableError.js","webpack://rxdb/./node_modules/rxjs/dist/esm5/internal/symbol/iterator.js","webpack://rxdb/./node_modules/rxjs/dist/esm5/internal/util/isIterable.js","webpack://rxdb/./node_modules/rxjs/dist/esm5/internal/util/isReadableStreamLike.js","webpack://rxdb/./node_modules/rxjs/dist/esm5/internal/observable/innerFrom.js","webpack://rxdb/./node_modules/rxjs/dist/esm5/internal/util/executeSchedule.js","webpack://rxdb/./node_modules/rxjs/dist/esm5/internal/operators/mergeMap.js","webpack://rxdb/./node_modules/rxjs/dist/esm5/internal/operators/map.js","webpack://rxdb/./node_modules/rxjs/dist/esm5/internal/operators/mergeInternals.js","webpack://rxdb/./node_modules/rxjs/dist/esm5/internal/operators/mergeAll.js","webpack://rxdb/./node_modules/rxjs/dist/esm5/internal/util/args.js","webpack://rxdb/./node_modules/rxjs/dist/esm5/internal/util/isScheduler.js","webpack://rxdb/./node_modules/rxjs/dist/esm5/internal/operators/observeOn.js","webpack://rxdb/./node_modules/rxjs/dist/esm5/internal/operators/subscribeOn.js","webpack://rxdb/./node_modules/rxjs/dist/esm5/internal/scheduled/scheduleAsyncIterable.js","webpack://rxdb/./node_modules/rxjs/dist/esm5/internal/scheduled/scheduled.js","webpack://rxdb/./node_modules/rxjs/dist/esm5/internal/scheduled/scheduleObservable.js","webpack://rxdb/./node_modules/rxjs/dist/esm5/internal/scheduled/scheduleArray.js","webpack://rxdb/./node_modules/rxjs/dist/esm5/internal/scheduled/schedulePromise.js","webpack://rxdb/./node_modules/rxjs/dist/esm5/internal/scheduled/scheduleIterable.js","webpack://rxdb/./node_modules/rxjs/dist/esm5/internal/scheduled/scheduleReadableStreamLike.js","webpack://rxdb/./node_modules/rxjs/dist/esm5/internal/observable/from.js","webpack://rxdb/./node_modules/rxjs/dist/esm5/internal/operators/merge.js","webpack://rxdb/./node_modules/broadcast-channel/dist/esbrowser/util.js","webpack://rxdb/./node_modules/broadcast-channel/dist/esbrowser/methods/native.js","webpack://rxdb/./node_modules/oblivious-set/dist/es/index.js","webpack://rxdb/./node_modules/broadcast-channel/dist/esbrowser/options.js","webpack://rxdb/./node_modules/broadcast-channel/dist/esbrowser/methods/indexed-db.js","webpack://rxdb/./node_modules/broadcast-channel/dist/esbrowser/methods/localstorage.js","webpack://rxdb/./node_modules/broadcast-channel/dist/esbrowser/methods/simulate.js","webpack://rxdb/./node_modules/broadcast-channel/dist/esbrowser/method-chooser.js","webpack://rxdb/./node_modules/broadcast-channel/dist/esbrowser/broadcast-channel.js","webpack://rxdb/./node_modules/broadcast-channel/node_modules/unload/dist/es/index.js","webpack://rxdb/./node_modules/broadcast-channel/node_modules/unload/dist/es/node.js","webpack://rxdb/./node_modules/broadcast-channel/node_modules/unload/dist/es/browser.js","webpack://rxdb/./node_modules/broadcast-channel/dist/esbrowser/leader-election.js","webpack://rxdb/./src/rx-storage-multiinstance.ts","webpack://rxdb/./node_modules/rxjs/dist/esm5/internal/operators/mergeWith.js","webpack://rxdb/./src/plugins/dexie/rx-storage-instance-dexie.ts","webpack://rxdb/./src/plugins/dexie/rx-storage-dexie.ts","webpack://rxdb/./node_modules/threads/worker.mjs","webpack://rxdb/./src/plugins/worker/workers/dexie.worker.ts","webpack://rxdb/./src/plugins/worker/in-worker.ts"],"sourcesContent":["'use strict';\n\nmodule.exports = value => {\n\tif (!value) {\n\t\treturn false;\n\t}\n\n\t// eslint-disable-next-line no-use-extend-native/no-use-extend-native\n\tif (typeof Symbol.observable === 'symbol' && typeof value[Symbol.observable] === 'function') {\n\t\t// eslint-disable-next-line no-use-extend-native/no-use-extend-native\n\t\treturn value === value[Symbol.observable]();\n\t}\n\n\tif (typeof value['@@observable'] === 'function') {\n\t\treturn value === value['@@observable']();\n\t}\n\n\treturn false;\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Aggregator = void 0;\nvar core_1 = require(\"./core\");\nvar lazy_1 = require(\"./lazy\");\nvar util_1 = require(\"./util\");\n/**\n * Provides functionality for the mongoDB aggregation pipeline\n *\n * @param pipeline an Array of pipeline operators\n * @param options An optional Options to pass the aggregator\n * @constructor\n */\nvar Aggregator = /** @class */ (function () {\n    function Aggregator(pipeline, options) {\n        this.pipeline = pipeline;\n        this.options = options;\n        this.options = (0, core_1.initOptions)(options);\n    }\n    /**\n     * Returns an `Lazy` iterator for processing results of pipeline\n     *\n     * @param {*} collection An array or iterator object\n     * @param {Query} query the `Query` object to use as context\n     * @returns {Iterator} an iterator object\n     */\n    Aggregator.prototype.stream = function (collection) {\n        var iterator = (0, lazy_1.Lazy)(collection);\n        var mode = this.options.processingMode;\n        if (mode == core_1.ProcessingMode.CLONE_ALL ||\n            mode == core_1.ProcessingMode.CLONE_INPUT) {\n            iterator.map(util_1.cloneDeep);\n        }\n        var pipelineOperators = [];\n        if (!(0, util_1.isEmpty)(this.pipeline)) {\n            // run aggregation pipeline\n            for (var _i = 0, _a = this.pipeline; _i < _a.length; _i++) {\n                var operator = _a[_i];\n                var operatorKeys = Object.keys(operator);\n                var op = operatorKeys[0];\n                var call = (0, core_1.getOperator)(core_1.OperatorType.PIPELINE, op);\n                (0, util_1.assert)(operatorKeys.length === 1 && !!call, \"invalid aggregation operator \".concat(op));\n                pipelineOperators.push(op);\n                iterator = call(iterator, operator[op], this.options);\n            }\n        }\n        // operators that may share object graphs of inputs.\n        // we only need to clone the output for these since the objects will already be distinct for other operators.\n        if (mode == core_1.ProcessingMode.CLONE_OUTPUT ||\n            (mode == core_1.ProcessingMode.CLONE_ALL &&\n                !!(0, util_1.intersection)([[\"$group\", \"$unwind\"], pipelineOperators]).length)) {\n            iterator.map(util_1.cloneDeep);\n        }\n        return iterator;\n    };\n    /**\n     * Return the results of the aggregation as an array.\n     *\n     * @param {*} collection\n     * @param {*} query\n     */\n    Aggregator.prototype.run = function (collection) {\n        return this.stream(collection).value();\n    };\n    return Aggregator;\n}());\nexports.Aggregator = Aggregator;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar _a;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.redact = exports.computeValue = exports.getOperator = exports.useOperators = exports.OperatorType = exports.initOptions = exports.ComputeOptions = exports.ProcessingMode = void 0;\nvar util_1 = require(\"./util\");\n/**\n * This controls how input and output documents are processed to meet different application needs.\n * Each mode has different trade offs for; immutability, reference sharing, and performance.\n */\nvar ProcessingMode;\n(function (ProcessingMode) {\n    /**\n     * Clone inputs prior to processing, and the outputs if some objects graphs may be shared.\n     * Use this option to keep input collection immutable and to get distinct output objects.\n     *\n     * Note: This option is expensive and reduces performance.\n     */\n    ProcessingMode[\"CLONE_ALL\"] = \"CLONE_ALL\";\n    /**\n     * Clones inputs prior to processing.\n     * This option will return output objects with shared graphs in their path if specific operators are used.\n     * Use this option to keep the input collection immutable.\n     *\n     */\n    ProcessingMode[\"CLONE_INPUT\"] = \"CLONE_INPUT\";\n    /**\n     * Clones the output to return distinct objects with no shared paths.\n     * This option modifies the input collection and during processing.\n     */\n    ProcessingMode[\"CLONE_OUTPUT\"] = \"CLONE_OUTPUT\";\n    /**\n     * Turn off cloning and modifies the input collection as needed.\n     * This option will also return output objects with shared paths in their graph when specific operators are used.\n     *\n     * This option provides the greatest speedup for the biggest tradeoff. When using the aggregation pipeline, you can use\n     * the \"$out\" operator to collect immutable intermediate results.\n     *\n     * @default\n     */\n    ProcessingMode[\"CLONE_OFF\"] = \"CLONE_OFF\";\n})(ProcessingMode = exports.ProcessingMode || (exports.ProcessingMode = {}));\n/** Custom type to facilitate type checking for global options */\nvar ComputeOptions = /** @class */ (function () {\n    function ComputeOptions(options, \n    /** Reference to the root object when processing subgraphs of the object. */\n    _root, _local, \n    /** The current time in milliseconds. Remains the same throughout all stages of the aggregation pipeline. */\n    timestamp) {\n        if (timestamp === void 0) { timestamp = Date.now(); }\n        this.options = options;\n        this._root = _root;\n        this._local = _local;\n        this.timestamp = timestamp;\n        this.options = options;\n        this.update(_root, _local);\n    }\n    /**\n     * Initialize new ComputeOptions. Returns the same object modified when the 'options' argument is a ComputeOptions.\n     * @param options\n     * @param root\n     * @param local\n     * @returns\n     */\n    ComputeOptions.init = function (options, root, local) {\n        return options instanceof ComputeOptions\n            ? options.update(\n            // value can be '0' or 'false'\n            (0, util_1.isNil)(options.root) ? root : options.root, options.local || local)\n            : new ComputeOptions(options || initOptions(), root, local);\n    };\n    /** Updates the internal mutable state. */\n    ComputeOptions.prototype.update = function (root, local) {\n        // NOTE: this is done for efficiency to avoid creating too many intermediate options objects.\n        this._root = root;\n        this._local = local;\n        return this;\n    };\n    Object.defineProperty(ComputeOptions.prototype, \"root\", {\n        get: function () {\n            return this._root;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ComputeOptions.prototype, \"local\", {\n        get: function () {\n            return this._local;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ComputeOptions.prototype, \"idKey\", {\n        get: function () {\n            var _a;\n            return (_a = this.options) === null || _a === void 0 ? void 0 : _a.idKey;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ComputeOptions.prototype, \"collation\", {\n        get: function () {\n            var _a;\n            return (_a = this.options) === null || _a === void 0 ? void 0 : _a.collation;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ComputeOptions.prototype, \"processingMode\", {\n        get: function () {\n            var _a;\n            return ((_a = this.options) === null || _a === void 0 ? void 0 : _a.processingMode) || ProcessingMode.CLONE_OFF;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ComputeOptions.prototype, \"useStrictMode\", {\n        get: function () {\n            var _a;\n            return (_a = this.options) === null || _a === void 0 ? void 0 : _a.useStrictMode;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ComputeOptions.prototype, \"scriptEnabled\", {\n        get: function () {\n            var _a;\n            return (_a = this.options) === null || _a === void 0 ? void 0 : _a.scriptEnabled;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ComputeOptions.prototype, \"hashFunction\", {\n        get: function () {\n            var _a;\n            return (_a = this.options) === null || _a === void 0 ? void 0 : _a.hashFunction;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ComputeOptions.prototype, \"collectionResolver\", {\n        get: function () {\n            var _a;\n            return (_a = this.options) === null || _a === void 0 ? void 0 : _a.collectionResolver;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ComputeOptions.prototype, \"jsonSchemaValidator\", {\n        get: function () {\n            var _a;\n            return (_a = this.options) === null || _a === void 0 ? void 0 : _a.jsonSchemaValidator;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ComputeOptions.prototype, \"variables\", {\n        get: function () {\n            var _a;\n            return (_a = this.options) === null || _a === void 0 ? void 0 : _a.variables;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return ComputeOptions;\n}());\nexports.ComputeOptions = ComputeOptions;\n/**\n * Creates an Option from another required keys are initialized\n * @param options Options\n */\nfunction initOptions(options) {\n    return Object.freeze(__assign({ idKey: \"_id\", scriptEnabled: true, useStrictMode: true, processingMode: ProcessingMode.CLONE_OFF }, options));\n}\nexports.initOptions = initOptions;\n/**\n * The different groups of operators\n */\nvar OperatorType;\n(function (OperatorType) {\n    OperatorType[\"ACCUMULATOR\"] = \"accumulator\";\n    OperatorType[\"EXPRESSION\"] = \"expression\";\n    OperatorType[\"PIPELINE\"] = \"pipeline\";\n    OperatorType[\"PROJECTION\"] = \"projection\";\n    OperatorType[\"QUERY\"] = \"query\";\n    OperatorType[\"WINDOW\"] = \"window\";\n})(OperatorType = exports.OperatorType || (exports.OperatorType = {}));\n// operator definitions\nvar OPERATORS = (_a = {},\n    _a[OperatorType.ACCUMULATOR] = {},\n    _a[OperatorType.EXPRESSION] = {},\n    _a[OperatorType.PIPELINE] = {},\n    _a[OperatorType.PROJECTION] = {},\n    _a[OperatorType.QUERY] = {},\n    _a[OperatorType.WINDOW] = {},\n    _a);\n/**\n * Register fully specified operators for the given operator class.\n *\n * @param type The operator type\n * @param operators Map of the operators\n */\nfunction useOperators(type, operators) {\n    for (var _i = 0, _a = Object.entries(operators); _i < _a.length; _i++) {\n        var _b = _a[_i], name_1 = _b[0], fn = _b[1];\n        (0, util_1.assert)(fn instanceof Function && (0, util_1.isOperator)(name_1), \"'\".concat(name_1, \"' is not a valid operator\"));\n        var currentFn = getOperator(type, name_1);\n        (0, util_1.assert)(!currentFn || fn === currentFn, \"\".concat(name_1, \" already exists for '\").concat(type, \"' operators. Cannot change operator function once registered.\"));\n    }\n    // toss the operator salad :)\n    (0, util_1.into)(OPERATORS[type], operators);\n}\nexports.useOperators = useOperators;\n/**\n * Returns the operator function or null if it is not found\n * @param type Type of operator\n * @param operator Name of the operator\n */\nfunction getOperator(type, operator) {\n    return OPERATORS[type][operator];\n}\nexports.getOperator = getOperator;\n/* eslint-disable unused-imports/no-unused-vars-ts */\n/**\n * Implementation of system variables\n * @type {Object}\n */\nvar systemVariables = {\n    $$ROOT: function (obj, expr, options) {\n        return options.root;\n    },\n    $$CURRENT: function (obj, expr, options) {\n        return obj;\n    },\n    $$REMOVE: function (obj, expr, options) {\n        return undefined;\n    },\n    $$NOW: function (obj, expr, options) {\n        return new Date(options.timestamp);\n    },\n};\n/**\n * Implementation of $redact variables\n *\n * Each function accepts 3 arguments (obj, expr, options)\n *\n * @type {Object}\n */\nvar redactVariables = {\n    $$KEEP: function (obj, expr, options) {\n        return obj;\n    },\n    $$PRUNE: function (obj, expr, options) {\n        return undefined;\n    },\n    $$DESCEND: function (obj, expr, options) {\n        // traverse nested documents iff there is a $cond\n        if (!(0, util_1.has)(expr, \"$cond\"))\n            return obj;\n        var result;\n        for (var _i = 0, _a = Object.entries(obj); _i < _a.length; _i++) {\n            var _b = _a[_i], key = _b[0], current = _b[1];\n            if ((0, util_1.isObjectLike)(current)) {\n                if (current instanceof Array) {\n                    var array = [];\n                    for (var _c = 0, current_1 = current; _c < current_1.length; _c++) {\n                        var elem = current_1[_c];\n                        if ((0, util_1.isObject)(elem)) {\n                            elem = redact(elem, expr, options.update(elem));\n                        }\n                        if (!(0, util_1.isNil)(elem)) {\n                            array.push(elem);\n                        }\n                    }\n                    result = array;\n                }\n                else {\n                    result = redact(current, expr, options.update(current));\n                }\n                if ((0, util_1.isNil)(result)) {\n                    delete obj[key]; // pruned result\n                }\n                else {\n                    obj[key] = result;\n                }\n            }\n        }\n        return obj;\n    },\n};\n/* eslint-enable unused-imports/no-unused-vars-ts */\n/**\n * Computes the value of the expression on the object for the given operator\n *\n * @param obj the current object from the collection\n * @param expr the expression for the given field\n * @param operator the operator to resolve the field with\n * @param options {Object} extra options\n * @returns {*}\n */\nfunction computeValue(obj, expr, operator, options) {\n    var _a;\n    // ensure valid options exist on first invocation\n    var copts = ComputeOptions.init(options, obj);\n    if ((0, util_1.isOperator)(operator)) {\n        // if the field of the object is a valid operator\n        var callExpression = getOperator(OperatorType.EXPRESSION, operator);\n        if (callExpression)\n            return callExpression(obj, expr, copts);\n        // we also handle $group accumulator operators\n        var callAccumulator = getOperator(OperatorType.ACCUMULATOR, operator);\n        if (callAccumulator) {\n            // if object is not an array, first try to compute using the expression\n            if (!(obj instanceof Array)) {\n                obj = computeValue(obj, expr, null, copts);\n                expr = null;\n            }\n            // validate that we have an array\n            (0, util_1.assert)(obj instanceof Array, \"'\".concat(operator, \"' target must be an array.\"));\n            // for accumulators, we use the global options since the root is specific to each element within array.\n            return callAccumulator(obj, expr, \n            // reset the root object for accumulators.\n            copts.update(null, copts.local));\n        }\n        // operator was not found\n        throw new Error(\"operator '\".concat(operator, \"' is not registered\"));\n    }\n    // if expr is a string and begins with \"$$\", then we have a variable.\n    //  this can be one of; redact variable, system variable, user-defined variable.\n    //  we check and process them in that order.\n    //\n    // if expr begins only a single \"$\", then it is a path to a field on the object.\n    if ((0, util_1.isString)(expr) && expr.length > 0 && expr[0] === \"$\") {\n        // we return redact variables as literals\n        if ((0, util_1.has)(redactVariables, expr)) {\n            return expr;\n        }\n        // default to root for resolving path.\n        var context = copts.root;\n        // handle selectors with explicit prefix\n        var arr = expr.split(\".\");\n        if ((0, util_1.has)(systemVariables, arr[0])) {\n            // set 'root' only the first time it is required to be used for all subsequent calls\n            // if it already available on the options, it will be used\n            context = systemVariables[arr[0]](obj, null, copts);\n            expr = expr.slice(arr[0].length + 1); //  +1 for '.'\n        }\n        else if (arr[0].substr(0, 2) === \"$$\") {\n            // handle user-defined variables\n            context = Object.assign({}, copts.variables, // global vars\n            (_a = copts.local) === null || _a === void 0 ? void 0 : _a.variables, // local vars\n            { this: obj } // current item referred to by '$$this'\n            );\n            var prefix = arr[0].substr(2);\n            (0, util_1.assert)((0, util_1.has)(context, prefix), \"Use of undefined variable: \".concat(prefix));\n            expr = expr.slice(2);\n        }\n        else {\n            // 'expr' is a path to a field on the object.\n            expr = expr.slice(1);\n        }\n        if (expr === \"\")\n            return context;\n        return (0, util_1.resolve)(context, expr);\n    }\n    // check and return value if already in a resolved state\n    if (expr instanceof Array) {\n        return expr.map(function (item) {\n            return computeValue(obj, item, null, copts);\n        });\n    }\n    else if ((0, util_1.isObject)(expr)) {\n        var result = {};\n        var _loop_1 = function (key, val) {\n            result[key] = computeValue(obj, val, key, copts);\n            // must run ONLY one aggregate operator per expression\n            // if so, return result of the computed value\n            if ([OperatorType.EXPRESSION, OperatorType.ACCUMULATOR].some(function (c) {\n                return (0, util_1.has)(OPERATORS[c], key);\n            })) {\n                // there should be only one operator\n                (0, util_1.assert)(Object.keys(expr).length === 1, \"Invalid aggregation expression '\" + JSON.stringify(expr) + \"'\");\n                return { value: result[key] };\n            }\n        };\n        for (var _i = 0, _b = Object.entries(expr); _i < _b.length; _i++) {\n            var _c = _b[_i], key = _c[0], val = _c[1];\n            var state_1 = _loop_1(key, val);\n            if (typeof state_1 === \"object\")\n                return state_1.value;\n        }\n        return result;\n    }\n    return expr;\n}\nexports.computeValue = computeValue;\n/**\n * Redact an object\n * @param  {Object} obj The object to redact\n * @param  {*} expr The redact expression\n * @param  {*} options  Options for value\n * @return {*} returns the result of the redacted object\n */\nfunction redact(obj, expr, options) {\n    var result = computeValue(obj, expr, null, options);\n    return (0, util_1.has)(redactVariables, result)\n        ? redactVariables[result](obj, expr, options)\n        : result;\n}\nexports.redact = redact;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Cursor = void 0;\nvar aggregator_1 = require(\"./aggregator\");\nvar lazy_1 = require(\"./lazy\");\nvar util_1 = require(\"./util\");\n/**\n * Cursor to iterate and perform filtering on matched objects.\n * This object must not be used directly. A cursor may be obtaine from calling `find()` on an instance of `Query`.\n *\n * @param collection The input source of the collection\n * @param predicate A predicate function to test documents\n * @param projection A projection criteria\n * @param options Options\n * @constructor\n */\nvar Cursor = /** @class */ (function () {\n    function Cursor(source, predicate, projection, options) {\n        this.source = source;\n        this.predicate = predicate;\n        this.projection = projection;\n        this.options = options;\n        this.operators = [];\n        this.result = null;\n        this.buffer = [];\n    }\n    /** Returns the iterator from running the query */\n    Cursor.prototype.fetch = function () {\n        if (this.result)\n            return this.result;\n        // add projection operator\n        if ((0, util_1.isObject)(this.projection)) {\n            this.operators.push({ $project: this.projection });\n        }\n        // filter collection\n        this.result = (0, lazy_1.Lazy)(this.source).filter(this.predicate);\n        if (this.operators.length > 0) {\n            this.result = new aggregator_1.Aggregator(this.operators, this.options).stream(this.result);\n        }\n        return this.result;\n    };\n    /** Returns an iterator with the buffered data included */\n    Cursor.prototype.fetchAll = function () {\n        var buffered = (0, lazy_1.Lazy)(__spreadArray([], this.buffer, true));\n        this.buffer = [];\n        return (0, lazy_1.compose)(buffered, this.fetch());\n    };\n    /**\n     * Return remaining objects in the cursor as an array. This method exhausts the cursor\n     * @returns {Array}\n     */\n    Cursor.prototype.all = function () {\n        return this.fetchAll().value();\n    };\n    /**\n     * Returns the number of objects return in the cursor. This method exhausts the cursor\n     * @returns {Number}\n     */\n    Cursor.prototype.count = function () {\n        return this.all().length;\n    };\n    /**\n     * Returns a cursor that begins returning results only after passing or skipping a number of documents.\n     * @param {Number} n the number of results to skip.\n     * @return {Cursor} Returns the cursor, so you can chain this call.\n     */\n    Cursor.prototype.skip = function (n) {\n        this.operators.push({ $skip: n });\n        return this;\n    };\n    /**\n     * Constrains the size of a cursor's result set.\n     * @param {Number} n the number of results to limit to.\n     * @return {Cursor} Returns the cursor, so you can chain this call.\n     */\n    Cursor.prototype.limit = function (n) {\n        this.operators.push({ $limit: n });\n        return this;\n    };\n    /**\n     * Returns results ordered according to a sort specification.\n     * @param {Object} modifier an object of key and values specifying the sort order. 1 for ascending and -1 for descending\n     * @return {Cursor} Returns the cursor, so you can chain this call.\n     */\n    Cursor.prototype.sort = function (modifier) {\n        this.operators.push({ $sort: modifier });\n        return this;\n    };\n    /**\n     * Specifies the collation for the cursor returned by the `mingo.Query.find`\n     * @param {*} spec\n     */\n    Cursor.prototype.collation = function (spec) {\n        this.options = __assign(__assign({}, this.options), { collation: spec });\n        return this;\n    };\n    /**\n     * Returns the next document in a cursor.\n     * @returns {Object | Boolean}\n     */\n    Cursor.prototype.next = function () {\n        // yield value obtains in hasNext()\n        if (this.buffer.length > 0) {\n            return this.buffer.pop();\n        }\n        var o = this.fetch().next();\n        if (o.done)\n            return;\n        return o.value;\n    };\n    /**\n     * Returns true if the cursor has documents and can be iterated.\n     * @returns {boolean}\n     */\n    Cursor.prototype.hasNext = function () {\n        // there is a value in the buffer\n        if (this.buffer.length > 0)\n            return true;\n        var o = this.fetch().next();\n        if (o.done)\n            return false;\n        this.buffer.push(o.value);\n        return true;\n    };\n    /**\n     * Applies a function to each document in a cursor and collects the return values in an array.\n     * @param callback\n     * @returns {Array}\n     */\n    Cursor.prototype.map = function (callback) {\n        return this.all().map(callback);\n    };\n    /**\n     * Applies a JavaScript function for every document in a cursor.\n     * @param callback\n     */\n    Cursor.prototype.forEach = function (callback) {\n        this.all().forEach(callback);\n    };\n    Cursor.prototype[Symbol.iterator] = function () {\n        return this.fetchAll();\n    };\n    return Cursor;\n}());\nexports.Cursor = Cursor;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Iterator = exports.compose = exports.Lazy = void 0;\n/**\n * Returns an iterator\n * @param {*} source An iterable source (Array, Function, Generator, or Iterator)\n */\nfunction Lazy(source) {\n    return source instanceof Iterator ? source : new Iterator(source);\n}\nexports.Lazy = Lazy;\nfunction compose() {\n    var iterators = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        iterators[_i] = arguments[_i];\n    }\n    var index = 0;\n    return Lazy(function () {\n        while (index < iterators.length) {\n            var o = iterators[index].next();\n            if (!o.done)\n                return o;\n            index++;\n        }\n        return { done: true };\n    });\n}\nexports.compose = compose;\n/**\n * Checks whether the given object is compatible with a generator i.e Object{next:Function}\n * @param {*} o An object\n */\nfunction isGenerator(o) {\n    return (!!o && typeof o === \"object\" && (o === null || o === void 0 ? void 0 : o.next) instanceof Function);\n}\nfunction dropItem(array, i) {\n    var rest = array.slice(i + 1);\n    array.splice(i);\n    Array.prototype.push.apply(array, rest);\n}\n// stop iteration error\nvar DONE = new Error();\n// Lazy function actions\nvar Action;\n(function (Action) {\n    Action[Action[\"MAP\"] = 0] = \"MAP\";\n    Action[Action[\"FILTER\"] = 1] = \"FILTER\";\n    Action[Action[\"TAKE\"] = 2] = \"TAKE\";\n    Action[Action[\"DROP\"] = 3] = \"DROP\";\n})(Action || (Action = {}));\nfunction createCallback(nextFn, iteratees, buffer) {\n    var done = false;\n    var index = -1;\n    var bufferIndex = 0; // index for the buffer\n    return function (storeResult) {\n        // special hack to collect all values into buffer\n        try {\n            outer: while (!done) {\n                var o = nextFn();\n                index++;\n                var i = -1;\n                var size = iteratees.length;\n                var innerDone = false;\n                while (++i < size) {\n                    var r = iteratees[i];\n                    switch (r.action) {\n                        case Action.MAP:\n                            o = r.func(o, index);\n                            break;\n                        case Action.FILTER:\n                            if (!r.func(o, index))\n                                continue outer;\n                            break;\n                        case Action.TAKE:\n                            --r.count;\n                            if (!r.count)\n                                innerDone = true;\n                            break;\n                        case Action.DROP:\n                            --r.count;\n                            if (!r.count)\n                                dropItem(iteratees, i);\n                            continue outer;\n                        default:\n                            break outer;\n                    }\n                }\n                done = innerDone;\n                if (storeResult) {\n                    buffer[bufferIndex++] = o;\n                }\n                else {\n                    return { value: o, done: false };\n                }\n            }\n        }\n        catch (e) {\n            if (e !== DONE)\n                throw e;\n        }\n        done = true;\n        return { done: done };\n    };\n}\n/**\n * A lazy collection iterator yields a single value at time upon request\n */\nvar Iterator = /** @class */ (function () {\n    /**\n     * @param {*} source An iterable object or function.\n     *    Array - return one element per cycle\n     *    Object{next:Function} - call next() for the next value (this also handles generator functions)\n     *    Function - call to return the next value\n     * @param {Function} fn An optional transformation function\n     */\n    function Iterator(source) {\n        this.iteratees = [];\n        this.yieldedValues = [];\n        this.isDone = false;\n        var nextVal;\n        if (source instanceof Function) {\n            // make iterable\n            source = { next: source };\n        }\n        if (isGenerator(source)) {\n            var src_1 = source;\n            nextVal = function () {\n                var o = src_1.next();\n                if (o.done)\n                    throw DONE;\n                return o.value;\n            };\n        }\n        else if (source instanceof Array) {\n            var data_1 = source;\n            var size_1 = data_1.length;\n            var index_1 = 0;\n            nextVal = function () {\n                if (index_1 < size_1)\n                    return data_1[index_1++];\n                throw DONE;\n            };\n        }\n        else if (!(source instanceof Function)) {\n            throw new Error(\"Source is of type '\".concat(typeof source, \"'. Must be Array, Function, or Generator\"));\n        }\n        // create next function\n        this.getNext = createCallback(nextVal, this.iteratees, this.yieldedValues);\n    }\n    /**\n     * Add an iteratee to this lazy sequence\n     */\n    Iterator.prototype.push = function (action, value) {\n        if (typeof value === \"function\") {\n            this.iteratees.push({ action: action, func: value });\n        }\n        else if (typeof value === \"number\") {\n            this.iteratees.push({ action: action, count: value });\n        }\n        return this;\n    };\n    Iterator.prototype.next = function () {\n        return this.getNext();\n    };\n    // Iteratees methods\n    /**\n     * Transform each item in the sequence to a new value\n     * @param {Function} f\n     */\n    Iterator.prototype.map = function (f) {\n        return this.push(Action.MAP, f);\n    };\n    /**\n     * Select only items matching the given predicate\n     * @param {Function} pred\n     */\n    Iterator.prototype.filter = function (predicate) {\n        return this.push(Action.FILTER, predicate);\n    };\n    /**\n     * Take given numbe for values from sequence\n     * @param {Number} n A number greater than 0\n     */\n    Iterator.prototype.take = function (n) {\n        return n > 0 ? this.push(Action.TAKE, n) : this;\n    };\n    /**\n     * Drop a number of values from the sequence\n     * @param {Number} n Number of items to drop greater than 0\n     */\n    Iterator.prototype.drop = function (n) {\n        return n > 0 ? this.push(Action.DROP, n) : this;\n    };\n    // Transformations\n    /**\n     * Returns a new lazy object with results of the transformation\n     * The entire sequence is realized.\n     *\n     * @param {Function} fn Tranform function of type (Array) => (Any)\n     */\n    Iterator.prototype.transform = function (fn) {\n        var self = this;\n        var iter;\n        return Lazy(function () {\n            if (!iter) {\n                iter = Lazy(fn(self.value()));\n            }\n            return iter.next();\n        });\n    };\n    // Terminal methods\n    /**\n     * Returns the fully realized values of the iterators.\n     * The return value will be an array unless `lazy.first()` was used.\n     * The realized values are cached for subsequent calls\n     */\n    Iterator.prototype.value = function () {\n        if (!this.isDone) {\n            this.isDone = this.getNext(true).done;\n        }\n        return this.yieldedValues;\n    };\n    /**\n     * Execute the funcion for each value. Will stop when an execution returns false.\n     * @param {Function} f\n     * @returns {Boolean} false iff `f` return false for AnyVal execution, otherwise true\n     */\n    Iterator.prototype.each = function (f) {\n        for (;;) {\n            var o = this.next();\n            if (o.done)\n                break;\n            if (f(o.value) === false)\n                return false;\n        }\n        return true;\n    };\n    /**\n     * Returns the reduction of sequence according the reducing function\n     *\n     * @param {*} f a reducing function\n     * @param {*} init\n     */\n    Iterator.prototype.reduce = function (f, initialValue) {\n        var o = this.next();\n        var i = 0;\n        if (initialValue === undefined && !o.done) {\n            initialValue = o.value;\n            o = this.next();\n            i++;\n        }\n        while (!o.done) {\n            initialValue = f(initialValue, o.value);\n            o = this.next();\n        }\n        return initialValue;\n    };\n    /**\n     * Returns the number of matched items in the sequence\n     */\n    Iterator.prototype.size = function () {\n        return this.reduce(function (acc, _) { return ++acc; }, 0);\n    };\n    Iterator.prototype[Symbol.iterator] = function () {\n        /* eslint-disable @typescript-eslint/no-unsafe-return */\n        return this;\n    };\n    return Iterator;\n}());\nexports.Iterator = Iterator;\n","\"use strict\";\n/**\n * Predicates used for Query and Expression operators.\n */\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$type = exports.$elemMatch = exports.$size = exports.$all = exports.$exists = exports.$regex = exports.$mod = exports.$gte = exports.$gt = exports.$lte = exports.$lt = exports.$nin = exports.$in = exports.$ne = exports.$eq = exports.createExpressionOperator = exports.createQueryOperator = void 0;\nvar core_1 = require(\"../core\");\nvar query_1 = require(\"../query\");\nvar util_1 = require(\"../util\");\n/**\n * Returns a query operator created from the predicate\n *\n * @param predicate Predicate function\n */\nfunction createQueryOperator(predicate) {\n    return function (selector, value, options) {\n        var opts = { unwrapArray: true };\n        var depth = Math.max(1, selector.split(\".\").length - 1);\n        return function (obj) {\n            // value of field must be fully resolved.\n            var lhs = (0, util_1.resolve)(obj, selector, opts);\n            return predicate(lhs, value, __assign(__assign({}, options), { depth: depth }));\n        };\n    };\n}\nexports.createQueryOperator = createQueryOperator;\n/**\n * Returns an expression operator created from the predicate\n *\n * @param predicate Predicate function\n */\nfunction createExpressionOperator(predicate) {\n    return function (obj, expr, options) {\n        var args = (0, core_1.computeValue)(obj, expr, null, options);\n        return predicate.apply(void 0, args);\n    };\n}\nexports.createExpressionOperator = createExpressionOperator;\n/**\n * Checks that two values are equal.\n *\n * @param a         The lhs operand as resolved from the object by the given selector\n * @param b         The rhs operand provided by the user\n * @returns {*}\n */\nfunction $eq(a, b, options) {\n    // start with simple equality check\n    if ((0, util_1.isEqual)(a, b))\n        return true;\n    // https://docs.mongodb.com/manual/tutorial/query-for-null-fields/\n    if ((0, util_1.isNil)(a) && (0, util_1.isNil)(b))\n        return true;\n    // check\n    if (a instanceof Array) {\n        var eq = util_1.isEqual.bind(null, b);\n        return a.some(eq) || (0, util_1.flatten)(a, options === null || options === void 0 ? void 0 : options.depth).some(eq);\n    }\n    return false;\n}\nexports.$eq = $eq;\n/**\n * Matches all values that are not equal to the value specified in the query.\n *\n * @param a\n * @param b\n * @returns {boolean}\n */\nfunction $ne(a, b, options) {\n    return !$eq(a, b, options);\n}\nexports.$ne = $ne;\n/**\n * Matches any of the values that exist in an array specified in the query.\n *\n * @param a\n * @param b\n * @returns {*}\n */\nfunction $in(a, b, options) {\n    // queries for null should be able to find undefined fields\n    if ((0, util_1.isNil)(a))\n        return b.some(function (v) { return v === null; });\n    return (0, util_1.intersection)([(0, util_1.ensureArray)(a), b], options === null || options === void 0 ? void 0 : options.hashFunction).length > 0;\n}\nexports.$in = $in;\n/**\n * Matches values that do not exist in an array specified to the query.\n *\n * @param a\n * @param b\n * @returns {*|boolean}\n */\nfunction $nin(a, b, options) {\n    return !$in(a, b, options);\n}\nexports.$nin = $nin;\n/**\n * Matches values that are less than the value specified in the query.\n *\n * @param a\n * @param b\n * @returns {boolean}\n */\nfunction $lt(a, b, options) {\n    return compare(a, b, function (x, y) { return x < y; });\n}\nexports.$lt = $lt;\n/**\n * Matches values that are less than or equal to the value specified in the query.\n *\n * @param a\n * @param b\n * @returns {boolean}\n */\nfunction $lte(a, b, options) {\n    return compare(a, b, function (x, y) { return x <= y; });\n}\nexports.$lte = $lte;\n/**\n * Matches values that are greater than the value specified in the query.\n *\n * @param a\n * @param b\n * @returns {boolean}\n */\nfunction $gt(a, b, options) {\n    return compare(a, b, function (x, y) { return x > y; });\n}\nexports.$gt = $gt;\n/**\n * Matches values that are greater than or equal to the value specified in the query.\n *\n * @param a\n * @param b\n * @returns {boolean}\n */\nfunction $gte(a, b, options) {\n    return compare(a, b, function (x, y) { return x >= y; });\n}\nexports.$gte = $gte;\n/**\n * Performs a modulo operation on the value of a field and selects documents with a specified result.\n *\n * @param a\n * @param b\n * @returns {boolean}\n */\nfunction $mod(a, b, options) {\n    return (0, util_1.ensureArray)(a).some(function (x) { return b.length === 2 && x % b[0] === b[1]; });\n}\nexports.$mod = $mod;\n/**\n * Selects documents where values match a specified regular expression.\n *\n * @param a\n * @param b\n * @returns {boolean}\n */\nfunction $regex(a, b, options) {\n    var lhs = (0, util_1.ensureArray)(a);\n    var match = function (x) { return (0, util_1.isString)(x) && !!b.exec(x); };\n    return lhs.some(match) || (0, util_1.flatten)(lhs, 1).some(match);\n}\nexports.$regex = $regex;\n/**\n * Matches documents that have the specified field.\n *\n * @param a\n * @param b\n * @returns {boolean}\n */\nfunction $exists(a, b, options) {\n    return (((b === false || b === 0) && a === undefined) ||\n        ((b === true || b === 1) && a !== undefined));\n}\nexports.$exists = $exists;\n/**\n * Matches arrays that contain all elements specified in the query.\n *\n * @param values\n * @param queries\n * @returns boolean\n */\nfunction $all(values, queries, options) {\n    if (!(0, util_1.isArray)(values) ||\n        !(0, util_1.isArray)(queries) ||\n        !values.length ||\n        !queries.length) {\n        return false;\n    }\n    var matched = true;\n    var _loop_1 = function (query) {\n        // no need to check all the queries.\n        if (!matched)\n            return \"break\";\n        if ((0, util_1.isObject)(query) && (0, util_1.inArray)(Object.keys(query), \"$elemMatch\")) {\n            matched = $elemMatch(values, query[\"$elemMatch\"], options);\n        }\n        else if (query instanceof RegExp) {\n            matched = values.some(function (s) { return typeof s === \"string\" && query.test(s); });\n        }\n        else {\n            matched = values.some(function (v) { return (0, util_1.isEqual)(query, v); });\n        }\n    };\n    for (var _i = 0, queries_1 = queries; _i < queries_1.length; _i++) {\n        var query = queries_1[_i];\n        var state_1 = _loop_1(query);\n        if (state_1 === \"break\")\n            break;\n    }\n    return matched;\n}\nexports.$all = $all;\n/**\n * Selects documents if the array field is a specified size.\n *\n * @param a\n * @param b\n * @returns {*|boolean}\n */\nfunction $size(a, b, options) {\n    return a.length === b;\n}\nexports.$size = $size;\nfunction isNonBooleanOperator(name) {\n    return (0, util_1.isOperator)(name) && [\"$and\", \"$or\", \"$nor\"].indexOf(name) === -1;\n}\n/**\n * Selects documents if element in the array field matches all the specified $elemMatch condition.\n *\n * @param a {Array} element to match against\n * @param b {Object} subquery\n */\nfunction $elemMatch(a, b, options) {\n    // should return false for non-matching input\n    if ((0, util_1.isArray)(a) && !(0, util_1.isEmpty)(a)) {\n        var format = function (x) { return x; };\n        var criteria = b;\n        // If we find a boolean operator in the subquery, we fake a field to point to it. This is an\n        // attempt to ensure that it is a valid criteria. We cannot make this substitution for operators\n        // like $and/$or/$nor; as otherwise, this faking will break our query.\n        if (Object.keys(b).every(isNonBooleanOperator)) {\n            criteria = { temp: b };\n            format = function (x) { return ({ temp: x }); };\n        }\n        var query = new query_1.Query(criteria, options);\n        for (var i = 0, len = a.length; i < len; i++) {\n            if (query.test(format(a[i]))) {\n                return true;\n            }\n        }\n    }\n    return false;\n}\nexports.$elemMatch = $elemMatch;\n// helper functions\nvar isNull = function (a) { return a === null; };\nvar isInt = function (a) {\n    return (0, util_1.isNumber)(a) &&\n        a >= util_1.MIN_INT &&\n        a <= util_1.MAX_INT &&\n        a.toString().indexOf(\".\") === -1;\n};\nvar isLong = function (a) {\n    return (0, util_1.isNumber)(a) &&\n        a >= util_1.MIN_LONG &&\n        a <= util_1.MAX_LONG &&\n        a.toString().indexOf(\".\") === -1;\n};\n/** Mapping of type to predicate */\nvar compareFuncs = {\n    array: util_1.isArray,\n    bool: util_1.isBoolean,\n    boolean: util_1.isBoolean,\n    date: util_1.isDate,\n    decimal: util_1.isNumber,\n    double: util_1.isNumber,\n    int: isInt,\n    long: isLong,\n    number: util_1.isNumber,\n    null: isNull,\n    object: util_1.isObject,\n    regex: util_1.isRegExp,\n    regexp: util_1.isRegExp,\n    string: util_1.isString,\n    // added for completeness\n    undefined: util_1.isNil,\n    function: function (_) {\n        throw new Error(\"unsupported type key `function`.\");\n    },\n    // Mongo identifiers\n    1: util_1.isNumber,\n    2: util_1.isString,\n    3: util_1.isObject,\n    4: util_1.isArray,\n    6: util_1.isNil,\n    8: util_1.isBoolean,\n    9: util_1.isDate,\n    10: isNull,\n    11: util_1.isRegExp,\n    16: isInt,\n    18: isLong,\n    19: util_1.isNumber, //decimal\n};\n/**\n * Selects documents if a field is of the specified type.\n *\n * @param a\n * @param b\n * @returns {boolean}\n */\nfunction compareType(a, b, _) {\n    var f = compareFuncs[b];\n    return f ? f(a) : false;\n}\n/**\n * Selects documents if a field is of the specified type.\n *\n * @param a\n * @param b\n * @returns {boolean}\n */\nfunction $type(a, b, options) {\n    return Array.isArray(b)\n        ? b.findIndex(function (t) { return compareType(a, t, options); }) >= 0\n        : compareType(a, b, options);\n}\nexports.$type = $type;\nfunction compare(a, b, f) {\n    return (0, util_1.ensureArray)(a).some(function (x) { return (0, util_1.getType)(x) === (0, util_1.getType)(b) && f(x, b); });\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.covariance = exports.stddev = void 0;\n/**\n * Compute the standard deviation of the data set\n * @param {Array} array of numbers\n * @param {Boolean} if true calculates a sample standard deviation, otherwise calculates a population stddev\n * @return {Number}\n */\nfunction stddev(data, sampled) {\n    if (sampled === void 0) { sampled = true; }\n    var sum = data.reduce(function (acc, n) { return acc + n; }, 0);\n    var N = data.length || 1;\n    var avg = sum / N;\n    return Math.sqrt(data.reduce(function (acc, n) { return acc + Math.pow(n - avg, 2); }, 0) /\n        (N - Number(sampled)));\n}\nexports.stddev = stddev;\nfunction covariance(dataset, sampled) {\n    if (sampled === void 0) { sampled = true; }\n    if (!dataset)\n        return null;\n    if (dataset.length < 2)\n        return sampled ? null : 0;\n    var meanX = 0.0;\n    var meanY = 0.0;\n    for (var _i = 0, dataset_1 = dataset; _i < dataset_1.length; _i++) {\n        var _a = dataset_1[_i], x = _a[0], y = _a[1];\n        meanX += x;\n        meanY += y;\n    }\n    meanX /= dataset.length;\n    meanY /= dataset.length;\n    var result = 0;\n    for (var _b = 0, dataset_2 = dataset; _b < dataset_2.length; _b++) {\n        var _c = dataset_2[_b], x = _c[0], y = _c[1];\n        result += (x - meanX) * (y - meanY);\n    }\n    return result / (dataset.length - Number(sampled));\n}\nexports.covariance = covariance;\n","\"use strict\";\n// Custom Aggregation Expression Operators: https://docs.mongodb.com/manual/reference/operator/aggregation/#custom-aggregation-expression-operators\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$accumulator = void 0;\nvar core_1 = require(\"../../core\");\nvar util_1 = require(\"../../util\");\n/**\n * Defines a custom accumulator function.\n *\n * @param {Array} collection The input array\n * @param {*} expr The expression for the operator\n * @param {Options} options Options\n */\nfunction $accumulator(collection, expr, options) {\n    var _a, _b;\n    var _c;\n    (0, util_1.assert)(options.scriptEnabled, \"$accumulator operator requires 'scriptEnabled' option to be true\");\n    if (collection.length == 0)\n        return expr.initArgs;\n    var copts = core_1.ComputeOptions.init(options);\n    var initArgs = (0, core_1.computeValue)({}, expr.initArgs || [], null, copts.update(((_c = copts === null || copts === void 0 ? void 0 : copts.local) === null || _c === void 0 ? void 0 : _c.groupId) || {}));\n    var state = (_a = expr.init).call.apply(_a, __spreadArray([null], initArgs, false));\n    for (var _i = 0, collection_1 = collection; _i < collection_1.length; _i++) {\n        var doc = collection_1[_i];\n        // get arguments for document\n        var args = (0, core_1.computeValue)(doc, expr.accumulateArgs, null, copts.update(doc));\n        // update the state with each documents value\n        state = (_b = expr.accumulate).call.apply(_b, __spreadArray([null], __spreadArray([state], args, true), false));\n    }\n    return (expr.finalize ? expr.finalize.call(null, state) : state);\n}\nexports.$accumulator = $accumulator;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$addToSet = void 0;\nvar util_1 = require(\"../../util\");\nvar push_1 = require(\"./push\");\n/**\n * Returns an array of all the unique values for the selected field among for each document in that group.\n *\n * @param {Array} collection The input array\n * @param {Object} expr The right-hand side expression value of the operator\n * @param {Options} options The options to use for this operation\n * @returns {*}\n */\nfunction $addToSet(collection, expr, options) {\n    return (0, util_1.unique)((0, push_1.$push)(collection, expr, options), options === null || options === void 0 ? void 0 : options.hashFunction);\n}\nexports.$addToSet = $addToSet;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$avg = void 0;\nvar util_1 = require(\"../../util\");\nvar push_1 = require(\"./push\");\n/**\n * Returns an average of all the values in a group.\n *\n * @param {Array} collection The input array\n * @param {Object} expr The right-hand side expression value of the operator\n * @param {Options} options The options to use for this operation\n * @returns {Number}\n */\nfunction $avg(collection, expr, options) {\n    var data = (0, push_1.$push)(collection, expr, options).filter(util_1.isNumber);\n    var sum = data.reduce(function (acc, n) { return acc + n; }, 0);\n    return sum / (data.length || 1);\n}\nexports.$avg = $avg;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$bottom = void 0;\nvar bottomN_1 = require(\"./bottomN\");\n/**\n * Returns the bottom element within a group according to the specified sort order.\n *\n * @param {Array} collection The input array\n * @param {Object} expr The right-hand side expression value of the operator\n * @param {Options} options The options to use for this operation\n * @returns {*}\n */\nfunction $bottom(collection, expr, options) {\n    return (0, bottomN_1.$bottomN)(collection, __assign(__assign({}, expr), { n: 1 }), options);\n}\nexports.$bottom = $bottom;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$bottomN = void 0;\n// https://www.mongodb.com/docs/manual/reference/operator/aggregation/bottomN/#mongodb-group-grp.-bottomN\nvar aggregator_1 = require(\"../../aggregator\");\nvar core_1 = require(\"../../core\");\nvar push_1 = require(\"./push\");\n/**\n * Returns an aggregation of the bottom n elements within a group, according to the specified sort order.\n * If the group contains fewer than n elements, $bottomN returns all elements in the group.\n *\n * @param {Array} collection The input array\n * @param {Object} expr The right-hand side expression value of the operator\n * @param {Options} options The options to use for this operation\n * @returns {*}\n */\nfunction $bottomN(collection, expr, options) {\n    var copts = core_1.ComputeOptions.init(options);\n    var _a = (0, core_1.computeValue)(copts.local.groupId, expr, null, copts), n = _a.n, sortBy = _a.sortBy;\n    var result = new aggregator_1.Aggregator([{ $sort: sortBy }], copts.options).run(collection);\n    var m = result.length;\n    var p = n;\n    return (0, push_1.$push)(m <= p ? result : result.slice(m - p), expr.output, copts);\n}\nexports.$bottomN = $bottomN;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$count = void 0;\n/**\n * Returns the number of documents in the group or window.\n *\n * @param {Array} collection The input array\n * @param {Object} expr The right-hand side expression value of the operator\n * @returns {*}\n */\nfunction $count(collection, expr, options) {\n    return collection.length;\n}\nexports.$count = $count;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$covariancePop = void 0;\nvar _internal_1 = require(\"./_internal\");\nvar push_1 = require(\"./push\");\n/**\n * Returns the population covariance of two numeric expressions.\n * @param  {Array} collection\n * @param  {Object} expr\n * @return {Number|null}\n */\nfunction $covariancePop(collection, expr, options) {\n    return (0, _internal_1.covariance)((0, push_1.$push)(collection, expr, options), false);\n}\nexports.$covariancePop = $covariancePop;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$covarianceSamp = void 0;\nvar _internal_1 = require(\"./_internal\");\nvar push_1 = require(\"./push\");\n/**\n * Returns the sample covariance of two numeric expressions.\n * @param  {Array} collection\n * @param  {Object} expr\n * @return {Number|null}\n */\nfunction $covarianceSamp(collection, expr, options) {\n    return (0, _internal_1.covariance)((0, push_1.$push)(collection, expr, options), true);\n}\nexports.$covarianceSamp = $covarianceSamp;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$first = void 0;\nvar core_1 = require(\"../../core\");\n/**\n * Returns the first value in a group.\n *\n * @param {Array} collection The input array\n * @param {Object} expr The right-hand side expression value of the operator\n * @returns {*}\n */\nfunction $first(collection, expr, options) {\n    return collection.length > 0\n        ? (0, core_1.computeValue)(collection[0], expr, null, options)\n        : undefined;\n}\nexports.$first = $first;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$firstN = void 0;\n// https://www.mongodb.com/docs/manual/reference/operator/aggregation/firstN/\nvar core_1 = require(\"../../core\");\nvar push_1 = require(\"./push\");\n/**\n * Returns an aggregation of the first n elements within a group. The elements returned are meaningful only if in a specified sort order.\n * If the group contains fewer than n elements, $firstN returns all elements in the group.\n *\n * @param {Array} collection The input array\n * @param {Object} expr The right-hand side expression value of the operator\n * @param {Options} options The options to use for this operation\n * @returns {*}\n */\nfunction $firstN(collection, expr, options) {\n    var _a;\n    var copts = core_1.ComputeOptions.init(options);\n    var m = collection.length;\n    var n = (0, core_1.computeValue)((_a = copts === null || copts === void 0 ? void 0 : copts.local) === null || _a === void 0 ? void 0 : _a.groupId, expr.n, null, copts);\n    return (0, push_1.$push)(m <= n ? collection : collection.slice(0, n), expr.input, options);\n}\nexports.$firstN = $firstN;\n","\"use strict\";\n/**\n * Group stage Accumulator Operators. https://docs.mongodb.com/manual/reference/operator/aggregation-\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./accumulator\"), exports);\n__exportStar(require(\"./addToSet\"), exports);\n__exportStar(require(\"./avg\"), exports);\n__exportStar(require(\"./bottom\"), exports);\n__exportStar(require(\"./bottomN\"), exports);\n__exportStar(require(\"./count\"), exports);\n__exportStar(require(\"./covariancePop\"), exports);\n__exportStar(require(\"./covarianceSamp\"), exports);\n__exportStar(require(\"./first\"), exports);\n__exportStar(require(\"./firstN\"), exports);\n__exportStar(require(\"./last\"), exports);\n__exportStar(require(\"./lastN\"), exports);\n__exportStar(require(\"./max\"), exports);\n__exportStar(require(\"./maxN\"), exports);\n__exportStar(require(\"./mergeObjects\"), exports);\n__exportStar(require(\"./min\"), exports);\n__exportStar(require(\"./minN\"), exports);\n__exportStar(require(\"./push\"), exports);\n__exportStar(require(\"./stdDevPop\"), exports);\n__exportStar(require(\"./stdDevSamp\"), exports);\n__exportStar(require(\"./sum\"), exports);\n__exportStar(require(\"./top\"), exports);\n__exportStar(require(\"./topN\"), exports);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$last = void 0;\nvar core_1 = require(\"../../core\");\n/**\n * Returns the last value in the collection.\n *\n * @param {Array} collection The input array\n * @param {Object} expr The right-hand side expression value of the operator\n * @param {Options} options The options to use for this operation\n * @returns {*}\n */\nfunction $last(collection, expr, options) {\n    return collection.length > 0\n        ? (0, core_1.computeValue)(collection[collection.length - 1], expr, null, options)\n        : undefined;\n}\nexports.$last = $last;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$lastN = void 0;\n// https://www.mongodb.com/docs/manual/reference/operator/aggregation/lastN/\nvar core_1 = require(\"../../core\");\nvar push_1 = require(\"./push\");\n/**\n * Returns an aggregation of the last n elements within a group. The elements returned are meaningful only if in a specified sort order.\n * If the group contains fewer than n elements, $lastN returns all elements in the group.\n *\n * @param {Array} collection The input array\n * @param {Object} expr The right-hand side expression value of the operator\n * @param {Options} options The options to use for this operation\n * @returns {*}\n */\nfunction $lastN(collection, expr, options) {\n    var _a;\n    var copts = core_1.ComputeOptions.init(options);\n    var m = collection.length;\n    var n = (0, core_1.computeValue)((_a = copts === null || copts === void 0 ? void 0 : copts.local) === null || _a === void 0 ? void 0 : _a.groupId, expr.n, null, copts);\n    return (0, push_1.$push)(m <= n ? collection : collection.slice(m - n), expr.input, options);\n}\nexports.$lastN = $lastN;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$max = void 0;\nvar push_1 = require(\"./push\");\n/**\n * Returns the highest value in a group.\n *\n * @param {Array} collection The input array\n * @param {Object} expr The right-hand side expression value of the operator\n * @param {Options} options The options to use for this operation\n * @returns {*}\n */\nfunction $max(collection, expr, options) {\n    var nums = (0, push_1.$push)(collection, expr, options);\n    var n = nums.reduce(function (acc, n) { return (n > acc ? n : acc); }, -Infinity);\n    return n === -Infinity ? undefined : n;\n}\nexports.$max = $max;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$maxN = void 0;\n// https://www.mongodb.com/docs/manual/reference/operator/aggregation/maxN\nvar core_1 = require(\"../../core\");\nvar util_1 = require(\"../../util\");\nvar push_1 = require(\"./push\");\n/**\n * Returns an aggregation of the maxmimum value n elements within a group.\n * If the group contains fewer than n elements, $maxN returns all elements in the group.\n *\n * @param {Array} collection The input array\n * @param {Object} expr The right-hand side expression value of the operator\n * @param {Options} options The options to use for this operation\n * @returns {*}\n */\nfunction $maxN(collection, expr, options) {\n    var _a;\n    var copts = core_1.ComputeOptions.init(options);\n    var m = collection.length;\n    var n = (0, core_1.computeValue)((_a = copts === null || copts === void 0 ? void 0 : copts.local) === null || _a === void 0 ? void 0 : _a.groupId, expr.n, null, copts);\n    var arr = (0, push_1.$push)(collection, expr.input, options).filter(function (o) { return !(0, util_1.isNil)(o); });\n    arr.sort(util_1.DEFAULT_COMPARATOR);\n    arr.reverse();\n    return m <= n ? arr : arr.slice(0, n);\n}\nexports.$maxN = $maxN;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$mergeObjects = void 0;\nvar mergeObjects_1 = require(\"../expression/object/mergeObjects\");\n/**\n * Combines multiple documents into a single document.\n *\n * @param {Array} collection The input array\n * @param {Object} expr The right-hand side expression value of the operator\n * @param {Options} options The options to use for this operation\n * @returns {Array|*}\n */\nexports.$mergeObjects = mergeObjects_1.$mergeObjects;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$min = void 0;\nvar push_1 = require(\"./push\");\n/**\n * Returns the lowest value in a group.\n *\n * @param {Array} collection The input array\n * @param {Object} expr The right-hand side expression value of the operator\n * @param {Options} The options to use for this operator\n * @returns {*}\n */\nfunction $min(collection, expr, options) {\n    var nums = (0, push_1.$push)(collection, expr, options);\n    var n = nums.reduce(function (acc, n) { return (n < acc ? n : acc); }, Infinity);\n    return n === Infinity ? undefined : n;\n}\nexports.$min = $min;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$minN = void 0;\n// https://www.mongodb.com/docs/manual/reference/operator/aggregation/minN\nvar core_1 = require(\"../../core\");\nvar util_1 = require(\"../../util\");\nvar push_1 = require(\"./push\");\n/**\n * Returns an aggregation of the minimum value n elements within a group.\n * If the group contains fewer than n elements, $minN returns all elements in the group.\n *\n * @param {Array} collection The input array\n * @param {Object} expr The right-hand side expression value of the operator\n * @param {Options} options The options to use for this operation\n * @returns {*}\n */\nfunction $minN(collection, expr, options) {\n    var _a;\n    var copts = core_1.ComputeOptions.init(options);\n    var m = collection.length;\n    var n = (0, core_1.computeValue)((_a = copts === null || copts === void 0 ? void 0 : copts.local) === null || _a === void 0 ? void 0 : _a.groupId, expr.n, null, copts);\n    var arr = (0, push_1.$push)(collection, expr.input, options).filter(function (o) { return !(0, util_1.isNil)(o); });\n    arr.sort(util_1.DEFAULT_COMPARATOR);\n    return m <= n ? arr : arr.slice(0, n);\n}\nexports.$minN = $minN;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$push = void 0;\nvar core_1 = require(\"../../core\");\nvar util_1 = require(\"../../util\");\n/**\n * Returns an array of all values for the selected field among for each document in that group.\n *\n * @param {Array} collection The input array\n * @param {Object} expr The right-hand side expression value of the operator\n * @param {Options} options The options to use for this operation\n * @returns {Array|*}\n */\nfunction $push(collection, expr, options) {\n    if ((0, util_1.isNil)(expr))\n        return collection;\n    var copts = core_1.ComputeOptions.init(options);\n    return collection.map(function (obj) {\n        return (0, core_1.computeValue)(obj, expr, null, copts.update(obj));\n    });\n}\nexports.$push = $push;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$stdDevPop = void 0;\nvar util_1 = require(\"../../util\");\nvar _internal_1 = require(\"./_internal\");\nvar push_1 = require(\"./push\");\n/**\n * Returns the population standard deviation of the input values.\n *\n * @param {Array} collection The input array\n * @param {Object} expr The right-hand side expression value of the operator\n * @param {Options} options The options to use for this operation\n * @return {Number}\n */\nfunction $stdDevPop(collection, expr, options) {\n    return (0, _internal_1.stddev)((0, push_1.$push)(collection, expr, options).filter(util_1.isNumber), false);\n}\nexports.$stdDevPop = $stdDevPop;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$stdDevSamp = void 0;\nvar util_1 = require(\"../../util\");\nvar _internal_1 = require(\"./_internal\");\nvar push_1 = require(\"./push\");\n/**\n * Returns the sample standard deviation of the input values.\n * @param  {Array} collection\n * @param  {Object} expr\n * @return {Number|null}\n */\nfunction $stdDevSamp(collection, expr, options) {\n    return (0, _internal_1.stddev)((0, push_1.$push)(collection, expr, options).filter(util_1.isNumber), true);\n}\nexports.$stdDevSamp = $stdDevSamp;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$sum = void 0;\nvar util_1 = require(\"../../util\");\nvar push_1 = require(\"./push\");\n/**\n * Returns the sum of all the values in a group.\n *\n * @param {Array} collection The input array\n * @param {Object} expr The right-hand side expression value of the operator\n * @returns {Number}\n */\nfunction $sum(collection, expr, options) {\n    if (!(0, util_1.isArray)(collection))\n        return 0;\n    // take a short cut if expr is number literal\n    if ((0, util_1.isNumber)(expr))\n        return collection.length * expr;\n    var nums = (0, push_1.$push)(collection, expr, options).filter(util_1.isNumber);\n    return nums.reduce(function (acc, n) { return acc + n; }, 0);\n}\nexports.$sum = $sum;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$top = void 0;\nvar topN_1 = require(\"./topN\");\n/**\n * Returns the top element within a group according to the specified sort order.\n *\n * @param {Array} collection The input array\n * @param {Object} expr The right-hand side expression value of the operator\n * @param {Options} options The options to use for this operation\n * @returns {*}\n */\nfunction $top(collection, expr, options) {\n    return (0, topN_1.$topN)(collection, __assign(__assign({}, expr), { n: 1 }), options);\n}\nexports.$top = $top;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$topN = void 0;\n// https://www.mongodb.com/docs/manual/reference/operator/aggregation/topN/#mongodb-group-grp.-topN\nvar aggregator_1 = require(\"../../aggregator\");\nvar core_1 = require(\"../../core\");\nvar push_1 = require(\"./push\");\n/**\n * Returns an aggregation of the top n elements within a group, according to the specified sort order.\n * If the group contains fewer than n elements, $topN returns all elements in the group.\n *\n * @param {Array} collection The input array\n * @param {Object} expr The right-hand side expression value of the operator\n * @param {Options} options The options to use for this operation\n * @returns {*}\n */\nfunction $topN(collection, expr, options) {\n    var copts = core_1.ComputeOptions.init(options);\n    var _a = (0, core_1.computeValue)(copts.local.groupId, expr, null, copts), n = _a.n, sortBy = _a.sortBy;\n    var result = new aggregator_1.Aggregator([{ $sort: sortBy }, { $limit: n }], copts.options).run(collection);\n    return (0, push_1.$push)(result, expr.output, copts);\n}\nexports.$topN = $topN;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.regexStrip = exports.regexQuote = exports.padDigits = exports.computeDate = exports.adjustDate = exports.formatTimezone = exports.parseTimezone = exports.DATE_SYM_TABLE = exports.DATE_PART_INTERVAL = exports.DATE_FORMAT = exports.DURATION_IN_MILLIS = exports.MILLIS_PER_DAY = exports.MINUTES_PER_HOUR = exports.isoWeekYear = exports.isoWeek = exports.getDayOfYear = exports.isLeapYear = void 0;\nvar core_1 = require(\"../../../core\");\nvar util_1 = require(\"../../../util\");\nvar COMMON_YEAR_DAYS_OFFSET = [\n    0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334,\n];\nvar LEAP_YEAR_DAYS_OFFSET = [\n    0, 31, 60, 91, 121, 152, 182, 213, 244, 274, 305, 335,\n];\n// https://en.wikipedia.org/wiki/ISO_week_date\nvar p = function (y) {\n    return (y + Math.floor(y / 4) - Math.floor(y / 100) + Math.floor(y / 400)) % 7;\n};\nvar weeks = function (y) { return 52 + Number(p(y) == 4 || p(y - 1) == 3); };\nvar isLeapYear = function (year) {\n    return (year & 3) == 0 && (year % 100 != 0 || year % 400 == 0);\n};\nexports.isLeapYear = isLeapYear;\nvar getDayOfYear = function (d) {\n    return ((0, exports.isLeapYear)(d.getUTCFullYear())\n        ? LEAP_YEAR_DAYS_OFFSET\n        : COMMON_YEAR_DAYS_OFFSET)[d.getUTCMonth()] + d.getUTCDate();\n};\nexports.getDayOfYear = getDayOfYear;\nfunction isoWeek(d) {\n    // algorithm based on https://en.wikipedia.org/wiki/ISO_week_date\n    var w = Math.floor((10 + (0, exports.getDayOfYear)(d) - (d.getUTCDay() || 7)) / 7);\n    if (w < 1)\n        return weeks(d.getUTCFullYear() - 1);\n    if (w > weeks(d.getUTCFullYear()))\n        return 1;\n    return w;\n}\nexports.isoWeek = isoWeek;\nfunction isoWeekYear(d) {\n    return (d.getUTCFullYear() -\n        Number(d.getUTCMonth() == 0 && d.getUTCDate() == 1 && d.getUTCDay() < 1));\n}\nexports.isoWeekYear = isoWeekYear;\nexports.MINUTES_PER_HOUR = 60;\nexports.MILLIS_PER_DAY = 1000 * 60 * 60 * 24;\nexports.DURATION_IN_MILLIS = {\n    week: exports.MILLIS_PER_DAY * 7,\n    day: exports.MILLIS_PER_DAY,\n    hour: 1000 * 60 * 60,\n    minute: 1000 * 60,\n    second: 1000,\n    millisecond: 1,\n};\n// default format if unspecified\nexports.DATE_FORMAT = \"%Y-%m-%dT%H:%M:%S.%LZ\";\n// Inclusive interval of date parts\nexports.DATE_PART_INTERVAL = [\n    [\"year\", 0, 9999],\n    [\"month\", 1, 12],\n    [\"day\", 1, 31],\n    [\"hour\", 0, 23],\n    [\"minute\", 0, 59],\n    [\"second\", 0, 59],\n    [\"millisecond\", 0, 999],\n];\n// used for formatting dates in $dateToString operator\nexports.DATE_SYM_TABLE = {\n    \"%Y\": { name: \"year\", padding: 4, re: /([0-9]{4})/ },\n    \"%G\": { name: \"year\", padding: 4, re: /([0-9]{4})/ },\n    \"%m\": { name: \"month\", padding: 2, re: /(0[1-9]|1[012])/ },\n    \"%d\": { name: \"day\", padding: 2, re: /(0[1-9]|[12][0-9]|3[01])/ },\n    \"%H\": { name: \"hour\", padding: 2, re: /([01][0-9]|2[0-3])/ },\n    \"%M\": { name: \"minute\", padding: 2, re: /([0-5][0-9])/ },\n    \"%S\": { name: \"second\", padding: 2, re: /([0-5][0-9]|60)/ },\n    \"%L\": { name: \"millisecond\", padding: 3, re: /([0-9]{3})/ },\n    \"%u\": { name: \"weekday\", padding: 1, re: /([1-7])/ },\n    \"%U\": { name: \"week\", padding: 2, re: /([1-4][0-9]?|5[0-3]?)/ },\n    \"%V\": { name: \"isoWeek\", padding: 2, re: /([1-4][0-9]?|5[0-3]?)/ },\n    \"%z\": {\n        name: \"timezone\",\n        padding: 2,\n        re: /(([+-][01][0-9]|2[0-3]):?([0-5][0-9])?)/,\n    },\n    \"%Z\": { name: \"minuteOffset\", padding: 3, re: /([+-][0-9]{3})/ },\n    // \"%%\": \"%\",\n};\n/**\n * Parse and return the timezone string as a number\n * @param tzstr Timezone string matching '+/-hh[:][mm]'\n */\nfunction parseTimezone(tzstr) {\n    if ((0, util_1.isNil)(tzstr))\n        return 0;\n    var m = exports.DATE_SYM_TABLE[\"%z\"].re.exec(tzstr);\n    if (!m)\n        throw Error(\"invalid or location-based timezone '\".concat(tzstr, \"' not supported\"));\n    var hr = parseInt(m[2]) || 0;\n    var min = parseInt(m[3]) || 0;\n    return (Math.abs(hr * exports.MINUTES_PER_HOUR) + min) * (hr < 0 ? -1 : 1);\n}\nexports.parseTimezone = parseTimezone;\n/**\n * Formats the timezone for output\n * @param tz A timezone object\n */\nfunction formatTimezone(minuteOffset) {\n    return ((minuteOffset < 0 ? \"-\" : \"+\") +\n        padDigits(Math.abs(Math.floor(minuteOffset / exports.MINUTES_PER_HOUR)), 2) +\n        padDigits(Math.abs(minuteOffset) % exports.MINUTES_PER_HOUR, 2));\n}\nexports.formatTimezone = formatTimezone;\n/**\n * Adjust the date by the given timezone\n * @param d Date object\n * @param minuteOffset number\n */\nfunction adjustDate(d, minuteOffset) {\n    d.setUTCMinutes(d.getUTCMinutes() + minuteOffset);\n}\nexports.adjustDate = adjustDate;\n/**\n * Computes a date expression\n * @param obj The target object\n * @param expr Any value that resolves to a valid date expression. Valid expressions include a number, Date, or Object{date: number|Date, timezone?: string}\n */\nfunction computeDate(obj, expr, options) {\n    var d = (0, core_1.computeValue)(obj, expr, null, options);\n    if ((0, util_1.isDate)(d))\n        return new Date(d);\n    // timestamp is in seconds\n    if ((0, util_1.isNumber)(d))\n        return new Date(d * 1000);\n    if (d.date) {\n        var date = (0, util_1.isDate)(d.date) ? new Date(d.date) : new Date(d.date * 1000);\n        if (d.timezone) {\n            adjustDate(date, parseTimezone(d.timezone));\n        }\n        return date;\n    }\n    throw Error(\"cannot convert \".concat(expr === null || expr === void 0 ? void 0 : expr.toString(), \" to date\"));\n}\nexports.computeDate = computeDate;\nfunction padDigits(n, digits) {\n    return (new Array(Math.max(digits - String(n).length + 1, 0)).join(\"0\") +\n        n.toString());\n}\nexports.padDigits = padDigits;\nfunction regexQuote(s) {\n    \"^.-*?$\".split(\"\").forEach(function (c) {\n        s = s.replace(c, \"\\\\\".concat(c));\n    });\n    return s;\n}\nexports.regexQuote = regexQuote;\nfunction regexStrip(s) {\n    return s.replace(/^\\//, \"\").replace(/\\/$/, \"\");\n}\nexports.regexStrip = regexStrip;\n","\"use strict\";\n// Date Expression Operators: https://docs.mongodb.com/manual/reference/operator/aggregation/#date-expression-operators\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$dateAdd = void 0;\nvar core_1 = require(\"../../../core\");\nvar _internal_1 = require(\"./_internal\");\n/**\n * Increments a Date object by a specified number of time units.\n * @param obj\n * @param expr\n */\nfunction $dateAdd(obj, expr, options) {\n    var args = (0, core_1.computeValue)(obj, expr, null, options);\n    var d = (0, _internal_1.computeDate)(obj, expr.startDate, options);\n    switch (args.unit) {\n        case \"year\":\n            d.setUTCFullYear(d.getUTCFullYear() + args.amount);\n            break;\n        case \"quarter\":\n            addMonth(d, 3 * args.amount);\n            break;\n        case \"month\":\n            addMonth(d, args.amount);\n            break;\n        default:\n            d.setTime(d.getTime() + _internal_1.DURATION_IN_MILLIS[args.unit] * args.amount);\n    }\n    if (args.timezone) {\n        var tz = (0, _internal_1.parseTimezone)(args.timezone);\n        (0, _internal_1.adjustDate)(d, tz);\n    }\n    return d;\n}\nexports.$dateAdd = $dateAdd;\nfunction addMonth(d, amount) {\n    // months start from 0 to 11.\n    var m = d.getUTCMonth() + amount;\n    var yearOffset = Math.floor(m / 12);\n    if (m < 0) {\n        var month = (m % 12) + 12;\n        d.setUTCFullYear(d.getUTCFullYear() + yearOffset, month, d.getUTCDate());\n    }\n    else {\n        d.setUTCFullYear(d.getUTCFullYear() + yearOffset, m % 12, d.getUTCDate());\n    }\n}\n","\"use strict\";\n// Object Expression Operators: https://docs.mongodb.com/manual/reference/operator/aggregation/#object-expression-operators\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$mergeObjects = void 0;\nvar core_1 = require(\"../../../core\");\nvar util_1 = require(\"../../../util\");\n/**\n * Combines multiple documents into a single document.\n *\n * @param {*} obj The target object for this expression\n * @param {*} expr The right-hand side of the operator\n * @param {Options} options Options to use for operation\n */\nfunction $mergeObjects(obj, expr, options) {\n    var docs = (0, core_1.computeValue)(obj, expr, null, options);\n    return docs instanceof Array\n        ? docs.reduce(function (memo, o) { return (0, util_1.into)(memo, o); }, {})\n        : {};\n}\nexports.$mergeObjects = $mergeObjects;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$addFields = void 0;\nvar core_1 = require(\"../../core\");\nvar util_1 = require(\"../../util\");\n/**\n * Adds new fields to documents.\n * Outputs documents that contain all existing fields from the input documents and newly added fields.\n *\n * @param {Iterator} collection\n * @param {Object} expr\n * @param {Options} options\n */\nfunction $addFields(collection, expr, options) {\n    var newFields = Object.keys(expr);\n    if (newFields.length === 0)\n        return collection;\n    return collection.map(function (obj) {\n        var newObj = __assign({}, obj);\n        for (var _i = 0, newFields_1 = newFields; _i < newFields_1.length; _i++) {\n            var field = newFields_1[_i];\n            var newValue = (0, core_1.computeValue)(obj, expr[field], null, options);\n            if (newValue !== undefined) {\n                (0, util_1.setValue)(newObj, field, newValue);\n            }\n            else {\n                (0, util_1.removeValue)(newObj, field);\n            }\n        }\n        return newObj;\n    });\n}\nexports.$addFields = $addFields;\n","\"use strict\";\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$bucket = void 0;\nvar core_1 = require(\"../../core\");\nvar lazy_1 = require(\"../../lazy\");\nvar util_1 = require(\"../../util\");\n/**\n * Categorizes incoming documents into groups, called buckets, based on a specified expression and bucket boundaries.\n * https://docs.mongodb.com/manual/reference/operator/aggregation/bucket/\n *\n * @param {*} collection\n * @param {*} expr\n * @param {Options} opt Pipeline options\n */\nfunction $bucket(collection, expr, options) {\n    var boundaries = __spreadArray([], expr.boundaries, true);\n    var defaultKey = expr.default;\n    var lower = boundaries[0]; // inclusive\n    var upper = boundaries[boundaries.length - 1]; // exclusive\n    var outputExpr = expr.output || { count: { $sum: 1 } };\n    (0, util_1.assert)(expr.boundaries.length > 2, \"$bucket 'boundaries' expression must have at least 3 elements\");\n    var boundType = (0, util_1.getType)(lower);\n    for (var i = 0, len = boundaries.length - 1; i < len; i++) {\n        (0, util_1.assert)(boundType === (0, util_1.getType)(boundaries[i + 1]), \"$bucket 'boundaries' must all be of the same type\");\n        (0, util_1.assert)(boundaries[i] < boundaries[i + 1], \"$bucket 'boundaries' must be sorted in ascending order\");\n    }\n    !(0, util_1.isNil)(defaultKey) &&\n        (0, util_1.getType)(expr.default) === (0, util_1.getType)(lower) &&\n        (0, util_1.assert)(expr.default >= upper || expr.default < lower, \"$bucket 'default' expression must be out of boundaries range\");\n    var grouped = {};\n    for (var _i = 0, boundaries_1 = boundaries; _i < boundaries_1.length; _i++) {\n        var k = boundaries_1[_i];\n        grouped[k] = [];\n    }\n    // add default key if provided\n    if (!(0, util_1.isNil)(defaultKey))\n        grouped[defaultKey] = [];\n    var iterator = null;\n    return (0, lazy_1.Lazy)(function () {\n        if (iterator === null) {\n            collection.each(function (obj) {\n                var key = (0, core_1.computeValue)(obj, expr.groupBy, null, options);\n                if ((0, util_1.isNil)(key) || key < lower || key >= upper) {\n                    (0, util_1.assert)(!(0, util_1.isNil)(defaultKey), \"$bucket require a default for out of range values\");\n                    grouped[defaultKey].push(obj);\n                }\n                else {\n                    (0, util_1.assert)(key >= lower && key < upper, \"$bucket 'groupBy' expression must resolve to a value in range of boundaries\");\n                    var index = findInsertIndex(boundaries, key);\n                    var boundKey = boundaries[Math.max(0, index - 1)];\n                    grouped[boundKey].push(obj);\n                }\n            });\n            // upper bound is exclusive so we remove it\n            boundaries.pop();\n            if (!(0, util_1.isNil)(defaultKey))\n                boundaries.push(defaultKey);\n            iterator = (0, lazy_1.Lazy)(boundaries).map(function (key) {\n                var acc = (0, core_1.computeValue)(grouped[key], outputExpr, null, options);\n                return (0, util_1.into)(acc, { _id: key });\n            });\n        }\n        return iterator.next();\n    });\n}\nexports.$bucket = $bucket;\n/**\n * Find the insert index for the given key in a sorted array.\n *\n * @param {*} sorted The sorted array to search\n * @param {*} item The search key\n */\nfunction findInsertIndex(sorted, item) {\n    // uses binary search\n    var lo = 0;\n    var hi = sorted.length - 1;\n    while (lo <= hi) {\n        var mid = Math.round(lo + (hi - lo) / 2);\n        if (item < sorted[mid]) {\n            hi = mid - 1;\n        }\n        else if (item > sorted[mid]) {\n            lo = mid + 1;\n        }\n        else {\n            return mid;\n        }\n    }\n    return lo;\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$bucketAuto = void 0;\nvar core_1 = require(\"../../core\");\nvar util_1 = require(\"../../util\");\n/**\n * Categorizes incoming documents into a specific number of groups, called buckets,\n * based on a specified expression. Bucket boundaries are automatically determined\n * in an attempt to evenly distribute the documents into the specified number of buckets.\n * https://docs.mongodb.com/manual/reference/operator/aggregation/bucketAuto/\n *\n * @param {*} collection\n * @param {*} expr\n * @param {*} options\n */\nfunction $bucketAuto(collection, expr, options) {\n    var outputExpr = expr.output || { count: { $sum: 1 } };\n    var groupByExpr = expr.groupBy;\n    var bucketCount = expr.buckets;\n    (0, util_1.assert)(bucketCount > 0, \"The $bucketAuto 'buckets' field must be greater than 0, but found: \".concat(bucketCount));\n    var ID_KEY = \"_id\";\n    return collection.transform(function (coll) {\n        var approxBucketSize = Math.max(1, Math.round(coll.length / bucketCount));\n        var computeValueOptimized = (0, util_1.memoize)(core_1.computeValue, options === null || options === void 0 ? void 0 : options.hashFunction);\n        var grouped = {};\n        var remaining = [];\n        var sorted = (0, util_1.sortBy)(coll, function (o) {\n            var key = computeValueOptimized(o, groupByExpr, null, options);\n            if ((0, util_1.isNil)(key)) {\n                remaining.push(o);\n            }\n            else {\n                grouped[key] || (grouped[key] = []);\n                grouped[key].push(o);\n            }\n            return key;\n        });\n        var result = [];\n        var index = 0; // counter for sorted collection\n        for (var i = 0, len = sorted.length; i < bucketCount && index < len; i++) {\n            var boundaries = {};\n            var bucketItems = [];\n            for (var j = 0; j < approxBucketSize && index < len; j++) {\n                var key = computeValueOptimized(sorted[index], groupByExpr, null, options);\n                if ((0, util_1.isNil)(key))\n                    key = null;\n                // populate current bucket with all values for current key\n                (0, util_1.into)(bucketItems, (0, util_1.isNil)(key) ? remaining : grouped[key]);\n                // increase sort index by number of items added\n                index += (0, util_1.isNil)(key) ? remaining.length : grouped[key].length;\n                // set the min key boundary if not already present\n                if (!(0, util_1.has)(boundaries, \"min\"))\n                    boundaries.min = key;\n                if (result.length > 0) {\n                    var lastBucket = result[result.length - 1];\n                    lastBucket[ID_KEY].max = boundaries.min;\n                }\n            }\n            // if is last bucket add remaining items\n            if (i == bucketCount - 1) {\n                (0, util_1.into)(bucketItems, sorted.slice(index));\n            }\n            var values = (0, core_1.computeValue)(bucketItems, outputExpr, null, options);\n            result.push((0, util_1.into)(values, {\n                _id: boundaries,\n            }));\n        }\n        if (result.length > 0) {\n            result[result.length - 1][ID_KEY].max =\n                computeValueOptimized(sorted[sorted.length - 1], groupByExpr, null, options);\n        }\n        return result;\n    });\n}\nexports.$bucketAuto = $bucketAuto;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$count = void 0;\nvar lazy_1 = require(\"../../lazy\");\nvar util_1 = require(\"../../util\");\n/**\n * Returns a document that contains a count of the number of documents input to the stage.\n *\n * @param {Array} collection\n * @param {String} expr\n * @param {Options} options\n * @return {Object}\n */\nfunction $count(collection, expr, options) {\n    var _a;\n    (0, util_1.assert)((0, util_1.isString)(expr) &&\n        expr.trim() !== \"\" &&\n        expr.indexOf(\".\") === -1 &&\n        expr.trim()[0] !== \"$\", \"Invalid expression value for $count\");\n    return (0, lazy_1.Lazy)([\n        (_a = {},\n            _a[expr] = collection.size(),\n            _a),\n    ]);\n}\nexports.$count = $count;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$facet = void 0;\nvar aggregator_1 = require(\"../../aggregator\");\nvar core_1 = require(\"../../core\");\nvar util_1 = require(\"../../util\");\n/**\n * Processes multiple aggregation pipelines within a single stage on the same set of input documents.\n * Enables the creation of multi-faceted aggregations capable of characterizing data across multiple dimensions, or facets, in a single stage.\n */\nfunction $facet(collection, expr, options) {\n    return collection.transform(function (array) {\n        return [\n            (0, util_1.objectMap)(expr, function (pipeline) {\n                return new aggregator_1.Aggregator(pipeline, __assign(__assign({}, options), { processingMode: core_1.ProcessingMode.CLONE_INPUT })).run(array);\n            }),\n        ];\n    });\n}\nexports.$facet = $facet;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$group = void 0;\nvar core_1 = require(\"../../core\");\nvar util_1 = require(\"../../util\");\n// lookup key for grouping\nvar ID_KEY = \"_id\";\n/**\n * Groups documents together for the purpose of calculating aggregate values based on a collection of documents.\n *\n * @param collection\n * @param expr\n * @param options\n * @returns {Array}\n */\nfunction $group(collection, expr, options) {\n    var idExpr = expr[ID_KEY];\n    var copts = core_1.ComputeOptions.init(options);\n    return collection.transform(function (coll) {\n        var partitions = (0, util_1.groupBy)(coll, function (obj) { return (0, core_1.computeValue)(obj, idExpr, null, options); }, options === null || options === void 0 ? void 0 : options.hashFunction);\n        // remove the group key\n        expr = __assign({}, expr);\n        delete expr[ID_KEY];\n        var i = -1;\n        var size = partitions.keys.length;\n        return function () {\n            if (++i === size)\n                return { done: true };\n            var groupId = partitions.keys[i];\n            var obj = {};\n            // exclude undefined key value\n            if (groupId !== undefined) {\n                obj[ID_KEY] = groupId;\n            }\n            // compute remaining keys in expression\n            for (var _i = 0, _a = Object.entries(expr); _i < _a.length; _i++) {\n                var _b = _a[_i], key = _b[0], val = _b[1];\n                obj[key] = (0, core_1.computeValue)(partitions.groups[i], val, key, copts.update(null, { groupId: groupId }));\n            }\n            return { value: obj, done: false };\n        };\n    });\n}\nexports.$group = $group;\n","\"use strict\";\n/**\n * Pipeline Aggregation Stages. https://docs.mongodb.com/manual/reference/operator/aggregation-\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./addFields\"), exports);\n__exportStar(require(\"./bucket\"), exports);\n__exportStar(require(\"./bucketAuto\"), exports);\n__exportStar(require(\"./count\"), exports);\n__exportStar(require(\"./facet\"), exports);\n__exportStar(require(\"./group\"), exports);\n__exportStar(require(\"./limit\"), exports);\n__exportStar(require(\"./lookup\"), exports);\n__exportStar(require(\"./match\"), exports);\n__exportStar(require(\"./merge\"), exports);\n__exportStar(require(\"./out\"), exports);\n__exportStar(require(\"./project\"), exports);\n__exportStar(require(\"./redact\"), exports);\n__exportStar(require(\"./replaceRoot\"), exports);\n__exportStar(require(\"./replaceWith\"), exports);\n__exportStar(require(\"./sample\"), exports);\n__exportStar(require(\"./set\"), exports);\n__exportStar(require(\"./setWindowFields\"), exports);\n__exportStar(require(\"./skip\"), exports);\n__exportStar(require(\"./sort\"), exports);\n__exportStar(require(\"./sortByCount\"), exports);\n__exportStar(require(\"./unionWith\"), exports);\n__exportStar(require(\"./unset\"), exports);\n__exportStar(require(\"./unwind\"), exports);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$limit = void 0;\n/**\n * Restricts the number of documents in an aggregation pipeline.\n *\n * @param collection\n * @param value\n * @param options\n * @returns {Object|*}\n */\nfunction $limit(collection, expr, options) {\n    return collection.take(expr);\n}\nexports.$limit = $limit;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$lookup = void 0;\nvar util_1 = require(\"../../util\");\n/**\n * Performs a left outer join to another collection in the same database to filter in documents from the “joined” collection for processing.\n *\n * @param collection\n * @param expr\n * @param opt\n */\nfunction $lookup(collection, expr, options) {\n    var joinColl = (0, util_1.isString)(expr.from)\n        ? options === null || options === void 0 ? void 0 : options.collectionResolver(expr.from)\n        : expr.from;\n    (0, util_1.assert)(joinColl instanceof Array, \"'from' field must resolve to an array\");\n    var hash = {};\n    for (var _i = 0, joinColl_1 = joinColl; _i < joinColl_1.length; _i++) {\n        var obj = joinColl_1[_i];\n        var k = (0, util_1.hashCode)((0, util_1.resolve)(obj, expr.foreignField), options === null || options === void 0 ? void 0 : options.hashFunction);\n        hash[k] = hash[k] || [];\n        hash[k].push(obj);\n    }\n    return collection.map(function (obj) {\n        var k = (0, util_1.hashCode)((0, util_1.resolve)(obj, expr.localField), options === null || options === void 0 ? void 0 : options.hashFunction);\n        var newObj = (0, util_1.into)({}, obj);\n        newObj[expr.as] = hash[k] || [];\n        return newObj;\n    });\n}\nexports.$lookup = $lookup;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$match = void 0;\nvar query_1 = require(\"../../query\");\n/**\n * Filters the document stream, and only allows matching documents to pass into the next pipeline stage.\n * $match uses standard MongoDB queries.\n *\n * @param collection\n * @param expr\n * @param options\n * @returns {Array|*}\n */\nfunction $match(collection, expr, options) {\n    var q = new query_1.Query(expr, options);\n    return collection.filter(function (o) { return q.test(o); });\n}\nexports.$match = $match;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$merge = void 0;\nvar aggregator_1 = require(\"../../aggregator\");\nvar core_1 = require(\"../../core\");\nvar util_1 = require(\"../../util\");\nvar accumulator_1 = require(\"../accumulator\");\n/**\n * Writes the resulting documents of the aggregation pipeline to a collection.\n *\n * The stage can incorporate (insert new documents, merge documents, replace documents,\n * keep existing documents, fail the operation, process documents with a custom update pipeline)\n * the results into an output collection. To use the $merge stage, it must be the last stage in the pipeline.\n *\n * Note: Object are deep cloned for outputing regardless of the ProcessingMode.\n *\n * @param collection\n * @param expr\n * @param options\n * @returns {*}\n */\nfunction $merge(collection, expr, options) {\n    var output = (0, util_1.isString)(expr.into)\n        ? options === null || options === void 0 ? void 0 : options.collectionResolver(expr.into)\n        : expr.into;\n    (0, util_1.assert)(output instanceof Array, \"$merge: option 'into' must resolve to an array\");\n    var onField = expr.on || options.idKey;\n    var getHash = function (o) {\n        var val = (0, util_1.isString)(onField)\n            ? (0, util_1.resolve)(o, onField)\n            : onField.map(function (s) { return (0, util_1.resolve)(o, s); });\n        return (0, util_1.hashCode)(val, options.hashFunction);\n    };\n    var hash = {};\n    // we assuming the lookup expressions are unique\n    for (var i = 0; i < output.length; i++) {\n        var obj = output[i];\n        var k = getHash(obj);\n        (0, util_1.assert)(!hash[k], \"$merge: 'into' collection must have unique entries for the 'on' field.\");\n        hash[k] = [obj, i];\n    }\n    var copts = core_1.ComputeOptions.init(options);\n    return collection.map(function (o) {\n        var k = getHash(o);\n        if (hash[k]) {\n            var _a = hash[k], target = _a[0], i = _a[1];\n            // compute variables\n            var variables = (0, core_1.computeValue)(target, expr.let || { new: \"$$ROOT\" }, null, \n            // 'root' is the item from the iteration.\n            copts.update(o));\n            if ((0, util_1.isArray)(expr.whenMatched)) {\n                var aggregator = new aggregator_1.Aggregator(expr.whenMatched, __assign(__assign({}, copts.options), { variables: variables }));\n                output[i] = aggregator.run([target])[0];\n            }\n            else {\n                switch (expr.whenMatched) {\n                    case \"replace\":\n                        output[i] = o;\n                        break;\n                    case \"fail\":\n                        throw new Error(\"$merge: failed due to matching as specified by 'whenMatched' option.\");\n                    case \"keepExisting\":\n                        break;\n                    case \"merge\":\n                    default:\n                        output[i] = (0, accumulator_1.$mergeObjects)(target, [target, o], \n                        // 'root' is the item from the iteration.\n                        copts.update(o, { variables: variables }));\n                        break;\n                }\n            }\n        }\n        else {\n            switch (expr.whenNotMatched) {\n                case \"discard\":\n                    break;\n                case \"fail\":\n                    throw new Error(\"$merge: failed due to matching as specified by 'whenMatched' option.\");\n                case \"insert\":\n                default:\n                    output.push(o);\n                    break;\n            }\n        }\n        return o; // passthrough\n    });\n}\nexports.$merge = $merge;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$out = void 0;\nvar util_1 = require(\"../../util\");\n/**\n * Takes the documents returned by the aggregation pipeline and writes them to a specified collection.\n *\n * Unlike the $out operator in MongoDB, this operator can appear in any position in the pipeline and is\n * useful for collecting intermediate results of an aggregation operation.\n *\n * Note: Object are deep cloned for outputing regardless of the ProcessingMode.\n *\n * @param collection\n * @param expr\n * @param options\n * @returns {*}\n */\nfunction $out(collection, expr, options) {\n    var outputColl = (0, util_1.isString)(expr)\n        ? options === null || options === void 0 ? void 0 : options.collectionResolver(expr)\n        : expr;\n    (0, util_1.assert)(outputColl instanceof Array, \"expression must resolve to an array\");\n    return collection.map(function (o) {\n        outputColl.push((0, util_1.cloneDeep)(o));\n        return o; // passthrough\n    });\n}\nexports.$out = $out;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$project = void 0;\nvar core_1 = require(\"../../core\");\nvar util_1 = require(\"../../util\");\n/**\n * Reshapes a document stream.\n * $project can rename, add, or remove fields as well as create computed values and sub-documents.\n *\n * @param collection\n * @param expr\n * @param opt\n * @returns {Array}\n */\nfunction $project(collection, expr, options) {\n    if ((0, util_1.isEmpty)(expr))\n        return collection;\n    // result collection\n    var expressionKeys = Object.keys(expr);\n    var idOnlyExcluded = false;\n    // validate inclusion and exclusion\n    validateExpression(expr, options);\n    var ID_KEY = options.idKey;\n    if ((0, util_1.inArray)(expressionKeys, ID_KEY)) {\n        var id = expr[ID_KEY];\n        if (id === 0 || id === false) {\n            expressionKeys = expressionKeys.filter(util_1.notInArray.bind(null, [ID_KEY]));\n            idOnlyExcluded = expressionKeys.length == 0;\n        }\n    }\n    else {\n        // if not specified the add the ID field\n        expressionKeys.push(ID_KEY);\n    }\n    var copts = core_1.ComputeOptions.init(options);\n    return collection.map(function (obj) {\n        return processObject(obj, expr, copts.update(obj), expressionKeys, idOnlyExcluded);\n    });\n}\nexports.$project = $project;\n/**\n * Process the expression value for $project operators\n *\n * @param {Object} obj The object to use as options\n * @param {Object} expr The experssion object of $project operator\n * @param {Array} expressionKeys The key in the 'expr' object\n * @param {Boolean} idOnlyExcluded Boolean value indicating whether only the ID key is excluded\n */\nfunction processObject(obj, expr, options, expressionKeys, idOnlyExcluded) {\n    var newObj = {};\n    var foundSlice = false;\n    var foundExclusion = false;\n    var dropKeys = [];\n    if (idOnlyExcluded) {\n        dropKeys.push(options.idKey);\n    }\n    var _loop_1 = function (key) {\n        // final computed value of the key\n        var value = undefined;\n        // expression to associate with key\n        var subExpr = expr[key];\n        if (key !== options.idKey && (0, util_1.inArray)([0, false], subExpr)) {\n            foundExclusion = true;\n        }\n        if (key === options.idKey && (0, util_1.isEmpty)(subExpr)) {\n            // tiny optimization here to skip over id\n            value = obj[key];\n        }\n        else if ((0, util_1.isString)(subExpr)) {\n            value = (0, core_1.computeValue)(obj, subExpr, key, options);\n        }\n        else if ((0, util_1.inArray)([1, true], subExpr)) {\n            // For direct projections, we use the resolved object value\n        }\n        else if (subExpr instanceof Array) {\n            value = subExpr.map(function (v) {\n                var r = (0, core_1.computeValue)(obj, v, null, options);\n                if ((0, util_1.isNil)(r))\n                    return null;\n                return r;\n            });\n        }\n        else if ((0, util_1.isObject)(subExpr)) {\n            var subExprObj_1 = subExpr;\n            var subExprKeys_1 = Object.keys(subExpr);\n            var operator = subExprKeys_1.length == 1 ? subExprKeys_1[0] : null;\n            // first try a projection operator\n            var call = (0, core_1.getOperator)(core_1.OperatorType.PROJECTION, operator);\n            if (call) {\n                // apply the projection operator on the operator expression for the key\n                if (operator === \"$slice\") {\n                    // $slice is handled differently for aggregation and projection operations\n                    if ((0, util_1.ensureArray)(subExprObj_1[operator]).every(util_1.isNumber)) {\n                        // $slice for projection operation\n                        value = call(obj, subExprObj_1[operator], key);\n                        foundSlice = true;\n                    }\n                    else {\n                        // $slice for aggregation operation\n                        value = (0, core_1.computeValue)(obj, subExprObj_1, key, options);\n                    }\n                }\n                else {\n                    value = call(obj, subExprObj_1[operator], key, options);\n                }\n            }\n            else if ((0, util_1.isOperator)(operator)) {\n                // compute if operator key\n                value = (0, core_1.computeValue)(obj, subExprObj_1[operator], operator, options);\n            }\n            else if ((0, util_1.has)(obj, key)) {\n                // compute the value for the sub expression for the key\n                validateExpression(subExprObj_1, options);\n                var target = obj[key];\n                if (target instanceof Array) {\n                    value = target.map(function (o) {\n                        return processObject(o, subExprObj_1, options, subExprKeys_1, false);\n                    });\n                }\n                else {\n                    target = (0, util_1.isObject)(target) ? target : obj;\n                    value = processObject(target, subExprObj_1, options, subExprKeys_1, false);\n                }\n            }\n            else {\n                // compute the value for the sub expression for the key\n                value = (0, core_1.computeValue)(obj, subExpr, null, options);\n            }\n        }\n        else {\n            dropKeys.push(key);\n            return \"continue\";\n        }\n        // get value with object graph\n        var objPathGraph = (0, util_1.resolveGraph)(obj, key, {\n            preserveMissing: true,\n        });\n        // add the value at the path\n        if (objPathGraph !== undefined) {\n            (0, util_1.merge)(newObj, objPathGraph, {\n                flatten: true,\n            });\n        }\n        // if computed add/or remove accordingly\n        if ((0, util_1.notInArray)([0, 1, false, true], subExpr)) {\n            if (value === undefined) {\n                (0, util_1.removeValue)(newObj, key, { descendArray: true });\n            }\n            else {\n                (0, util_1.setValue)(newObj, key, value);\n            }\n        }\n    };\n    for (var _i = 0, expressionKeys_1 = expressionKeys; _i < expressionKeys_1.length; _i++) {\n        var key = expressionKeys_1[_i];\n        _loop_1(key);\n    }\n    // filter out all missing values preserved to support correct merging\n    (0, util_1.filterMissing)(newObj);\n    // For the following cases we include all keys on the object that were not explicitly excluded.\n    //\n    // 1. projection included $slice operator\n    // 2. some fields were explicitly excluded\n    // 3. only the id field was excluded\n    if (foundSlice || foundExclusion || idOnlyExcluded) {\n        newObj = (0, util_1.into)({}, obj, newObj);\n        if (dropKeys.length > 0) {\n            for (var _a = 0, dropKeys_1 = dropKeys; _a < dropKeys_1.length; _a++) {\n                var k = dropKeys_1[_a];\n                (0, util_1.removeValue)(newObj, k, { descendArray: true });\n            }\n        }\n    }\n    return newObj;\n}\n/**\n * Validate inclusion and exclusion values in expression\n *\n * @param {Object} expr The expression given for the projection\n */\nfunction validateExpression(expr, options) {\n    var check = [false, false];\n    for (var _i = 0, _a = Object.entries(expr); _i < _a.length; _i++) {\n        var _b = _a[_i], k = _b[0], v = _b[1];\n        if (k === options.idKey)\n            return;\n        if (v === 0 || v === false) {\n            check[0] = true;\n        }\n        else if (v === 1 || v === true) {\n            check[1] = true;\n        }\n        (0, util_1.assert)(!(check[0] && check[1]), \"Projection cannot have a mix of inclusion and exclusion.\");\n    }\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$redact = void 0;\nvar core_1 = require(\"../../core\");\n/**\n * Restricts the contents of the documents based on information stored in the documents themselves.\n *\n * https://docs.mongodb.com/manual/reference/operator/aggregation/redact/\n */\nfunction $redact(collection, expr, options) {\n    var copts = core_1.ComputeOptions.init(options);\n    return collection.map(function (obj) {\n        return (0, core_1.redact)(obj, expr, copts.update(obj));\n    });\n}\nexports.$redact = $redact;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$replaceRoot = void 0;\nvar core_1 = require(\"../../core\");\nvar util_1 = require(\"../../util\");\n/**\n * Replaces a document with the specified embedded document or new one.\n * The replacement document can be any valid expression that resolves to a document.\n *\n * https://docs.mongodb.com/manual/reference/operator/aggregation/replaceRoot/\n *\n * @param  {Iterator} collection\n * @param  {Object} expr\n * @param  {Object} options\n * @return {*}\n */\nfunction $replaceRoot(collection, expr, options) {\n    return collection.map(function (obj) {\n        obj = (0, core_1.computeValue)(obj, expr.newRoot, null, options);\n        (0, util_1.assert)((0, util_1.isObject)(obj), \"$replaceRoot expression must return an object\");\n        return obj;\n    });\n}\nexports.$replaceRoot = $replaceRoot;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$replaceWith = void 0;\nvar replaceRoot_1 = require(\"./replaceRoot\");\n/**\n * Alias for $replaceRoot\n */\nexports.$replaceWith = replaceRoot_1.$replaceRoot;\n","\"use strict\";\n// $sample operator -  https://docs.mongodb.com/manual/reference/operator/aggregation/sample/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$sample = void 0;\n/**\n * Randomly selects the specified number of documents from its input. The given iterator must have finite values\n *\n * @param  {Iterator} collection\n * @param  {Object} expr\n * @param  {Options} options\n * @return {*}\n */\nfunction $sample(collection, expr, options) {\n    return collection.transform(function (xs) {\n        var len = xs.length;\n        var i = -1;\n        return function () {\n            if (++i === expr.size)\n                return { done: true };\n            var n = Math.floor(Math.random() * len);\n            return { value: xs[n], done: false };\n        };\n    });\n}\nexports.$sample = $sample;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$set = void 0;\nvar addFields_1 = require(\"./addFields\");\n/**\n * Alias for $addFields.\n */\nexports.$set = addFields_1.$addFields;\n","\"use strict\";\n// $setWindowFields -  https://docs.mongodb.com/manual/reference/operator/aggregation/setWindowFields/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$setWindowFields = void 0;\nvar core_1 = require(\"../../core\");\nvar lazy_1 = require(\"../../lazy\");\nvar util_1 = require(\"../../util\");\nvar dateAdd_1 = require(\"../expression/date/dateAdd\");\nvar addFields_1 = require(\"./addFields\");\nvar group_1 = require(\"./group\");\nvar sort_1 = require(\"./sort\");\n/**\n * Randomly selects the specified number of documents from its input. The given iterator must have finite values\n *\n * @param  {Iterator} collection\n * @param  {Object} expr\n * @param  {Options} options\n * @return {*}\n */\nfunction $setWindowFields(collection, expr, options) {\n    // validate inputs early since this can be an expensive operation.\n    for (var _i = 0, _a = Object.values(expr.output); _i < _a.length; _i++) {\n        var outputExpr = _a[_i];\n        var keys = Object.keys(outputExpr);\n        var op = keys.find(util_1.isOperator);\n        (0, util_1.assert)(!!(0, core_1.getOperator)(core_1.OperatorType.WINDOW, op) ||\n            !!(0, core_1.getOperator)(core_1.OperatorType.ACCUMULATOR, op), \"\".concat(op, \" is not a valid window operator\"));\n        (0, util_1.assert)(keys.length > 0 &&\n            keys.length <= 2 &&\n            (keys.length == 1 || keys.includes(\"window\")), \"$setWindowFields 'output' values should have a single window operator.\");\n        if (outputExpr === null || outputExpr === void 0 ? void 0 : outputExpr.window) {\n            var _b = outputExpr.window, documents = _b.documents, range = _b.range;\n            (0, util_1.assert)((!!documents && !range) ||\n                (!documents && !!range) ||\n                (!documents && !range), \"$setWindowFields 'output.window' option supports only one of 'documents' or 'range'.\");\n        }\n    }\n    // we sort first if required\n    if (expr.sortBy) {\n        collection = (0, sort_1.$sort)(collection, expr.sortBy, options);\n    }\n    // then partition collection\n    if (expr.partitionBy) {\n        collection = (0, group_1.$group)(collection, {\n            _id: expr.partitionBy,\n            items: { $push: \"$$CURRENT\" },\n        }, options);\n    }\n    else {\n        // single partition so we can keep the code uniform\n        collection = (0, lazy_1.Lazy)([\n            {\n                _id: 0,\n                items: collection.value(),\n            },\n        ]);\n    }\n    // transform values\n    return collection.transform(function (partitions) {\n        // let iteratorIndex = 0;\n        var iterators = [];\n        var outputConfig = [];\n        for (var _i = 0, _a = Object.entries(expr.output); _i < _a.length; _i++) {\n            var _b = _a[_i], field = _b[0], outputExpr = _b[1];\n            var operatorName = Object.keys(outputExpr).find(util_1.isOperator);\n            outputConfig.push({\n                operatorName: operatorName,\n                func: {\n                    left: (0, core_1.getOperator)(core_1.OperatorType.ACCUMULATOR, operatorName),\n                    right: (0, core_1.getOperator)(core_1.OperatorType.WINDOW, operatorName),\n                },\n                args: outputExpr[operatorName],\n                field: field,\n                window: outputExpr.window,\n            });\n        }\n        // each parition maintains its own closure to process the documents in the window.\n        partitions.forEach(function (group) {\n            // get the items to process\n            var items = group.items;\n            // create an iterator per group.\n            // we need the index of each document so we track it using a special field.\n            var iterator = (0, lazy_1.Lazy)(items);\n            // results map\n            var windowResultMap = {};\n            var _loop_1 = function (config) {\n                var _a;\n                var func = config.func, args = config.args, field = config.field, window_1 = config.window;\n                var makeResultFunc = function (getItemsFn) {\n                    // closure for object index within the partition\n                    var index = -1;\n                    return function (obj) {\n                        ++index;\n                        // process accumulator function\n                        if (func.left) {\n                            return func.left(getItemsFn(obj, index), args, options);\n                        }\n                        // OR process 'window' function\n                        return func.right(obj, getItemsFn(obj, index), {\n                            parentExpr: expr,\n                            inputExpr: args,\n                            documentNumber: index + 1,\n                            field: field,\n                        }, \n                        // must use raw options only since it operates over a collection.\n                        options);\n                    };\n                };\n                if (window_1) {\n                    var documents_1 = window_1.documents, range = window_1.range, unit_1 = window_1.unit;\n                    var boundary_1 = documents_1 || range;\n                    var begin_1 = boundary_1[0];\n                    var end_1 = boundary_1[1];\n                    if (boundary_1 && (begin_1 != \"unbounded\" || end_1 != \"unbounded\")) {\n                        var toBeginIndex_1 = function (currentIndex) {\n                            if (begin_1 == \"current\")\n                                return currentIndex;\n                            if (begin_1 == \"unbounded\")\n                                return 0;\n                            return Math.max(begin_1 + currentIndex, 0);\n                        };\n                        var toEndIndex_1 = function (currentIndex) {\n                            if (end_1 == \"current\")\n                                return currentIndex + 1;\n                            if (end_1 == \"unbounded\")\n                                return items.length;\n                            return end_1 + currentIndex + 1;\n                        };\n                        var getItems = function (current, index) {\n                            // handle string boundaries or documents\n                            if (!!documents_1 || boundary_1.every(util_1.isString)) {\n                                return items.slice(toBeginIndex_1(index), toEndIndex_1(index));\n                            }\n                            // handle range with numeric boundary values\n                            var sortKey = Object.keys(expr.sortBy)[0];\n                            var lower;\n                            var upper;\n                            if (unit_1) {\n                                // we are dealing with datetimes\n                                var getTime = function (amount) {\n                                    return (0, dateAdd_1.$dateAdd)(current, {\n                                        startDate: new Date(current[sortKey]),\n                                        unit: unit_1,\n                                        amount: amount,\n                                    }).getTime();\n                                };\n                                lower = (0, util_1.isNumber)(begin_1) ? getTime(begin_1) : -Infinity;\n                                upper = (0, util_1.isNumber)(end_1) ? getTime(end_1) : Infinity;\n                            }\n                            else {\n                                var currentValue = current[sortKey];\n                                lower = (0, util_1.isNumber)(begin_1) ? currentValue + begin_1 : -Infinity;\n                                upper = (0, util_1.isNumber)(end_1) ? currentValue + end_1 : Infinity;\n                            }\n                            var array = items;\n                            if (begin_1 == \"current\")\n                                array = items.slice(index);\n                            if (end_1 == \"current\")\n                                array = items.slice(0, index + 1);\n                            // look within the boundary and filter down\n                            return array.filter(function (o) {\n                                var value = o[sortKey];\n                                var n = +value;\n                                return n >= lower && n <= upper;\n                            });\n                        };\n                        windowResultMap[field] = makeResultFunc(getItems);\n                    }\n                }\n                // default action is to utilize the entire set of items\n                if (!windowResultMap[field]) {\n                    windowResultMap[field] = makeResultFunc(function (_) { return items; });\n                }\n                // invoke add fields to get the desired behaviour using a custom function.\n                iterator = (0, addFields_1.$addFields)(iterator, (_a = {},\n                    _a[field] = {\n                        $function: {\n                            body: function (obj) { return windowResultMap[field](obj); },\n                            args: [\"$$CURRENT\"],\n                        },\n                    },\n                    _a), options);\n            };\n            for (var _i = 0, outputConfig_1 = outputConfig; _i < outputConfig_1.length; _i++) {\n                var config = outputConfig_1[_i];\n                _loop_1(config);\n            }\n            // add to iterator list\n            iterators.push(iterator);\n        });\n        return lazy_1.compose.apply(void 0, iterators);\n    });\n}\nexports.$setWindowFields = $setWindowFields;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$skip = void 0;\n/**\n * Skips over a specified number of documents from the pipeline and returns the rest.\n *\n * @param collection An iterator\n * @param expr\n * @param  {Options} options\n * @returns {*}\n */\nfunction $skip(collection, expr, options) {\n    return collection.drop(expr);\n}\nexports.$skip = $skip;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$sort = void 0;\nvar util_1 = require(\"../../util\");\n/**\n * Takes all input documents and returns them in a stream of sorted documents.\n *\n * @param collection\n * @param sortKeys\n * @param  {Object} options\n * @returns {*}\n */\nfunction $sort(collection, sortKeys, options) {\n    if ((0, util_1.isEmpty)(sortKeys) || !(0, util_1.isObject)(sortKeys))\n        return collection;\n    var cmp = util_1.DEFAULT_COMPARATOR;\n    // check for collation spec on the options\n    var collationSpec = options.collation;\n    // use collation comparator if provided\n    if ((0, util_1.isObject)(collationSpec) && (0, util_1.isString)(collationSpec.locale)) {\n        cmp = collationComparator(collationSpec);\n    }\n    return collection.transform(function (coll) {\n        var modifiers = Object.keys(sortKeys);\n        var _loop_1 = function (key) {\n            var grouped = (0, util_1.groupBy)(coll, function (obj) { return (0, util_1.resolve)(obj, key); }, options === null || options === void 0 ? void 0 : options.hashFunction);\n            var sortedIndex = {};\n            var indexKeys = (0, util_1.sortBy)(grouped.keys, function (k, i) {\n                sortedIndex[k] = i;\n                return k;\n            }, cmp);\n            if (sortKeys[key] === -1)\n                indexKeys.reverse();\n            coll = [];\n            for (var _b = 0, indexKeys_1 = indexKeys; _b < indexKeys_1.length; _b++) {\n                var k = indexKeys_1[_b];\n                (0, util_1.into)(coll, grouped.groups[sortedIndex[k]]);\n            }\n        };\n        for (var _i = 0, _a = modifiers.reverse(); _i < _a.length; _i++) {\n            var key = _a[_i];\n            _loop_1(key);\n        }\n        return coll;\n    });\n}\nexports.$sort = $sort;\n// MongoDB collation strength to JS localeCompare sensitivity mapping.\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/localeCompare\nvar COLLATION_STRENGTH = {\n    // Only strings that differ in base letters compare as unequal. Examples: a ≠ b, a = á, a = A.\n    1: \"base\",\n    //  Only strings that differ in base letters or accents and other diacritic marks compare as unequal.\n    // Examples: a ≠ b, a ≠ á, a = A.\n    2: \"accent\",\n    // Strings that differ in base letters, accents and other diacritic marks, or case compare as unequal.\n    // Other differences may also be taken into consideration. Examples: a ≠ b, a ≠ á, a ≠ A\n    3: \"variant\",\n    // case - Only strings that differ in base letters or case compare as unequal. Examples: a ≠ b, a = á, a ≠ A.\n};\n/**\n * Creates a comparator function for the given collation spec. See https://docs.mongodb.com/manual/reference/collation/\n *\n * @param spec {Object} The MongoDB collation spec.\n * {\n *   locale: string,\n *   caseLevel: boolean,\n *   caseFirst: string,\n *   strength: int,\n *   numericOrdering: boolean,\n *   alternate: string,\n *   maxVariable: string, // unsupported\n *   backwards: boolean // unsupported\n * }\n */\nfunction collationComparator(spec) {\n    var localeOpt = {\n        sensitivity: COLLATION_STRENGTH[spec.strength || 3],\n        caseFirst: spec.caseFirst === \"off\" ? \"false\" : spec.caseFirst || \"false\",\n        numeric: spec.numericOrdering || false,\n        ignorePunctuation: spec.alternate === \"shifted\",\n    };\n    // when caseLevel is true for strength  1:base and 2:accent, bump sensitivity to the nearest that supports case comparison\n    if ((spec.caseLevel || false) === true) {\n        if (localeOpt.sensitivity === \"base\")\n            localeOpt.sensitivity = \"case\";\n        if (localeOpt.sensitivity === \"accent\")\n            localeOpt.sensitivity = \"variant\";\n    }\n    var collator = new Intl.Collator(spec.locale, localeOpt);\n    return function (a, b) {\n        // non strings\n        if (!(0, util_1.isString)(a) || !(0, util_1.isString)(b))\n            return (0, util_1.DEFAULT_COMPARATOR)(a, b);\n        // only for strings\n        var i = collator.compare(a, b);\n        if (i < 0)\n            return -1;\n        if (i > 0)\n            return 1;\n        return 0;\n    };\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$sortByCount = void 0;\nvar group_1 = require(\"./group\");\nvar sort_1 = require(\"./sort\");\n/**\n * Groups incoming documents based on the value of a specified expression,\n * then computes the count of documents in each distinct group.\n *\n * https://docs.mongodb.com/manual/reference/operator/aggregation/sortByCount/\n *\n * @param  {Array} collection\n * @param  {Object} expr\n * @param  {Object} options\n * @return {*}\n */\nfunction $sortByCount(collection, expr, options) {\n    var newExpr = { count: { $sum: 1 } };\n    newExpr[\"_id\"] = expr;\n    return (0, sort_1.$sort)((0, group_1.$group)(collection, newExpr, options), { count: -1 }, options);\n}\nexports.$sortByCount = $sortByCount;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$unionWith = void 0;\nvar aggregator_1 = require(\"../../aggregator\");\nvar lazy_1 = require(\"../../lazy\");\nvar util_1 = require(\"../../util\");\n/**\n * Performs a union of two collections.\n *\n * @param collection\n * @param expr\n * @param opt\n */\nfunction $unionWith(collection, expr, options) {\n    var array = (0, util_1.isString)(expr.coll)\n        ? options === null || options === void 0 ? void 0 : options.collectionResolver(expr.coll)\n        : expr.coll;\n    var iterators = [collection];\n    iterators.push(expr.pipeline\n        ? new aggregator_1.Aggregator(expr.pipeline, options).stream(array)\n        : (0, lazy_1.Lazy)(array));\n    return lazy_1.compose.apply(void 0, iterators);\n}\nexports.$unionWith = $unionWith;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$unset = void 0;\nvar util_1 = require(\"../../util\");\nvar project_1 = require(\"./project\");\n/**\n * Removes/excludes fields from documents.\n *\n * @param collection\n * @param expr\n * @param options\n * @returns {Iterator}\n */\nfunction $unset(collection, expr, options) {\n    expr = (0, util_1.ensureArray)(expr);\n    var doc = {};\n    for (var _i = 0, expr_1 = expr; _i < expr_1.length; _i++) {\n        var k = expr_1[_i];\n        doc[k] = 0;\n    }\n    return (0, project_1.$project)(collection, doc, options);\n}\nexports.$unset = $unset;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$unwind = void 0;\nvar lazy_1 = require(\"../../lazy\");\nvar util_1 = require(\"../../util\");\n/**\n * Takes an array of documents and returns them as a stream of documents.\n *\n * @param collection\n * @param expr\n * @param options\n * @returns {Array}\n */\nfunction $unwind(collection, expr, options) {\n    if ((0, util_1.isString)(expr))\n        expr = { path: expr };\n    var path = expr.path;\n    var field = path.substr(1);\n    var includeArrayIndex = (expr === null || expr === void 0 ? void 0 : expr.includeArrayIndex) || false;\n    var preserveNullAndEmptyArrays = expr.preserveNullAndEmptyArrays || false;\n    var format = function (o, i) {\n        if (includeArrayIndex !== false)\n            o[includeArrayIndex] = i;\n        return o;\n    };\n    var value;\n    return (0, lazy_1.Lazy)(function () {\n        var _loop_1 = function () {\n            // take from lazy sequence if available\n            if (value instanceof lazy_1.Iterator) {\n                var tmp = value.next();\n                if (!tmp.done)\n                    return { value: tmp };\n            }\n            // fetch next object\n            var wrapper = collection.next();\n            if (wrapper.done)\n                return { value: wrapper };\n            // unwrap value\n            var obj = wrapper.value;\n            // get the value of the field to unwind\n            value = (0, util_1.resolve)(obj, field);\n            // throw error if value is not an array???\n            if (value instanceof Array) {\n                if (value.length === 0 && preserveNullAndEmptyArrays === true) {\n                    value = null; // reset unwind value\n                    (0, util_1.removeValue)(obj, field);\n                    return { value: { value: format(obj, null), done: false } };\n                }\n                else {\n                    // construct a lazy sequence for elements per value\n                    value = (0, lazy_1.Lazy)(value).map(function (item, i) {\n                        var newObj = (0, util_1.resolveGraph)(obj, field, {\n                            preserveKeys: true,\n                        });\n                        (0, util_1.setValue)(newObj, field, item);\n                        return format(newObj, i);\n                    });\n                }\n            }\n            else if (!(0, util_1.isEmpty)(value) || preserveNullAndEmptyArrays === true) {\n                return { value: { value: format(obj, null), done: false } };\n            }\n        };\n        for (;;) {\n            var state_1 = _loop_1();\n            if (typeof state_1 === \"object\")\n                return state_1.value;\n        }\n    });\n}\nexports.$unwind = $unwind;\n","\"use strict\";\n// Query Array Operators: https://docs.mongodb.com/manual/reference/operator/query-array/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$all = void 0;\nvar _predicates_1 = require(\"../../_predicates\");\n/**\n * Matches arrays that contain all elements specified in the query.\n */\nexports.$all = (0, _predicates_1.createQueryOperator)(_predicates_1.$all);\n","\"use strict\";\n// Query Array Operators: https://docs.mongodb.com/manual/reference/operator/query-array/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$elemMatch = void 0;\nvar _predicates_1 = require(\"../../_predicates\");\n/**\n * Selects documents if element in the array field matches all the specified $elemMatch conditions.\n */\nexports.$elemMatch = (0, _predicates_1.createQueryOperator)(_predicates_1.$elemMatch);\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./all\"), exports);\n__exportStar(require(\"./elemMatch\"), exports);\n__exportStar(require(\"./size\"), exports);\n","\"use strict\";\n// Query Array Operators: https://docs.mongodb.com/manual/reference/operator/query-array/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$size = void 0;\nvar _predicates_1 = require(\"../../_predicates\");\n/**\n * Selects documents if the array field is a specified size.\n */\nexports.$size = (0, _predicates_1.createQueryOperator)(_predicates_1.$size);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createBitwiseOperator = void 0;\nvar _predicates_1 = require(\"../../_predicates\");\nvar createBitwiseOperator = function (predicate) {\n    return (0, _predicates_1.createQueryOperator)(function (value, mask, options) {\n        var b = 0;\n        if (mask instanceof Array) {\n            for (var _i = 0, mask_1 = mask; _i < mask_1.length; _i++) {\n                var n = mask_1[_i];\n                b = b | (1 << n);\n            }\n        }\n        else {\n            b = mask;\n        }\n        return predicate(value & b, b);\n    });\n};\nexports.createBitwiseOperator = createBitwiseOperator;\n","\"use strict\";\n// Query Bitwise Operators: https://docs.mongodb.com/manual/reference/operator/query-bitwise/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$bitsAllClear = void 0;\nvar _internal_1 = require(\"./_internal\");\n/**\n * Matches numeric or binary values in which a set of bit positions all have a value of 0.\n */\nexports.$bitsAllClear = (0, _internal_1.createBitwiseOperator)(function (result, _) { return result == 0; });\n","\"use strict\";\n// Query Bitwise Operators: https://docs.mongodb.com/manual/reference/operator/query-bitwise/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$bitsAllSet = void 0;\nvar _internal_1 = require(\"./_internal\");\n/**\n * Matches numeric or binary values in which a set of bit positions all have a value of 1.\n */\nexports.$bitsAllSet = (0, _internal_1.createBitwiseOperator)(function (result, mask) { return result == mask; });\n","\"use strict\";\n// Query Bitwise Operators: https://docs.mongodb.com/manual/reference/operator/query-bitwise/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$bitsAnyClear = void 0;\nvar _internal_1 = require(\"./_internal\");\n/**\n * Matches numeric or binary values in which any bit from a set of bit positions has a value of 0.\n */\nexports.$bitsAnyClear = (0, _internal_1.createBitwiseOperator)(function (result, mask) { return result < mask; });\n","\"use strict\";\n// Query Bitwise Operators: https://docs.mongodb.com/manual/reference/operator/query-bitwise/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$bitsAnySet = void 0;\nvar _internal_1 = require(\"./_internal\");\n/**\n * Matches numeric or binary values in which any bit from a set of bit positions has a value of 1.\n */\nexports.$bitsAnySet = (0, _internal_1.createBitwiseOperator)(function (result, _) { return result > 0; });\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$bitsAnySet = exports.$bitsAnyClear = exports.$bitsAllSet = exports.$bitsAllClear = void 0;\nvar bitsAllClear_1 = require(\"./bitsAllClear\");\nObject.defineProperty(exports, \"$bitsAllClear\", { enumerable: true, get: function () { return bitsAllClear_1.$bitsAllClear; } });\nvar bitsAllSet_1 = require(\"./bitsAllSet\");\nObject.defineProperty(exports, \"$bitsAllSet\", { enumerable: true, get: function () { return bitsAllSet_1.$bitsAllSet; } });\nvar bitsAnyClear_1 = require(\"./bitsAnyClear\");\nObject.defineProperty(exports, \"$bitsAnyClear\", { enumerable: true, get: function () { return bitsAnyClear_1.$bitsAnyClear; } });\nvar bitsAnySet_1 = require(\"./bitsAnySet\");\nObject.defineProperty(exports, \"$bitsAnySet\", { enumerable: true, get: function () { return bitsAnySet_1.$bitsAnySet; } });\n","\"use strict\";\n// Query Comparison Operators: https://docs.mongodb.com/manual/reference/operator/query-comparison/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$eq = void 0;\nvar _predicates_1 = require(\"../../_predicates\");\n/**\n * Matches values that are equal to a specified value.\n */\nexports.$eq = (0, _predicates_1.createQueryOperator)(_predicates_1.$eq);\n","\"use strict\";\n// Query Comparison Operators: https://docs.mongodb.com/manual/reference/operator/query-comparison/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$gt = void 0;\nvar _predicates_1 = require(\"../../_predicates\");\n/**\n * Matches values that are greater than a specified value.\n */\nexports.$gt = (0, _predicates_1.createQueryOperator)(_predicates_1.$gt);\n","\"use strict\";\n// Query Comparison Operators: https://docs.mongodb.com/manual/reference/operator/query-comparison/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$gte = void 0;\nvar _predicates_1 = require(\"../../_predicates\");\n/**\n * \tMatches values that are greater than or equal to a specified value.\n */\nexports.$gte = (0, _predicates_1.createQueryOperator)(_predicates_1.$gte);\n","\"use strict\";\n// Query Comparison Operators: https://docs.mongodb.com/manual/reference/operator/query-comparison/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$in = void 0;\nvar _predicates_1 = require(\"../../_predicates\");\n/**\n * Matches any of the values that exist in an array specified in the query.\n */\nexports.$in = (0, _predicates_1.createQueryOperator)(_predicates_1.$in);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$nin = exports.$ne = exports.$lte = exports.$lt = exports.$in = exports.$gte = exports.$gt = exports.$eq = void 0;\nvar eq_1 = require(\"./eq\");\nObject.defineProperty(exports, \"$eq\", { enumerable: true, get: function () { return eq_1.$eq; } });\nvar gt_1 = require(\"./gt\");\nObject.defineProperty(exports, \"$gt\", { enumerable: true, get: function () { return gt_1.$gt; } });\nvar gte_1 = require(\"./gte\");\nObject.defineProperty(exports, \"$gte\", { enumerable: true, get: function () { return gte_1.$gte; } });\nvar in_1 = require(\"./in\");\nObject.defineProperty(exports, \"$in\", { enumerable: true, get: function () { return in_1.$in; } });\nvar lt_1 = require(\"./lt\");\nObject.defineProperty(exports, \"$lt\", { enumerable: true, get: function () { return lt_1.$lt; } });\nvar lte_1 = require(\"./lte\");\nObject.defineProperty(exports, \"$lte\", { enumerable: true, get: function () { return lte_1.$lte; } });\nvar ne_1 = require(\"./ne\");\nObject.defineProperty(exports, \"$ne\", { enumerable: true, get: function () { return ne_1.$ne; } });\nvar nin_1 = require(\"./nin\");\nObject.defineProperty(exports, \"$nin\", { enumerable: true, get: function () { return nin_1.$nin; } });\n","\"use strict\";\n// Query Comparison Operators: https://docs.mongodb.com/manual/reference/operator/query-comparison/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$lt = void 0;\nvar _predicates_1 = require(\"../../_predicates\");\n/**\n * Matches values that are less than the value specified in the query.\n */\nexports.$lt = (0, _predicates_1.createQueryOperator)(_predicates_1.$lt);\n","\"use strict\";\n// Query Comparison Operators: https://docs.mongodb.com/manual/reference/operator/query-comparison/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$lte = void 0;\nvar _predicates_1 = require(\"../../_predicates\");\n/**\n * Matches values that are less than or equal to the value specified in the query.\n */\nexports.$lte = (0, _predicates_1.createQueryOperator)(_predicates_1.$lte);\n","\"use strict\";\n// Query Comparison Operators: https://docs.mongodb.com/manual/reference/operator/query-comparison/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$ne = void 0;\nvar _predicates_1 = require(\"../../_predicates\");\n/**\n * Matches all values that are not equal to the value specified in the query.\n */\nexports.$ne = (0, _predicates_1.createQueryOperator)(_predicates_1.$ne);\n","\"use strict\";\n// Query Comparison Operators: https://docs.mongodb.com/manual/reference/operator/query-comparison/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$nin = void 0;\nvar _predicates_1 = require(\"../../_predicates\");\n/**\n * Matches values that do not exist in an array specified to the query.\n */\nexports.$nin = (0, _predicates_1.createQueryOperator)(_predicates_1.$nin);\n","\"use strict\";\n// Query Element Operators: https://docs.mongodb.com/manual/reference/operator/query-element/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$exists = void 0;\nvar _predicates_1 = require(\"../../_predicates\");\n/**\n * Matches documents that have the specified field.\n */\nexports.$exists = (0, _predicates_1.createQueryOperator)(_predicates_1.$exists);\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./exists\"), exports);\n__exportStar(require(\"./type\"), exports);\n","\"use strict\";\n// Query Element Operators: https://docs.mongodb.com/manual/reference/operator/query-element/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$type = void 0;\nvar _predicates_1 = require(\"../../_predicates\");\n/**\n * Selects documents if a field is of the specified type.\n */\nexports.$type = (0, _predicates_1.createQueryOperator)(_predicates_1.$type);\n","\"use strict\";\n// Query Evaluation Operators: https://docs.mongodb.com/manual/reference/operator/query-evaluation/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$expr = void 0;\nvar core_1 = require(\"../../../core\");\n/**\n * Allows the use of aggregation expressions within the query language.\n *\n * @param selector\n * @param value\n * @returns {Function}\n */\nfunction $expr(selector, value, options) {\n    return function (obj) { return (0, core_1.computeValue)(obj, value, null, options); };\n}\nexports.$expr = $expr;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./expr\"), exports);\n__exportStar(require(\"./jsonSchema\"), exports);\n__exportStar(require(\"./mod\"), exports);\n__exportStar(require(\"./regex\"), exports);\n__exportStar(require(\"./where\"), exports);\n","\"use strict\";\n// Query Evaluation Operators: https://docs.mongodb.com/manual/reference/operator/query-evaluation/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$jsonSchema = void 0;\n/**\n * Validate documents against the given JSON Schema.\n *\n * @param selector\n * @param schema\n * @returns {Function}\n */\nfunction $jsonSchema(selector, schema, options) {\n    if (!(options === null || options === void 0 ? void 0 : options.jsonSchemaValidator)) {\n        throw new Error(\"Missing option 'jsonSchemaValidator'. Configure to use '$jsonSchema' operator.\");\n    }\n    var validate = options === null || options === void 0 ? void 0 : options.jsonSchemaValidator(schema);\n    return function (obj) { return validate(obj); };\n}\nexports.$jsonSchema = $jsonSchema;\n","\"use strict\";\n// Query Evaluation Operators: https://docs.mongodb.com/manual/reference/operator/query-evaluation/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$mod = void 0;\nvar _predicates_1 = require(\"../../_predicates\");\n/**\n * Performs a modulo operation on the value of a field and selects documents with a specified result.\n */\nexports.$mod = (0, _predicates_1.createQueryOperator)(_predicates_1.$mod);\n","\"use strict\";\n// Query Evaluation Operators: https://docs.mongodb.com/manual/reference/operator/query-evaluation/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$regex = void 0;\nvar _predicates_1 = require(\"../../_predicates\");\n/**\n * Selects documents where values match a specified regular expression.\n */\nexports.$regex = (0, _predicates_1.createQueryOperator)(_predicates_1.$regex);\n","\"use strict\";\n// Query Evaluation Operators: https://docs.mongodb.com/manual/reference/operator/query-evaluation/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$where = void 0;\nvar util_1 = require(\"../../../util\");\n/* eslint-disable */\n/**\n * Matches documents that satisfy a JavaScript expression.\n *\n * @param selector\n * @param value\n * @returns {Function}\n */\nfunction $where(selector, value, options) {\n    (0, util_1.assert)(options.scriptEnabled, \"$where operator requires 'scriptEnabled' option to be true\");\n    var f = value;\n    (0, util_1.assert)((0, util_1.isFunction)(f), \"$where only accepts a Function object\");\n    return function (obj) { return f.call(obj) === true; };\n}\nexports.$where = $where;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./array\"), exports);\n__exportStar(require(\"./bitwise\"), exports);\n__exportStar(require(\"./comparison\"), exports);\n__exportStar(require(\"./element\"), exports);\n__exportStar(require(\"./evaluation\"), exports);\n__exportStar(require(\"./logical\"), exports);\n","\"use strict\";\n// Query Logical Operators: https://docs.mongodb.com/manual/reference/operator/query-logical/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$and = void 0;\nvar query_1 = require(\"../../../query\");\nvar util_1 = require(\"../../../util\");\n/**\n * Joins query clauses with a logical AND returns all documents that match the conditions of both clauses.\n *\n * @param selector\n * @param value\n * @returns {Function}\n */\nfunction $and(selector, value, options) {\n    (0, util_1.assert)((0, util_1.isArray)(value), \"Invalid expression: $and expects value to be an Array\");\n    var queries = new Array();\n    value.forEach(function (expr) { return queries.push(new query_1.Query(expr, options)); });\n    return function (obj) {\n        for (var i = 0; i < queries.length; i++) {\n            if (!queries[i].test(obj)) {\n                return false;\n            }\n        }\n        return true;\n    };\n}\nexports.$and = $and;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./and\"), exports);\n__exportStar(require(\"./nor\"), exports);\n__exportStar(require(\"./not\"), exports);\n__exportStar(require(\"./or\"), exports);\n","\"use strict\";\n// Query Logical Operators: https://docs.mongodb.com/manual/reference/operator/query-logical/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$nor = void 0;\nvar util_1 = require(\"../../../util\");\nvar or_1 = require(\"./or\");\n/**\n * Joins query clauses with a logical NOR returns all documents that fail to match both clauses.\n *\n * @param selector\n * @param value\n * @returns {Function}\n */\nfunction $nor(selector, value, options) {\n    (0, util_1.assert)((0, util_1.isArray)(value), \"Invalid expression. $nor expects value to be an Array\");\n    var f = (0, or_1.$or)(\"$or\", value, options);\n    return function (obj) { return !f(obj); };\n}\nexports.$nor = $nor;\n","\"use strict\";\n// Query Logical Operators: https://docs.mongodb.com/manual/reference/operator/query-logical/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$not = void 0;\nvar query_1 = require(\"../../../query\");\nvar util_1 = require(\"../../../util\");\n/**\n * Inverts the effect of a query expression and returns documents that do not match the query expression.\n *\n * @param selector\n * @param value\n * @returns {Function}\n */\nfunction $not(selector, value, options) {\n    var criteria = {};\n    criteria[selector] = (0, util_1.normalize)(value);\n    var query = new query_1.Query(criteria, options);\n    return function (obj) { return !query.test(obj); };\n}\nexports.$not = $not;\n","\"use strict\";\n// Query Logical Operators: https://docs.mongodb.com/manual/reference/operator/query-logical/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$or = void 0;\nvar query_1 = require(\"../../../query\");\nvar util_1 = require(\"../../../util\");\n/**\n * Joins query clauses with a logical OR returns all documents that match the conditions of either clause.\n *\n * @param selector\n * @param value\n * @returns {Function}\n */\nfunction $or(selector, value, options) {\n    (0, util_1.assert)((0, util_1.isArray)(value), \"Invalid expression. $or expects value to be an Array\");\n    var queries = value.map(function (expr) { return new query_1.Query(expr, options); });\n    return function (obj) {\n        for (var i = 0; i < queries.length; i++) {\n            if (queries[i].test(obj)) {\n                return true;\n            }\n        }\n        return false;\n    };\n}\nexports.$or = $or;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Query = void 0;\nvar core_1 = require(\"./core\");\nvar cursor_1 = require(\"./cursor\");\nvar util_1 = require(\"./util\");\n/**\n * An object used to filter input documents\n *\n * @param {Object} criteria The criteria for constructing predicates\n * @param {Options} options Options for use by operators\n * @constructor\n */\nvar Query = /** @class */ (function () {\n    function Query(criteria, options) {\n        this.criteria = criteria;\n        this.options = options;\n        this.options = (0, core_1.initOptions)(options);\n        this.compiled = [];\n        this.compile();\n    }\n    Query.prototype.compile = function () {\n        (0, util_1.assert)((0, util_1.isObject)(this.criteria), \"query criteria must be an object\");\n        var whereOperator;\n        for (var _i = 0, _a = Object.entries(this.criteria); _i < _a.length; _i++) {\n            var _b = _a[_i], field = _b[0], expr = _b[1];\n            if (\"$where\" === field) {\n                whereOperator = { field: field, expr: expr };\n            }\n            else if ((0, util_1.inArray)([\"$and\", \"$or\", \"$nor\", \"$expr\", \"$jsonSchema\"], field)) {\n                this.processOperator(field, field, expr);\n            }\n            else {\n                // normalize expression\n                (0, util_1.assert)(!(0, util_1.isOperator)(field), \"unknown top level operator: \".concat(field));\n                for (var _c = 0, _d = Object.entries((0, util_1.normalize)(expr)); _c < _d.length; _c++) {\n                    var _e = _d[_c], operator = _e[0], val = _e[1];\n                    this.processOperator(field, operator, val);\n                }\n            }\n            if ((0, util_1.isObject)(whereOperator)) {\n                this.processOperator(whereOperator.field, whereOperator.field, whereOperator.expr);\n            }\n        }\n    };\n    Query.prototype.processOperator = function (field, operator, value) {\n        var call = (0, core_1.getOperator)(core_1.OperatorType.QUERY, operator);\n        (0, util_1.assert)(!!call, \"unknown operator \".concat(operator));\n        var fn = call(field, value, this.options);\n        this.compiled.push(fn);\n    };\n    /**\n     * Checks if the object passes the query criteria. Returns true if so, false otherwise.\n     *\n     * @param obj The object to test\n     * @returns {boolean} True or false\n     */\n    Query.prototype.test = function (obj) {\n        for (var i = 0, len = this.compiled.length; i < len; i++) {\n            if (!this.compiled[i](obj)) {\n                return false;\n            }\n        }\n        return true;\n    };\n    /**\n     * Returns a cursor to select matching documents from the input source.\n     *\n     * @param source A source providing a sequence of documents\n     * @param projection An optional projection criteria\n     * @returns {Cursor} A Cursor for iterating over the results\n     */\n    Query.prototype.find = function (collection, projection) {\n        var _this = this;\n        return new cursor_1.Cursor(collection, function (x) { return _this.test(x); }, projection || {}, this.options);\n    };\n    /**\n     * Remove matched documents from the collection returning the remainder\n     *\n     * @param collection An array of documents\n     * @returns {Array} A new array with matching elements removed\n     */\n    Query.prototype.remove = function (collection) {\n        var _this = this;\n        return collection.reduce(function (acc, obj) {\n            if (!_this.test(obj))\n                acc.push(obj);\n            return acc;\n        }, []);\n    };\n    return Query;\n}());\nexports.Query = Query;\n","\"use strict\";\n/**\n * Utility constants and functions\n */\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.normalize = exports.isOperator = exports.removeValue = exports.setValue = exports.filterMissing = exports.resolveGraph = exports.resolve = exports.memoize = exports.into = exports.groupBy = exports.sortBy = exports.hashCode = exports.stringify = exports.unique = exports.isEqual = exports.flatten = exports.intersection = exports.merge = exports.objectMap = exports.has = exports.ensureArray = exports.isMissing = exports.isEmpty = exports.truthy = exports.notInArray = exports.inArray = exports.isNil = exports.isFunction = exports.isRegExp = exports.isDate = exports.isObjectLike = exports.isObject = exports.isArray = exports.isNumber = exports.isString = exports.isBoolean = exports.getType = exports.cloneDeep = exports.assert = exports.DEFAULT_COMPARATOR = exports.MIN_LONG = exports.MAX_LONG = exports.MIN_INT = exports.MAX_INT = void 0;\nexports.MAX_INT = 2147483647;\nexports.MIN_INT = -2147483648;\nexports.MAX_LONG = Number.MAX_SAFE_INTEGER;\nexports.MIN_LONG = Number.MIN_SAFE_INTEGER;\n// special value to identify missing items. treated differently from undefined\nvar MISSING = Symbol(\"missing\");\n/**\n * Uses the simple hash method as described in Effective Java.\n * @see https://stackoverflow.com/a/113600/1370481\n * @param value The value to hash\n * @returns {number}\n */\nvar DEFAULT_HASH_FUNCTION = function (value) {\n    var s = stringify(value);\n    var hash = 0;\n    var i = s.length;\n    while (i)\n        hash = ((hash << 5) - hash) ^ s.charCodeAt(--i);\n    return hash >>> 0;\n};\n// no array, object, or function types\nvar JS_SIMPLE_TYPES = new Set([\n    \"null\",\n    \"undefined\",\n    \"boolean\",\n    \"number\",\n    \"string\",\n    \"date\",\n    \"regexp\",\n]);\n/** MongoDB sort comparison order. https://www.mongodb.com/docs/manual/reference/bson-type-comparison-order */\nvar SORT_ORDER_BY_TYPE = {\n    null: 0,\n    undefined: 0,\n    number: 1,\n    string: 2,\n    object: 3,\n    array: 4,\n    boolean: 5,\n    date: 6,\n    regexp: 7,\n    function: 8,\n};\n/**\n * Compare function which adheres to MongoDB comparison order.\n *\n * @param a The first value\n * @param b The second value\n * @returns {Number}\n */\nvar DEFAULT_COMPARATOR = function (a, b) {\n    if (a === MISSING)\n        a = undefined;\n    if (b === MISSING)\n        b = undefined;\n    var u = SORT_ORDER_BY_TYPE[getType(a).toLowerCase()];\n    var v = SORT_ORDER_BY_TYPE[getType(b).toLowerCase()];\n    if (u !== v)\n        return u - v;\n    if (a < b)\n        return -1;\n    if (a > b)\n        return 1;\n    return 0;\n};\nexports.DEFAULT_COMPARATOR = DEFAULT_COMPARATOR;\nvar OBJECT_PROTOTYPE = Object.getPrototypeOf({});\nvar OBJECT_TAG = \"[object Object]\";\nvar OBJECT_TYPE_RE = /^\\[object ([a-zA-Z0-9]+)\\]$/;\nfunction assert(condition, message) {\n    if (!condition)\n        throw new Error(message);\n}\nexports.assert = assert;\n/**\n * Deep clone an object\n */\nfunction cloneDeep(obj) {\n    if (obj instanceof Array)\n        return obj.map(cloneDeep);\n    if (obj instanceof Date)\n        return new Date(obj);\n    if (isObject(obj))\n        return objectMap(obj, cloneDeep);\n    return obj;\n}\nexports.cloneDeep = cloneDeep;\n/**\n * Returns the name of type as specified in the tag returned by a call to Object.prototype.toString\n * @param v A value\n */\nfunction getType(v) {\n    return OBJECT_TYPE_RE.exec(Object.prototype.toString.call(v))[1];\n}\nexports.getType = getType;\nfunction isBoolean(v) {\n    return typeof v === \"boolean\";\n}\nexports.isBoolean = isBoolean;\nfunction isString(v) {\n    return typeof v === \"string\";\n}\nexports.isString = isString;\nfunction isNumber(v) {\n    return !isNaN(v) && typeof v === \"number\";\n}\nexports.isNumber = isNumber;\nexports.isArray = Array.isArray;\nfunction isObject(v) {\n    if (!v)\n        return false;\n    var proto = Object.getPrototypeOf(v);\n    return ((proto === OBJECT_PROTOTYPE || proto === null) &&\n        OBJECT_TAG === Object.prototype.toString.call(v));\n}\nexports.isObject = isObject;\nfunction isObjectLike(v) {\n    return v === Object(v);\n} // objects, arrays, functions, date, custom object\nexports.isObjectLike = isObjectLike;\nfunction isDate(v) {\n    return v instanceof Date;\n}\nexports.isDate = isDate;\nfunction isRegExp(v) {\n    return v instanceof RegExp;\n}\nexports.isRegExp = isRegExp;\nfunction isFunction(v) {\n    return typeof v === \"function\";\n}\nexports.isFunction = isFunction;\nfunction isNil(v) {\n    return v === null || v === undefined;\n}\nexports.isNil = isNil;\nfunction inArray(arr, item) {\n    return arr.includes(item);\n}\nexports.inArray = inArray;\nfunction notInArray(arr, item) {\n    return !inArray(arr, item);\n}\nexports.notInArray = notInArray;\nfunction truthy(arg) {\n    return !!arg;\n}\nexports.truthy = truthy;\nfunction isEmpty(x) {\n    return (isNil(x) ||\n        (isString(x) && !x) ||\n        (x instanceof Array && x.length === 0) ||\n        (isObject(x) && Object.keys(x).length === 0));\n}\nexports.isEmpty = isEmpty;\nfunction isMissing(m) {\n    return m === MISSING;\n}\nexports.isMissing = isMissing;\n// ensure a value is an array or wrapped within one\nfunction ensureArray(x) {\n    return x instanceof Array ? x : [x];\n}\nexports.ensureArray = ensureArray;\nfunction has(obj, prop) {\n    return !!obj && Object.prototype.hasOwnProperty.call(obj, prop);\n}\nexports.has = has;\n/**\n * Transform values in an object\n *\n * @param  {Object}   obj   An object whose values to transform\n * @param  {Function} fn The transform function\n * @return {Array|Object} Result object after applying the transform\n */\nfunction objectMap(obj, fn) {\n    var o = {};\n    var objKeys = Object.keys(obj);\n    for (var i = 0; i < objKeys.length; i++) {\n        var k = objKeys[i];\n        o[k] = fn(obj[k], k);\n    }\n    return o;\n}\nexports.objectMap = objectMap;\n/**\n * Deep merge objects or arrays.\n * When the inputs have unmergeable types, the source value (right hand side) is returned.\n * If inputs are arrays of same length and all elements are mergable, elements in the same position are merged together.\n * If AnyVal of the elements are unmergeable, elements in the source are appended to the target.\n * @param target {Object|Array} the target to merge into\n * @param obj {Object|Array} the source object\n */\nfunction merge(target, obj, options) {\n    // take care of missing inputs\n    if (isMissing(target))\n        return obj;\n    if (isMissing(obj))\n        return target;\n    var inputs = [target, obj];\n    if (!(inputs.every(isObject) || inputs.every(exports.isArray))) {\n        throw Error(\"mismatched types. must both be array or object\");\n    }\n    // default options\n    options = options || { flatten: false };\n    if ((0, exports.isArray)(target)) {\n        var result = target;\n        var input = obj;\n        if (options.flatten) {\n            var i = 0;\n            var j = 0;\n            while (i < result.length && j < input.length) {\n                result[i] = merge(result[i++], input[j++], options);\n            }\n            while (j < input.length) {\n                result.push(obj[j++]);\n            }\n        }\n        else {\n            into(result, input);\n        }\n    }\n    else {\n        Object.keys(obj).forEach(function (k) {\n            if (has(obj, k)) {\n                if (has(target, k)) {\n                    target[k] = merge(target[k], obj[k], options);\n                }\n                else {\n                    target[k] = obj[k];\n                }\n            }\n        });\n    }\n    return target;\n}\nexports.merge = merge;\nfunction addIndex(root, key, index) {\n    if (root.key < key) {\n        if (root.right) {\n            addIndex(root.right, key, index);\n        }\n        else {\n            root.right = { key: key, indexes: [index] };\n        }\n    }\n    else if (root.key > key) {\n        if (root.left) {\n            addIndex(root.left, key, index);\n        }\n        else {\n            root.left = { key: key, indexes: [index] };\n        }\n    }\n    else {\n        root.indexes.push(index);\n    }\n}\nfunction getIndexes(root, key) {\n    if (root.key == key) {\n        return root.indexes;\n    }\n    else if (root.key < key) {\n        return root.right ? getIndexes(root.right, key) : undefined;\n    }\n    else if (root.key > key) {\n        return root.left ? getIndexes(root.left, key) : undefined;\n    }\n    return undefined;\n}\n/**\n * Returns the intersection of multiple arrays.\n *\n * @param  {Array} a The first array\n * @param  {Array} b The second array\n * @param  {Function} hashFunction Custom function to hash values, default the hashCode method\n * @return {Array}    Result array\n */\nfunction intersection(input, hashFunction) {\n    if (hashFunction === void 0) { hashFunction = DEFAULT_HASH_FUNCTION; }\n    // if any array is empty, there is no intersection\n    if (input.some(function (arr) { return arr.length == 0; }))\n        return [];\n    // sort input arrays by size\n    var sortedIndex = input.map(function (a, i) { return [i, a.length]; });\n    sortedIndex.sort(function (a, b) { return a[1] - b[1]; });\n    // matched items index of first array for all other arrays.\n    var result = [];\n    var smallestArray = input[sortedIndex[0][0]];\n    var root = {\n        key: hashCode(smallestArray[0], hashFunction),\n        indexes: [0],\n    };\n    for (var i = 1; i < smallestArray.length; i++) {\n        var val = smallestArray[i];\n        var h = hashCode(val, hashFunction);\n        addIndex(root, h, i);\n    }\n    var maxResultSize = sortedIndex[0][1];\n    var orderedIndexes = [];\n    var _loop_1 = function (i) {\n        var arrayIndex = sortedIndex[i][0];\n        var data = input[arrayIndex];\n        // number of matched items\n        var size = 0;\n        var _loop_2 = function (j) {\n            var h = hashCode(data[j], hashFunction);\n            var indexes = getIndexes(root, h);\n            // not included.\n            if (!indexes)\n                return \"continue\";\n            // check items equality to mitigate hash collisions and select the matching index.\n            var idx = indexes\n                .map(function (n) { return smallestArray[n]; })\n                .findIndex(function (v) { return isEqual(v, data[j]); });\n            // not included\n            if (idx == -1)\n                return \"continue\";\n            // item matched. ensure map exist for marking index\n            if (result.length < i)\n                result.push({});\n            // map to index of the actual value and set position\n            result[result.length - 1][indexes[idx]] = true;\n            // if we have seen max result items we can stop.\n            size = Object.keys(result[result.length - 1]).length;\n            // ensure stabilty\n            if (arrayIndex == 0) {\n                if (orderedIndexes.indexOf(indexes[idx]) == -1) {\n                    orderedIndexes.push(indexes[idx]);\n                }\n            }\n        };\n        for (var j = 0; j < data.length; j++) {\n            _loop_2(j);\n        }\n        // no intersection if nothing found\n        if (size == 0)\n            return { value: [] };\n        // new max result size\n        maxResultSize = Math.min(maxResultSize, size);\n    };\n    for (var i = 1; i < sortedIndex.length; i++) {\n        var state_1 = _loop_1(i);\n        if (typeof state_1 === \"object\")\n            return state_1.value;\n    }\n    var freq = {};\n    // count occurrences\n    result.forEach(function (m) {\n        Object.keys(m).forEach(function (k) {\n            var n = parseFloat(k);\n            freq[n] = freq[n] || 0;\n            freq[n]++;\n        });\n    });\n    var keys = orderedIndexes;\n    if (keys.length == 0) {\n        // note: cannot use parseInt due to second argument for radix.\n        keys.push.apply(keys, Object.keys(freq).map(parseFloat));\n        keys.sort();\n    }\n    return keys\n        .filter(function (n) { return freq[n] == input.length - 1; })\n        .map(function (n) { return smallestArray[n]; });\n}\nexports.intersection = intersection;\n/**\n * Flatten the array\n *\n * @param  {Array} xs The array to flatten\n * @param {Number} depth The number of nested lists to iterate\n */\nfunction flatten(xs, depth) {\n    var arr = [];\n    function flatten2(ys, n) {\n        for (var i = 0, len = ys.length; i < len; i++) {\n            if ((0, exports.isArray)(ys[i]) && (n > 0 || n < 0)) {\n                flatten2(ys[i], Math.max(-1, n - 1));\n            }\n            else {\n                arr.push(ys[i]);\n            }\n        }\n    }\n    flatten2(xs, depth);\n    return arr;\n}\nexports.flatten = flatten;\n/**\n * Determine whether two values are the same or strictly equivalent\n *\n * @param  {*}  a The first value\n * @param  {*}  b The second value\n * @return {Boolean}   Result of comparison\n */\nfunction isEqual(a, b) {\n    var lhs = [a];\n    var rhs = [b];\n    while (lhs.length > 0) {\n        a = lhs.pop();\n        b = rhs.pop();\n        // strictly equal must be equal.\n        if (a === b)\n            continue;\n        // unequal types and functions cannot be equal.\n        var nativeType = getType(a).toLowerCase();\n        if (nativeType !== getType(b).toLowerCase() || nativeType === \"function\") {\n            return false;\n        }\n        // leverage toString for Date and RegExp types\n        if (nativeType === \"array\") {\n            var xs = a;\n            var ys = b;\n            if (xs.length !== ys.length)\n                return false;\n            if (xs.length === ys.length && xs.length === 0)\n                continue;\n            into(lhs, xs);\n            into(rhs, ys);\n        }\n        else if (nativeType === \"object\") {\n            // deep compare objects\n            var aKeys = Object.keys(a);\n            var bKeys = Object.keys(b);\n            // check length of keys early\n            if (aKeys.length !== bKeys.length)\n                return false;\n            // compare keys\n            for (var i = 0, len = aKeys.length; i < len; i++) {\n                var k = aKeys[i];\n                // not found\n                if (!has(b, k))\n                    return false;\n                // key found\n                lhs.push(a[k]);\n                rhs.push(b[k]);\n            }\n        }\n        else {\n            // compare encoded values\n            if (stringify(a) !== stringify(b))\n                return false;\n        }\n    }\n    return lhs.length === 0;\n}\nexports.isEqual = isEqual;\n/**\n * Return a new unique version of the collection\n * @param  {Array} xs The input collection\n * @return {Array}\n */\nfunction unique(xs, hashFunction) {\n    if (hashFunction === void 0) { hashFunction = DEFAULT_HASH_FUNCTION; }\n    if (xs.length == 0)\n        return [];\n    var root = {\n        key: hashCode(xs[0], hashFunction),\n        indexes: [0],\n    };\n    // hash items on to tree to track collisions\n    for (var i = 1; i < xs.length; i++) {\n        addIndex(root, hashCode(xs[i], hashFunction), i);\n    }\n    var result = [];\n    // walk tree and remove duplicates\n    var stack = [root];\n    while (stack.length > 0) {\n        var node = stack.pop();\n        if (node.indexes.length == 1) {\n            result.push(node.indexes[0]);\n        }\n        else {\n            // handle collisions by matching all items\n            var arr = node.indexes;\n            // we start by search from the back so we maintain the smaller index when there is a duplicate.\n            while (arr.length > 0) {\n                for (var j = 1; j < arr.length; j++) {\n                    // if last item matches any remove the last item.\n                    if (isEqual(xs[arr[arr.length - 1]], xs[arr[arr.length - 1 - j]])) {\n                        // remove last item\n                        arr.pop();\n                        // reset position\n                        j = 0;\n                    }\n                }\n                // add the unique item\n                result.push(arr.pop());\n            }\n        }\n        // add children\n        if (node.left)\n            stack.push(node.left);\n        if (node.right)\n            stack.push(node.right);\n    }\n    // sort indexes for stability\n    result.sort();\n    // return the unique items\n    return result.map(function (i) { return xs[i]; });\n}\nexports.unique = unique;\n/**\n * Encode value to string using a simple non-colliding stable scheme.\n *\n * @param value\n * @returns {*}\n */\nfunction stringify(value) {\n    var type = getType(value).toLowerCase();\n    switch (type) {\n        case \"boolean\":\n        case \"number\":\n        case \"regexp\":\n            return value.toString();\n        case \"string\":\n            return JSON.stringify(value);\n        case \"date\":\n            return value.toISOString();\n        case \"null\":\n        case \"undefined\":\n            return type;\n        case \"array\":\n            return \"[\" + value.map(stringify).join(\",\") + \"]\";\n        default:\n            break;\n    }\n    // default case\n    var prefix = type === \"object\" ? \"\" : \"\".concat(getType(value));\n    var objKeys = Object.keys(value);\n    objKeys.sort();\n    return (\"\".concat(prefix, \"{\") +\n        objKeys.map(function (k) { return \"\".concat(stringify(k), \":\").concat(stringify(value[k])); }).join(\",\") +\n        \"}\");\n}\nexports.stringify = stringify;\n/**\n * Generate hash code\n * This selected function is the result of benchmarking various hash functions.\n * This version performs well and can hash 10^6 documents in ~3s with on average 100 collisions.\n *\n * @param value\n * @returns {number|null}\n */\nfunction hashCode(value, hashFunction) {\n    if (hashFunction === void 0) { hashFunction = DEFAULT_HASH_FUNCTION; }\n    if (isNil(value))\n        return null;\n    return hashFunction(value).toString();\n}\nexports.hashCode = hashCode;\n/**\n * Returns a (stably) sorted copy of list, ranked in ascending order by the results of running each value through iteratee\n *\n * This implementation treats null/undefined sort keys as less than every other type\n *\n * @param {Array}   collection\n * @param {Function} keyFn The sort key function used to resolve sort keys\n * @param {Function} comparator The comparator function to use for comparing keys. Defaults to standard comparison via `compare(...)`\n * @return {Array} Returns a new sorted array by the given key and comparator function\n */\nfunction sortBy(collection, keyFn, comparator) {\n    if (comparator === void 0) { comparator = exports.DEFAULT_COMPARATOR; }\n    var sorted = [];\n    var result = [];\n    if (isEmpty(collection))\n        return collection;\n    for (var i = 0; i < collection.length; i++) {\n        var obj = collection[i];\n        var key = keyFn(obj, i);\n        if (isNil(key)) {\n            result.push(obj);\n        }\n        else {\n            sorted.push([key, obj]);\n        }\n    }\n    // use native array sorting but enforce stableness\n    sorted.sort(function (a, b) { return comparator(a[0], b[0]); });\n    result.push.apply(result, sorted.map(function (o) { return o[1]; }));\n    return result;\n}\nexports.sortBy = sortBy;\n/**\n * Groups the collection into sets by the returned key\n *\n * @param collection\n * @param keyFn {Function} to compute the group key of an item in the collection\n * @returns {{keys: Array, groups: Array}}\n */\nfunction groupBy(collection, keyFn, hashFunction) {\n    if (hashFunction === void 0) { hashFunction = DEFAULT_HASH_FUNCTION; }\n    var result = {\n        keys: new Array(),\n        groups: new Array(),\n    };\n    var lookup = {};\n    for (var i = 0; i < collection.length; i++) {\n        var obj = collection[i];\n        var key = keyFn(obj, i);\n        var hash = hashCode(key, hashFunction);\n        var index = -1;\n        if (lookup[hash] === undefined) {\n            index = result.keys.length;\n            lookup[hash] = index;\n            result.keys.push(key);\n            result.groups.push([]);\n        }\n        index = lookup[hash];\n        result.groups[index].push(obj);\n    }\n    return result;\n}\nexports.groupBy = groupBy;\n// max elements to push.\n// See argument limit https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/apply\nvar MAX_ARRAY_PUSH = 50000;\n/**\n * Merge elements into the dest\n *\n * @param {*} target The target object\n * @param {*} rest The array of elements to merge into dest\n */\nfunction into(target) {\n    var rest = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        rest[_i - 1] = arguments[_i];\n    }\n    if (target instanceof Array) {\n        return rest.reduce(function (acc, arr) {\n            // push arrary in batches to handle large inputs\n            var i = Math.ceil(arr.length / MAX_ARRAY_PUSH);\n            var begin = 0;\n            while (i-- > 0) {\n                Array.prototype.push.apply(acc, arr.slice(begin, begin + MAX_ARRAY_PUSH));\n                begin += MAX_ARRAY_PUSH;\n            }\n            return acc;\n        }, target);\n    }\n    else {\n        // merge objects. same behaviour as Object.assign\n        return rest.filter(isObjectLike).reduce(function (acc, item) {\n            Object.assign(acc, item);\n            return acc;\n        }, target);\n    }\n}\nexports.into = into;\n/**\n * This is a generic memoization function\n *\n * This implementation uses a cache independent of the function being memoized\n * to allow old values to be garbage collected when the memoized function goes out of scope.\n *\n * @param {*} fn The function object to memoize\n */\nfunction memoize(fn, hashFunction) {\n    var _this = this;\n    if (hashFunction === void 0) { hashFunction = DEFAULT_HASH_FUNCTION; }\n    return (function (memo) {\n        return function () {\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            var key = hashCode(args, hashFunction);\n            if (!has(memo, key)) {\n                memo[key] = fn.apply(_this, args);\n            }\n            return memo[key];\n        };\n    })({\n    /* storage */\n    });\n}\nexports.memoize = memoize;\n// mingo internal\n/**\n * Retrieve the value of a given key on an object\n * @param obj\n * @param key\n * @returns {*}\n * @private\n */\nfunction getValue(obj, key) {\n    return isObjectLike(obj) ? obj[key] : undefined;\n}\n/**\n * Unwrap a single element array to specified depth\n * @param {Array} arr\n * @param {Number} depth\n */\nfunction unwrap(arr, depth) {\n    if (depth < 1)\n        return arr;\n    while (depth-- && arr.length === 1)\n        arr = arr[0];\n    return arr;\n}\n/**\n * Resolve the value of the field (dot separated) on the given object\n * @param obj {Object} the object context\n * @param selector {String} dot separated path to field\n * @returns {*}\n */\nfunction resolve(obj, selector, options) {\n    var depth = 0;\n    function resolve2(o, path) {\n        var value = o;\n        var _loop_3 = function (i) {\n            var field = path[i];\n            var isText = /^\\d+$/.exec(field) === null;\n            // using instanceof to aid typescript compiler\n            if (isText && value instanceof Array) {\n                // On the first iteration, we check if we received a stop flag.\n                // If so, we stop to prevent iterating over a nested array value\n                // on consecutive object keys in the selector.\n                if (i === 0 && depth > 0)\n                    return \"break\";\n                depth += 1;\n                // only look at the rest of the path\n                var subpath_1 = path.slice(i);\n                value = value.reduce(function (acc, item) {\n                    var v = resolve2(item, subpath_1);\n                    if (v !== undefined)\n                        acc.push(v);\n                    return acc;\n                }, []);\n                return \"break\";\n            }\n            else {\n                value = getValue(value, field);\n            }\n            if (value === undefined)\n                return \"break\";\n        };\n        for (var i = 0; i < path.length; i++) {\n            var state_2 = _loop_3(i);\n            if (state_2 === \"break\")\n                break;\n        }\n        return value;\n    }\n    var result = JS_SIMPLE_TYPES.has(getType(obj).toLowerCase())\n        ? obj\n        : resolve2(obj, selector.split(\".\"));\n    return result instanceof Array && (options === null || options === void 0 ? void 0 : options.unwrapArray)\n        ? unwrap(result, depth)\n        : result;\n}\nexports.resolve = resolve;\n/**\n * Returns the full object to the resolved value given by the selector.\n * This function excludes empty values as they aren't practically useful.\n *\n * @param obj {Object} the object context\n * @param selector {String} dot separated path to field\n */\nfunction resolveGraph(obj, selector, options) {\n    var names = selector.split(\".\");\n    var key = names[0];\n    // get the next part of the selector\n    var next = names.slice(1).join(\".\");\n    var isIndex = /^\\d+$/.exec(key) !== null;\n    var hasNext = names.length > 1;\n    var result;\n    var value;\n    if (obj instanceof Array) {\n        if (isIndex) {\n            result = getValue(obj, Number(key));\n            if (hasNext) {\n                result = resolveGraph(result, next, options);\n            }\n            result = [result];\n        }\n        else {\n            result = [];\n            for (var _i = 0, obj_1 = obj; _i < obj_1.length; _i++) {\n                var item = obj_1[_i];\n                value = resolveGraph(item, selector, options);\n                if (options === null || options === void 0 ? void 0 : options.preserveMissing) {\n                    if (value === undefined) {\n                        value = MISSING;\n                    }\n                    result.push(value);\n                }\n                else if (value !== undefined) {\n                    result.push(value);\n                }\n            }\n        }\n    }\n    else {\n        value = getValue(obj, key);\n        if (hasNext) {\n            value = resolveGraph(value, next, options);\n        }\n        if (value === undefined)\n            return undefined;\n        result = (options === null || options === void 0 ? void 0 : options.preserveKeys) ? __assign({}, obj) : {};\n        result[key] = value;\n    }\n    return result;\n}\nexports.resolveGraph = resolveGraph;\n/**\n * Filter out all MISSING values from the object in-place\n *\n * @param obj The object to filter\n */\nfunction filterMissing(obj) {\n    if (obj instanceof Array) {\n        for (var i = obj.length - 1; i >= 0; i--) {\n            if (obj[i] === MISSING) {\n                obj.splice(i, 1);\n            }\n            else {\n                filterMissing(obj[i]);\n            }\n        }\n    }\n    else if (isObject(obj)) {\n        for (var k in obj) {\n            if (has(obj, k)) {\n                filterMissing(obj[k]);\n            }\n        }\n    }\n}\nexports.filterMissing = filterMissing;\n/**\n * Walk the object graph and execute the given transform function\n *\n * @param  {Object|Array} obj   The object to traverse\n * @param  {String} selector    The selector\n * @param  {Function} fn Function to execute for value at the end the traversal\n * @return {*}\n */\nfunction walk(obj, selector, fn, options) {\n    if (isNil(obj))\n        return;\n    var names = selector.split(\".\");\n    var key = names[0];\n    var next = names.slice(1).join(\".\");\n    if (names.length === 1) {\n        fn(obj, key);\n    }\n    else {\n        // force the rest of the graph while traversing\n        if ((options === null || options === void 0 ? void 0 : options.buildGraph) && isNil(obj[key])) {\n            obj[key] = {};\n        }\n        // get the next item\n        var item = obj[key];\n        // we peek to see if next key is an array index.\n        var isNextArrayIndex = !!(names.length > 1 && names[1].match(/^\\d+$/));\n        // if we have an array value but the next key is not an index and the 'descendArray' option is set,\n        // we walk each item in the array separately. This allows for handling traversing keys for objects\n        // nested within an array.\n        //\n        // Eg: Given { array: [ {k:1}, {k:2}, {k:3} ] }\n        //  - individual objecs can be traversed with \"array.k\"\n        //  - a specific object can be traversed with \"array.1\"\n        if (item instanceof Array && (options === null || options === void 0 ? void 0 : options.descendArray) && !isNextArrayIndex) {\n            item.forEach(function (e) { return walk(e, next, fn, options); });\n        }\n        else {\n            walk(item, next, fn, options);\n        }\n    }\n}\n/**\n * Set the value of the given object field\n *\n * @param obj {Object|Array} the object context\n * @param selector {String} path to field\n * @param value {*} the value to set\n */\nfunction setValue(obj, selector, value) {\n    walk(obj, selector, function (item, key) {\n        item[key] = value;\n    }, { buildGraph: true });\n}\nexports.setValue = setValue;\n/**\n * Removes an element from the container.\n * If the selector resolves to an array and the leaf is a non-numeric key,\n * the remove operation will be performed on objects of the array.\n *\n * @param obj {ArrayOrObject} object or array\n * @param selector {String} dot separated path to element to remove\n */\nfunction removeValue(obj, selector, options) {\n    walk(obj, selector, function (item, key) {\n        if (item instanceof Array) {\n            if (/^\\d+$/.test(key)) {\n                item.splice(parseInt(key), 1);\n            }\n            else if (options && options.descendArray) {\n                for (var _i = 0, item_1 = item; _i < item_1.length; _i++) {\n                    var elem = item_1[_i];\n                    if (isObject(elem)) {\n                        delete elem[key];\n                    }\n                }\n            }\n        }\n        else if (isObject(item)) {\n            delete item[key];\n        }\n    }, options);\n}\nexports.removeValue = removeValue;\nvar OPERATOR_NAME_PATTERN = /^\\$[a-zA-Z0-9_]+$/;\n/**\n * Check whether the given name passes for an operator. We assume AnyVal field name starting with '$' is an operator.\n * This is cheap and safe to do since keys beginning with '$' should be reserved for internal use.\n * @param {String} name\n */\nfunction isOperator(name) {\n    return OPERATOR_NAME_PATTERN.test(name);\n}\nexports.isOperator = isOperator;\n/**\n * Simplify expression for easy evaluation with query operators map\n * @param expr\n * @returns {*}\n */\nfunction normalize(expr) {\n    // normalized primitives\n    if (JS_SIMPLE_TYPES.has(getType(expr).toLowerCase())) {\n        return isRegExp(expr) ? { $regex: expr } : { $eq: expr };\n    }\n    // normalize object expression. using ObjectLike handles custom types\n    if (isObjectLike(expr)) {\n        // no valid query operator found, so we do simple comparison\n        if (!Object.keys(expr).some(isOperator)) {\n            return { $eq: expr };\n        }\n        // ensure valid regex\n        if (has(expr, \"$regex\")) {\n            return {\n                $regex: new RegExp(expr[\"$regex\"], expr[\"$options\"]),\n            };\n        }\n    }\n    return expr;\n}\nexports.normalize = normalize;\n","(function (root, factory) {\n  'use strict'\n\n  /*istanbul ignore next:cant test*/\n  if (typeof module === 'object' && typeof module.exports === 'object') {\n    module.exports = factory()\n  } else if (typeof define === 'function' && define.amd) {\n    // AMD. Register as an anonymous module.\n    define([], factory)\n  } else {\n    // Browser globals\n    root.objectPath = factory()\n  }\n})(this, function () {\n  'use strict'\n\n  var toStr = Object.prototype.toString\n\n  function hasOwnProperty (obj, prop) {\n    if (obj == null) {\n      return false\n    }\n    //to handle objects with null prototypes (too edge case?)\n    return Object.prototype.hasOwnProperty.call(obj, prop)\n  }\n\n  function isEmpty (value) {\n    if (!value) {\n      return true\n    }\n    if (isArray(value) && value.length === 0) {\n      return true\n    } else if (typeof value !== 'string') {\n      for (var i in value) {\n        if (hasOwnProperty(value, i)) {\n          return false\n        }\n      }\n      return true\n    }\n    return false\n  }\n\n  function toString (type) {\n    return toStr.call(type)\n  }\n\n  function isObject (obj) {\n    return typeof obj === 'object' && toString(obj) === '[object Object]'\n  }\n\n  var isArray = Array.isArray || function (obj) {\n    /*istanbul ignore next:cant test*/\n    return toStr.call(obj) === '[object Array]'\n  }\n\n  function isBoolean (obj) {\n    return typeof obj === 'boolean' || toString(obj) === '[object Boolean]'\n  }\n\n  function getKey (key) {\n    var intKey = parseInt(key)\n    if (intKey.toString() === key) {\n      return intKey\n    }\n    return key\n  }\n\n  function factory (options) {\n    options = options || {}\n\n    var objectPath = function (obj) {\n      return Object.keys(objectPath).reduce(function (proxy, prop) {\n        if (prop === 'create') {\n          return proxy\n        }\n\n        /*istanbul ignore else*/\n        if (typeof objectPath[prop] === 'function') {\n          proxy[prop] = objectPath[prop].bind(objectPath, obj)\n        }\n\n        return proxy\n      }, {})\n    }\n\n    var hasShallowProperty\n    if (options.includeInheritedProps) {\n      hasShallowProperty = function () {\n        return true\n      }\n    } else {\n      hasShallowProperty = function (obj, prop) {\n        return (typeof prop === 'number' && Array.isArray(obj)) || hasOwnProperty(obj, prop)\n      }\n    }\n\n    function getShallowProperty (obj, prop) {\n      if (hasShallowProperty(obj, prop)) {\n        return obj[prop]\n      }\n    }\n\n    var getShallowPropertySafely\n    if (options.includeInheritedProps) {\n      getShallowPropertySafely = function (obj, currentPath) {\n        if (typeof currentPath !== 'string' && typeof currentPath !== 'number') {\n          currentPath = String(currentPath)\n        }\n        var currentValue = getShallowProperty(obj, currentPath)\n        if (currentPath === '__proto__' || currentPath === 'prototype' ||\n          (currentPath === 'constructor' && typeof currentValue === 'function')) {\n          throw new Error('For security reasons, object\\'s magic properties cannot be set')\n        }\n        return currentValue\n      }\n    } else {\n      getShallowPropertySafely = function (obj, currentPath) {\n        return getShallowProperty(obj, currentPath)\n      }\n    }\n\n    function set (obj, path, value, doNotReplace) {\n      if (typeof path === 'number') {\n        path = [path]\n      }\n      if (!path || path.length === 0) {\n        return obj\n      }\n      if (typeof path === 'string') {\n        return set(obj, path.split('.').map(getKey), value, doNotReplace)\n      }\n      var currentPath = path[0]\n      var currentValue = getShallowPropertySafely(obj, currentPath)\n      if (path.length === 1) {\n        if (currentValue === void 0 || !doNotReplace) {\n          obj[currentPath] = value\n        }\n        return currentValue\n      }\n\n      if (currentValue === void 0) {\n        //check if we assume an array\n        if (typeof path[1] === 'number') {\n          obj[currentPath] = []\n        } else {\n          obj[currentPath] = {}\n        }\n      }\n\n      return set(obj[currentPath], path.slice(1), value, doNotReplace)\n    }\n\n    objectPath.has = function (obj, path) {\n      if (typeof path === 'number') {\n        path = [path]\n      } else if (typeof path === 'string') {\n        path = path.split('.')\n      }\n\n      if (!path || path.length === 0) {\n        return !!obj\n      }\n\n      for (var i = 0; i < path.length; i++) {\n        var j = getKey(path[i])\n\n        if ((typeof j === 'number' && isArray(obj) && j < obj.length) ||\n          (options.includeInheritedProps ? (j in Object(obj)) : hasOwnProperty(obj, j))) {\n          obj = obj[j]\n        } else {\n          return false\n        }\n      }\n\n      return true\n    }\n\n    objectPath.ensureExists = function (obj, path, value) {\n      return set(obj, path, value, true)\n    }\n\n    objectPath.set = function (obj, path, value, doNotReplace) {\n      return set(obj, path, value, doNotReplace)\n    }\n\n    objectPath.insert = function (obj, path, value, at) {\n      var arr = objectPath.get(obj, path)\n      at = ~~at\n      if (!isArray(arr)) {\n        arr = []\n        objectPath.set(obj, path, arr)\n      }\n      arr.splice(at, 0, value)\n    }\n\n    objectPath.empty = function (obj, path) {\n      if (isEmpty(path)) {\n        return void 0\n      }\n      if (obj == null) {\n        return void 0\n      }\n\n      var value, i\n      if (!(value = objectPath.get(obj, path))) {\n        return void 0\n      }\n\n      if (typeof value === 'string') {\n        return objectPath.set(obj, path, '')\n      } else if (isBoolean(value)) {\n        return objectPath.set(obj, path, false)\n      } else if (typeof value === 'number') {\n        return objectPath.set(obj, path, 0)\n      } else if (isArray(value)) {\n        value.length = 0\n      } else if (isObject(value)) {\n        for (i in value) {\n          if (hasShallowProperty(value, i)) {\n            delete value[i]\n          }\n        }\n      } else {\n        return objectPath.set(obj, path, null)\n      }\n    }\n\n    objectPath.push = function (obj, path /*, values */) {\n      var arr = objectPath.get(obj, path)\n      if (!isArray(arr)) {\n        arr = []\n        objectPath.set(obj, path, arr)\n      }\n\n      arr.push.apply(arr, Array.prototype.slice.call(arguments, 2))\n    }\n\n    objectPath.coalesce = function (obj, paths, defaultValue) {\n      var value\n\n      for (var i = 0, len = paths.length; i < len; i++) {\n        if ((value = objectPath.get(obj, paths[i])) !== void 0) {\n          return value\n        }\n      }\n\n      return defaultValue\n    }\n\n    objectPath.get = function (obj, path, defaultValue) {\n      if (typeof path === 'number') {\n        path = [path]\n      }\n      if (!path || path.length === 0) {\n        return obj\n      }\n      if (obj == null) {\n        return defaultValue\n      }\n      if (typeof path === 'string') {\n        return objectPath.get(obj, path.split('.'), defaultValue)\n      }\n\n      var currentPath = getKey(path[0])\n      var nextObj = getShallowPropertySafely(obj, currentPath)\n      if (nextObj === void 0) {\n        return defaultValue\n      }\n\n      if (path.length === 1) {\n        return nextObj\n      }\n\n      return objectPath.get(obj[currentPath], path.slice(1), defaultValue)\n    }\n\n    objectPath.del = function del (obj, path) {\n      if (typeof path === 'number') {\n        path = [path]\n      }\n\n      if (obj == null) {\n        return obj\n      }\n\n      if (isEmpty(path)) {\n        return obj\n      }\n      if (typeof path === 'string') {\n        return objectPath.del(obj, path.split('.'))\n      }\n\n      var currentPath = getKey(path[0])\n      getShallowPropertySafely(obj, currentPath)\n      if (!hasShallowProperty(obj, currentPath)) {\n        return obj\n      }\n\n      if (path.length === 1) {\n        if (isArray(obj)) {\n          obj.splice(currentPath, 1)\n        } else {\n          delete obj[currentPath]\n        }\n      } else {\n        return objectPath.del(obj[currentPath], path.slice(1))\n      }\n\n      return obj\n    }\n\n    return objectPath\n  }\n\n  var mod = factory()\n  mod.create = factory\n  mod.withInheritedProps = factory({includeInheritedProps: true})\n  return mod\n})\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.serialize = exports.deserialize = exports.registerSerializer = void 0;\nconst serializers_1 = require(\"./serializers\");\nlet registeredSerializer = serializers_1.DefaultSerializer;\nfunction registerSerializer(serializer) {\n    registeredSerializer = serializers_1.extendSerializer(registeredSerializer, serializer);\n}\nexports.registerSerializer = registerSerializer;\nfunction deserialize(message) {\n    return registeredSerializer.deserialize(message);\n}\nexports.deserialize = deserialize;\nfunction serialize(input) {\n    return registeredSerializer.serialize(input);\n}\nexports.serialize = serialize;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DefaultSerializer = exports.extendSerializer = void 0;\nfunction extendSerializer(extend, implementation) {\n    const fallbackDeserializer = extend.deserialize.bind(extend);\n    const fallbackSerializer = extend.serialize.bind(extend);\n    return {\n        deserialize(message) {\n            return implementation.deserialize(message, fallbackDeserializer);\n        },\n        serialize(input) {\n            return implementation.serialize(input, fallbackSerializer);\n        }\n    };\n}\nexports.extendSerializer = extendSerializer;\nconst DefaultErrorSerializer = {\n    deserialize(message) {\n        return Object.assign(Error(message.message), {\n            name: message.name,\n            stack: message.stack\n        });\n    },\n    serialize(error) {\n        return {\n            __error_marker: \"$$error\",\n            message: error.message,\n            name: error.name,\n            stack: error.stack\n        };\n    }\n};\nconst isSerializedError = (thing) => thing && typeof thing === \"object\" && \"__error_marker\" in thing && thing.__error_marker === \"$$error\";\nexports.DefaultSerializer = {\n    deserialize(message) {\n        if (isSerializedError(message)) {\n            return DefaultErrorSerializer.deserialize(message);\n        }\n        else {\n            return message;\n        }\n    },\n    serialize(input) {\n        if (input instanceof Error) {\n            return DefaultErrorSerializer.serialize(input);\n        }\n        else {\n            return input;\n        }\n    }\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$worker = exports.$transferable = exports.$terminate = exports.$events = exports.$errors = void 0;\nexports.$errors = Symbol(\"thread.errors\");\nexports.$events = Symbol(\"thread.events\");\nexports.$terminate = Symbol(\"thread.terminate\");\nexports.$transferable = Symbol(\"thread.transferable\");\nexports.$worker = Symbol(\"thread.worker\");\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Transfer = exports.isTransferDescriptor = void 0;\nconst symbols_1 = require(\"./symbols\");\nfunction isTransferable(thing) {\n    if (!thing || typeof thing !== \"object\")\n        return false;\n    // Don't check too thoroughly, since the list of transferable things in JS might grow over time\n    return true;\n}\nfunction isTransferDescriptor(thing) {\n    return thing && typeof thing === \"object\" && thing[symbols_1.$transferable];\n}\nexports.isTransferDescriptor = isTransferDescriptor;\nfunction Transfer(payload, transferables) {\n    if (!transferables) {\n        if (!isTransferable(payload))\n            throw Error();\n        transferables = [payload];\n    }\n    return {\n        [symbols_1.$transferable]: true,\n        send: payload,\n        transferables\n    };\n}\nexports.Transfer = Transfer;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WorkerMessageType = exports.MasterMessageType = void 0;\n/////////////////////////////\n// Messages sent by master:\nvar MasterMessageType;\n(function (MasterMessageType) {\n    MasterMessageType[\"cancel\"] = \"cancel\";\n    MasterMessageType[\"run\"] = \"run\";\n})(MasterMessageType = exports.MasterMessageType || (exports.MasterMessageType = {}));\n////////////////////////////\n// Messages sent by worker:\nvar WorkerMessageType;\n(function (WorkerMessageType) {\n    WorkerMessageType[\"error\"] = \"error\";\n    WorkerMessageType[\"init\"] = \"init\";\n    WorkerMessageType[\"result\"] = \"result\";\n    WorkerMessageType[\"running\"] = \"running\";\n    WorkerMessageType[\"uncaughtError\"] = \"uncaughtError\";\n})(WorkerMessageType = exports.WorkerMessageType || (exports.WorkerMessageType = {}));\n","\"use strict\";\n/// <reference lib=\"dom\" />\n// tslint:disable no-shadowed-variable\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst isWorkerRuntime = function isWorkerRuntime() {\n    const isWindowContext = typeof self !== \"undefined\" && typeof Window !== \"undefined\" && self instanceof Window;\n    return typeof self !== \"undefined\" && self.postMessage && !isWindowContext ? true : false;\n};\nconst postMessageToMaster = function postMessageToMaster(data, transferList) {\n    self.postMessage(data, transferList);\n};\nconst subscribeToMasterMessages = function subscribeToMasterMessages(onMessage) {\n    const messageHandler = (messageEvent) => {\n        onMessage(messageEvent.data);\n    };\n    const unsubscribe = () => {\n        self.removeEventListener(\"message\", messageHandler);\n    };\n    self.addEventListener(\"message\", messageHandler);\n    return unsubscribe;\n};\nexports.default = {\n    isWorkerRuntime,\n    postMessageToMaster,\n    subscribeToMasterMessages\n};\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.expose = exports.isWorkerRuntime = exports.Transfer = exports.registerSerializer = void 0;\nconst is_observable_1 = __importDefault(require(\"is-observable\"));\nconst common_1 = require(\"../common\");\nconst transferable_1 = require(\"../transferable\");\nconst messages_1 = require(\"../types/messages\");\nconst implementation_1 = __importDefault(require(\"./implementation\"));\nvar common_2 = require(\"../common\");\nObject.defineProperty(exports, \"registerSerializer\", { enumerable: true, get: function () { return common_2.registerSerializer; } });\nvar transferable_2 = require(\"../transferable\");\nObject.defineProperty(exports, \"Transfer\", { enumerable: true, get: function () { return transferable_2.Transfer; } });\n/** Returns `true` if this code is currently running in a worker. */\nexports.isWorkerRuntime = implementation_1.default.isWorkerRuntime;\nlet exposeCalled = false;\nconst activeSubscriptions = new Map();\nconst isMasterJobCancelMessage = (thing) => thing && thing.type === messages_1.MasterMessageType.cancel;\nconst isMasterJobRunMessage = (thing) => thing && thing.type === messages_1.MasterMessageType.run;\n/**\n * There are issues with `is-observable` not recognizing zen-observable's instances.\n * We are using `observable-fns`, but it's based on zen-observable, too.\n */\nconst isObservable = (thing) => is_observable_1.default(thing) || isZenObservable(thing);\nfunction isZenObservable(thing) {\n    return thing && typeof thing === \"object\" && typeof thing.subscribe === \"function\";\n}\nfunction deconstructTransfer(thing) {\n    return transferable_1.isTransferDescriptor(thing)\n        ? { payload: thing.send, transferables: thing.transferables }\n        : { payload: thing, transferables: undefined };\n}\nfunction postFunctionInitMessage() {\n    const initMessage = {\n        type: messages_1.WorkerMessageType.init,\n        exposed: {\n            type: \"function\"\n        }\n    };\n    implementation_1.default.postMessageToMaster(initMessage);\n}\nfunction postModuleInitMessage(methodNames) {\n    const initMessage = {\n        type: messages_1.WorkerMessageType.init,\n        exposed: {\n            type: \"module\",\n            methods: methodNames\n        }\n    };\n    implementation_1.default.postMessageToMaster(initMessage);\n}\nfunction postJobErrorMessage(uid, rawError) {\n    const { payload: error, transferables } = deconstructTransfer(rawError);\n    const errorMessage = {\n        type: messages_1.WorkerMessageType.error,\n        uid,\n        error: common_1.serialize(error)\n    };\n    implementation_1.default.postMessageToMaster(errorMessage, transferables);\n}\nfunction postJobResultMessage(uid, completed, resultValue) {\n    const { payload, transferables } = deconstructTransfer(resultValue);\n    const resultMessage = {\n        type: messages_1.WorkerMessageType.result,\n        uid,\n        complete: completed ? true : undefined,\n        payload\n    };\n    implementation_1.default.postMessageToMaster(resultMessage, transferables);\n}\nfunction postJobStartMessage(uid, resultType) {\n    const startMessage = {\n        type: messages_1.WorkerMessageType.running,\n        uid,\n        resultType\n    };\n    implementation_1.default.postMessageToMaster(startMessage);\n}\nfunction postUncaughtErrorMessage(error) {\n    try {\n        const errorMessage = {\n            type: messages_1.WorkerMessageType.uncaughtError,\n            error: common_1.serialize(error)\n        };\n        implementation_1.default.postMessageToMaster(errorMessage);\n    }\n    catch (subError) {\n        // tslint:disable-next-line no-console\n        console.error(\"Not reporting uncaught error back to master thread as it \" +\n            \"occured while reporting an uncaught error already.\" +\n            \"\\nLatest error:\", subError, \"\\nOriginal error:\", error);\n    }\n}\nfunction runFunction(jobUID, fn, args) {\n    return __awaiter(this, void 0, void 0, function* () {\n        let syncResult;\n        try {\n            syncResult = fn(...args);\n        }\n        catch (error) {\n            return postJobErrorMessage(jobUID, error);\n        }\n        const resultType = isObservable(syncResult) ? \"observable\" : \"promise\";\n        postJobStartMessage(jobUID, resultType);\n        if (isObservable(syncResult)) {\n            const subscription = syncResult.subscribe(value => postJobResultMessage(jobUID, false, common_1.serialize(value)), error => {\n                postJobErrorMessage(jobUID, common_1.serialize(error));\n                activeSubscriptions.delete(jobUID);\n            }, () => {\n                postJobResultMessage(jobUID, true);\n                activeSubscriptions.delete(jobUID);\n            });\n            activeSubscriptions.set(jobUID, subscription);\n        }\n        else {\n            try {\n                const result = yield syncResult;\n                postJobResultMessage(jobUID, true, common_1.serialize(result));\n            }\n            catch (error) {\n                postJobErrorMessage(jobUID, common_1.serialize(error));\n            }\n        }\n    });\n}\n/**\n * Expose a function or a module (an object whose values are functions)\n * to the main thread. Must be called exactly once in every worker thread\n * to signal its API to the main thread.\n *\n * @param exposed Function or object whose values are functions\n */\nfunction expose(exposed) {\n    if (!implementation_1.default.isWorkerRuntime()) {\n        throw Error(\"expose() called in the master thread.\");\n    }\n    if (exposeCalled) {\n        throw Error(\"expose() called more than once. This is not possible. Pass an object to expose() if you want to expose multiple functions.\");\n    }\n    exposeCalled = true;\n    if (typeof exposed === \"function\") {\n        implementation_1.default.subscribeToMasterMessages(messageData => {\n            if (isMasterJobRunMessage(messageData) && !messageData.method) {\n                runFunction(messageData.uid, exposed, messageData.args.map(common_1.deserialize));\n            }\n        });\n        postFunctionInitMessage();\n    }\n    else if (typeof exposed === \"object\" && exposed) {\n        implementation_1.default.subscribeToMasterMessages(messageData => {\n            if (isMasterJobRunMessage(messageData) && messageData.method) {\n                runFunction(messageData.uid, exposed[messageData.method], messageData.args.map(common_1.deserialize));\n            }\n        });\n        const methodNames = Object.keys(exposed).filter(key => typeof exposed[key] === \"function\");\n        postModuleInitMessage(methodNames);\n    }\n    else {\n        throw Error(`Invalid argument passed to expose(). Expected a function or an object, got: ${exposed}`);\n    }\n    implementation_1.default.subscribeToMasterMessages(messageData => {\n        if (isMasterJobCancelMessage(messageData)) {\n            const jobUID = messageData.uid;\n            const subscription = activeSubscriptions.get(jobUID);\n            if (subscription) {\n                subscription.unsubscribe();\n                activeSubscriptions.delete(jobUID);\n            }\n        }\n    });\n}\nexports.expose = expose;\nif (typeof self !== \"undefined\" && typeof self.addEventListener === \"function\" && implementation_1.default.isWorkerRuntime()) {\n    self.addEventListener(\"error\", event => {\n        // Post with some delay, so the master had some time to subscribe to messages\n        setTimeout(() => postUncaughtErrorMessage(event.error || event), 250);\n    });\n    self.addEventListener(\"unhandledrejection\", event => {\n        const error = event.reason;\n        if (error && typeof error.message === \"string\") {\n            // Post with some delay, so the master had some time to subscribe to messages\n            setTimeout(() => postUncaughtErrorMessage(error), 250);\n        }\n    });\n}\nif (typeof process !== \"undefined\" && typeof process.on === \"function\" && implementation_1.default.isWorkerRuntime()) {\n    process.on(\"uncaughtException\", (error) => {\n        // Post with some delay, so the master had some time to subscribe to messages\n        setTimeout(() => postUncaughtErrorMessage(error), 250);\n    });\n    process.on(\"unhandledRejection\", (error) => {\n        if (error && typeof error.message === \"string\") {\n            // Post with some delay, so the master had some time to subscribe to messages\n            setTimeout(() => postUncaughtErrorMessage(error), 250);\n        }\n    });\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const e=\"undefined\"!=typeof globalThis?globalThis:\"undefined\"!=typeof self?self:\"undefined\"!=typeof window?window:global,t=Object.keys,n=Array.isArray;function r(e,n){return\"object\"!=typeof n||t(n).forEach((function(t){e[t]=n[t]})),e}\"undefined\"==typeof Promise||e.Promise||(e.Promise=Promise);const s=Object.getPrototypeOf,i={}.hasOwnProperty;function o(e,t){return i.call(e,t)}function a(e,n){\"function\"==typeof n&&(n=n(s(e))),(\"undefined\"==typeof Reflect?t:Reflect.ownKeys)(n).forEach((t=>{l(e,t,n[t])}))}const u=Object.defineProperty;function l(e,t,n,s){u(e,t,r(n&&o(n,\"get\")&&\"function\"==typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},s))}function c(e){return{from:function(t){return e.prototype=Object.create(t.prototype),l(e.prototype,\"constructor\",e),{extend:a.bind(null,e.prototype)}}}}const h=Object.getOwnPropertyDescriptor;function d(e,t){let n;return h(e,t)||(n=s(e))&&d(n,t)}const f=[].slice;function p(e,t,n){return f.call(e,t,n)}function y(e,t){return t(e)}function m(e){if(!e)throw new Error(\"Assertion Failed\")}function v(t){e.setImmediate?setImmediate(t):setTimeout(t,0)}function g(e,t){return e.reduce(((e,n,r)=>{var s=t(n,r);return s&&(e[s[0]]=s[1]),e}),{})}function b(e,t){if(o(e,t))return e[t];if(!t)return e;if(\"string\"!=typeof t){for(var n=[],r=0,s=t.length;r<s;++r){var i=b(e,t[r]);n.push(i)}return n}var a=t.indexOf(\".\");if(-1!==a){var u=e[t.substr(0,a)];return void 0===u?void 0:b(u,t.substr(a+1))}}function _(e,t,r){if(e&&void 0!==t&&(!(\"isFrozen\"in Object)||!Object.isFrozen(e)))if(\"string\"!=typeof t&&\"length\"in t){m(\"string\"!=typeof r&&\"length\"in r);for(var s=0,i=t.length;s<i;++s)_(e,t[s],r[s])}else{var a=t.indexOf(\".\");if(-1!==a){var u=t.substr(0,a),l=t.substr(a+1);if(\"\"===l)void 0===r?n(e)&&!isNaN(parseInt(u))?e.splice(u,1):delete e[u]:e[u]=r;else{var c=e[u];c&&o(e,u)||(c=e[u]={}),_(c,l,r)}}else void 0===r?n(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=r}}function w(e){var t={};for(var n in e)o(e,n)&&(t[n]=e[n]);return t}const x=[].concat;function k(e){return x.apply([],e)}const E=\"Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey\".split(\",\").concat(k([8,16,32,64].map((e=>[\"Int\",\"Uint\",\"Float\"].map((t=>t+e+\"Array\")))))).filter((t=>e[t])),P=E.map((t=>e[t]));g(E,(e=>[e,!0]));let K=null;function O(e){K=\"undefined\"!=typeof WeakMap&&new WeakMap;const t=S(e);return K=null,t}function S(e){if(!e||\"object\"!=typeof e)return e;let t=K&&K.get(e);if(t)return t;if(n(e)){t=[],K&&K.set(e,t);for(var r=0,i=e.length;r<i;++r)t.push(S(e[r]))}else if(P.indexOf(e.constructor)>=0)t=e;else{const n=s(e);for(var a in t=n===Object.prototype?{}:Object.create(n),K&&K.set(e,t),e)o(e,a)&&(t[a]=S(e[a]))}return t}const{toString:A}={};function C(e){return A.call(e).slice(8,-1)}const j=\"undefined\"!=typeof Symbol?Symbol.iterator:\"@@iterator\",D=\"symbol\"==typeof j?function(e){var t;return null!=e&&(t=e[j])&&t.apply(e)}:function(){return null},I={};function B(e){var t,r,s,i;if(1===arguments.length){if(n(e))return e.slice();if(this===I&&\"string\"==typeof e)return[e];if(i=D(e)){for(r=[];!(s=i.next()).done;)r.push(s.value);return r}if(null==e)return[e];if(\"number\"==typeof(t=e.length)){for(r=new Array(t);t--;)r[t]=e[t];return r}return[e]}for(t=arguments.length,r=new Array(t);t--;)r[t]=arguments[t];return r}const T=\"undefined\"!=typeof Symbol?e=>\"AsyncFunction\"===e[Symbol.toStringTag]:()=>!1;var R=\"undefined\"!=typeof location&&/^(http|https):\\/\\/(localhost|127\\.0\\.0\\.1)/.test(location.href);function F(e,t){R=e,M=t}var M=()=>!0;const N=!new Error(\"\").stack;function q(){if(N)try{throw q.arguments,new Error}catch(e){return e}return new Error}function $(e,t){var n=e.stack;return n?(t=t||0,0===n.indexOf(e.name)&&(t+=(e.name+e.message).split(\"\\n\").length),n.split(\"\\n\").slice(t).filter(M).map((e=>\"\\n\"+e)).join(\"\")):\"\"}var U=[\"Unknown\",\"Constraint\",\"Data\",\"TransactionInactive\",\"ReadOnly\",\"Version\",\"NotFound\",\"InvalidState\",\"InvalidAccess\",\"Abort\",\"Timeout\",\"QuotaExceeded\",\"Syntax\",\"DataClone\"],L=[\"Modify\",\"Bulk\",\"OpenFailed\",\"VersionChange\",\"Schema\",\"Upgrade\",\"InvalidTable\",\"MissingAPI\",\"NoSuchDatabase\",\"InvalidArgument\",\"SubTransaction\",\"Unsupported\",\"Internal\",\"DatabaseClosed\",\"PrematureCommit\",\"ForeignAwait\"].concat(U),V={VersionChanged:\"Database version changed by other database connection\",DatabaseClosed:\"Database has been closed\",Abort:\"Transaction aborted\",TransactionInactive:\"Transaction has already completed or failed\",MissingAPI:\"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb\"};function W(e,t){this._e=q(),this.name=e,this.message=t}function Y(e,t){return e+\". Errors: \"+Object.keys(t).map((e=>t[e].toString())).filter(((e,t,n)=>n.indexOf(e)===t)).join(\"\\n\")}function z(e,t,n,r){this._e=q(),this.failures=t,this.failedKeys=r,this.successCount=n,this.message=Y(e,t)}function G(e,t){this._e=q(),this.name=\"BulkError\",this.failures=Object.keys(t).map((e=>t[e])),this.failuresByPos=t,this.message=Y(e,t)}c(W).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+\": \"+this.message+$(this._e,2))}},toString:function(){return this.name+\": \"+this.message}}),c(z).from(W),c(G).from(W);var H=L.reduce(((e,t)=>(e[t]=t+\"Error\",e)),{});const Q=W;var X=L.reduce(((e,t)=>{var n=t+\"Error\";function r(e,r){this._e=q(),this.name=n,e?\"string\"==typeof e?(this.message=`${e}${r?\"\\n \"+r:\"\"}`,this.inner=r||null):\"object\"==typeof e&&(this.message=`${e.name} ${e.message}`,this.inner=e):(this.message=V[t]||n,this.inner=null)}return c(r).from(Q),e[t]=r,e}),{});X.Syntax=SyntaxError,X.Type=TypeError,X.Range=RangeError;var J=U.reduce(((e,t)=>(e[t+\"Error\"]=X[t],e)),{});var Z=L.reduce(((e,t)=>(-1===[\"Syntax\",\"Type\",\"Range\"].indexOf(t)&&(e[t+\"Error\"]=X[t]),e)),{});function ee(){}function te(e){return e}function ne(e,t){return null==e||e===te?t:function(n){return t(e(n))}}function re(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function se(e,t){return e===ee?t:function(){var n=e.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var i=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?re(r,this.onsuccess):r),s&&(this.onerror=this.onerror?re(s,this.onerror):s),void 0!==i?i:n}}function ie(e,t){return e===ee?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?re(n,this.onsuccess):n),r&&(this.onerror=this.onerror?re(r,this.onerror):r)}}function oe(e,t){return e===ee?t:function(n){var s=e.apply(this,arguments);r(n,s);var i=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var a=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?re(i,this.onsuccess):i),o&&(this.onerror=this.onerror?re(o,this.onerror):o),void 0===s?void 0===a?void 0:a:r(s,a)}}function ae(e,t){return e===ee?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function ue(e,t){return e===ee?t:function(){var n=e.apply(this,arguments);if(n&&\"function\"==typeof n.then){for(var r=this,s=arguments.length,i=new Array(s);s--;)i[s]=arguments[s];return n.then((function(){return t.apply(r,i)}))}return t.apply(this,arguments)}}Z.ModifyError=z,Z.DexieError=W,Z.BulkError=G;var le={};const[ce,he,de]=\"undefined\"==typeof Promise?[]:(()=>{let e=Promise.resolve();if(\"undefined\"==typeof crypto||!crypto.subtle)return[e,s(e),e];const t=crypto.subtle.digest(\"SHA-512\",new Uint8Array([0]));return[t,s(t),e]})(),fe=he&&he.then,pe=ce&&ce.constructor,ye=!!de;var me=!1,ve=de?()=>{de.then(qe)}:e.setImmediate?setImmediate.bind(null,qe):e.MutationObserver?()=>{var e=document.createElement(\"div\");new MutationObserver((()=>{qe(),e=null})).observe(e,{attributes:!0}),e.setAttribute(\"i\",\"1\")}:()=>{setTimeout(qe,0)},ge=function(e,t){Oe.push([e,t]),_e&&(ve(),_e=!1)},be=!0,_e=!0,we=[],xe=[],ke=null,Ee=te,Pe={id:\"global\",global:!0,ref:0,unhandleds:[],onunhandled:ct,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach((e=>{try{ct(e[0],e[1])}catch(e){}}))}},Ke=Pe,Oe=[],Se=0,Ae=[];function Ce(e){if(\"object\"!=typeof this)throw new TypeError(\"Promises must be constructed via new\");this._listeners=[],this.onuncatched=ee,this._lib=!1;var t=this._PSD=Ke;if(R&&(this._stackHolder=q(),this._prev=null,this._numPrev=0),\"function\"!=typeof e){if(e!==le)throw new TypeError(\"Not a function\");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&Be(this,this._value))}this._state=null,this._value=null,++t.ref,Ie(this,e)}const je={get:function(){var e=Ke,t=Qe;function n(n,r){var s=!e.global&&(e!==Ke||t!==Qe);const i=s&&!et();var o=new Ce(((t,o)=>{Re(this,new De(ut(n,e,s,i),ut(r,e,s,i),t,o,e))}));return R&&Ne(o,this),o}return n.prototype=le,n},set:function(e){l(this,\"then\",e&&e.prototype===le?je:{get:function(){return e},set:je.set})}};function De(e,t,n,r,s){this.onFulfilled=\"function\"==typeof e?e:null,this.onRejected=\"function\"==typeof t?t:null,this.resolve=n,this.reject=r,this.psd=s}function Ie(e,t){try{t((t=>{if(null===e._state){if(t===e)throw new TypeError(\"A promise cannot be resolved with itself.\");var n=e._lib&&$e();t&&\"function\"==typeof t.then?Ie(e,((e,n)=>{t instanceof Ce?t._then(e,n):t.then(e,n)})):(e._state=!0,e._value=t,Te(e)),n&&Ue()}}),Be.bind(null,e))}catch(t){Be(e,t)}}function Be(e,t){if(xe.push(t),null===e._state){var n=e._lib&&$e();t=Ee(t),e._state=!1,e._value=t,R&&null!==t&&\"object\"==typeof t&&!t._promise&&function(e,t,n){try{e.apply(null,n)}catch(e){t&&t(e)}}((()=>{var n=d(t,\"stack\");t._promise=e,l(t,\"stack\",{get:()=>me?n&&(n.get?n.get.apply(t):n.value):e.stack})})),function(e){we.some((t=>t._value===e._value))||we.push(e)}(e),Te(e),n&&Ue()}}function Te(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)Re(e,t[n]);var s=e._PSD;--s.ref||s.finalize(),0===Se&&(++Se,ge((()=>{0==--Se&&Le()}),[]))}function Re(e,t){if(null!==e._state){var n=e._state?t.onFulfilled:t.onRejected;if(null===n)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++Se,ge(Fe,[n,e,t])}else e._listeners.push(t)}function Fe(e,t,n){try{ke=t;var r,s=t._value;t._state?r=e(s):(xe.length&&(xe=[]),r=e(s),-1===xe.indexOf(s)&&function(e){var t=we.length;for(;t;)if(we[--t]._value===e._value)return void we.splice(t,1)}(t)),n.resolve(r)}catch(e){n.reject(e)}finally{ke=null,0==--Se&&Le(),--n.psd.ref||n.psd.finalize()}}function Me(e,t,n){if(t.length===n)return t;var r=\"\";if(!1===e._state){var s,i,o=e._value;null!=o?(s=o.name||\"Error\",i=o.message||o,r=$(o,0)):(s=o,i=\"\"),t.push(s+(i?\": \"+i:\"\")+r)}return R&&((r=$(e._stackHolder,2))&&-1===t.indexOf(r)&&t.push(r),e._prev&&Me(e._prev,t,n)),t}function Ne(e,t){var n=t?t._numPrev+1:0;n<100&&(e._prev=t,e._numPrev=n)}function qe(){$e()&&Ue()}function $e(){var e=be;return be=!1,_e=!1,e}function Ue(){var e,t,n;do{for(;Oe.length>0;)for(e=Oe,Oe=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}}while(Oe.length>0);be=!0,_e=!0}function Le(){var e=we;we=[],e.forEach((e=>{e._PSD.onunhandled.call(null,e._value,e)}));for(var t=Ae.slice(0),n=t.length;n;)t[--n]()}function Ve(e){return new Ce(le,!1,e)}function We(e,t){var n=Ke;return function(){var r=$e(),s=Ke;try{return st(n,!0),e.apply(this,arguments)}catch(e){t&&t(e)}finally{st(s,!1),r&&Ue()}}}a(Ce.prototype,{then:je,_then:function(e,t){Re(this,new De(null,null,e,t,Ke))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=arguments[0],n=arguments[1];return\"function\"==typeof t?this.then(null,(e=>e instanceof t?n(e):Ve(e))):this.then(null,(e=>e&&e.name===t?n(e):Ve(e)))},finally:function(e){return this.then((t=>(e(),t)),(t=>(e(),Ve(t))))},stack:{get:function(){if(this._stack)return this._stack;try{me=!0;var e=Me(this,[],20).join(\"\\nFrom previous: \");return null!==this._state&&(this._stack=e),e}finally{me=!1}}},timeout:function(e,t){return e<1/0?new Ce(((n,r)=>{var s=setTimeout((()=>r(new X.Timeout(t))),e);this.then(n,r).finally(clearTimeout.bind(null,s))})):this}}),\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&l(Ce.prototype,Symbol.toStringTag,\"Dexie.Promise\"),Pe.env=it(),a(Ce,{all:function(){var e=B.apply(null,arguments).map(tt);return new Ce((function(t,n){0===e.length&&t([]);var r=e.length;e.forEach(((s,i)=>Ce.resolve(s).then((n=>{e[i]=n,--r||t(e)}),n)))}))},resolve:e=>{if(e instanceof Ce)return e;if(e&&\"function\"==typeof e.then)return new Ce(((t,n)=>{e.then(t,n)}));var t=new Ce(le,!0,e);return Ne(t,ke),t},reject:Ve,race:function(){var e=B.apply(null,arguments).map(tt);return new Ce(((t,n)=>{e.map((e=>Ce.resolve(e).then(t,n)))}))},PSD:{get:()=>Ke,set:e=>Ke=e},totalEchoes:{get:()=>Qe},newPSD:Je,usePSD:ot,scheduler:{get:()=>ge,set:e=>{ge=e}},rejectionMapper:{get:()=>Ee,set:e=>{Ee=e}},follow:(e,t)=>new Ce(((n,r)=>Je(((t,n)=>{var r=Ke;r.unhandleds=[],r.onunhandled=n,r.finalize=re((function(){!function(e){function t(){e(),Ae.splice(Ae.indexOf(t),1)}Ae.push(t),++Se,ge((()=>{0==--Se&&Le()}),[])}((()=>{0===this.unhandleds.length?t():n(this.unhandleds[0])}))}),r.finalize),e()}),t,n,r)))}),pe&&(pe.allSettled&&l(Ce,\"allSettled\",(function(){const e=B.apply(null,arguments).map(tt);return new Ce((t=>{0===e.length&&t([]);let n=e.length;const r=new Array(n);e.forEach(((e,s)=>Ce.resolve(e).then((e=>r[s]={status:\"fulfilled\",value:e}),(e=>r[s]={status:\"rejected\",reason:e})).then((()=>--n||t(r)))))}))})),pe.any&&\"undefined\"!=typeof AggregateError&&l(Ce,\"any\",(function(){const e=B.apply(null,arguments).map(tt);return new Ce(((t,n)=>{0===e.length&&n(new AggregateError([]));let r=e.length;const s=new Array(r);e.forEach(((e,i)=>Ce.resolve(e).then((e=>t(e)),(e=>{s[i]=e,--r||n(new AggregateError(s))}))))}))})));const Ye={awaits:0,echoes:0,id:0};var ze=0,Ge=[],He=0,Qe=0,Xe=0;function Je(e,t,n,s){var i=Ke,o=Object.create(i);o.parent=i,o.ref=0,o.global=!1,o.id=++Xe;var a=Pe.env;o.env=ye?{Promise:Ce,PromiseProp:{value:Ce,configurable:!0,writable:!0},all:Ce.all,race:Ce.race,allSettled:Ce.allSettled,any:Ce.any,resolve:Ce.resolve,reject:Ce.reject,nthen:lt(a.nthen,o),gthen:lt(a.gthen,o)}:{},t&&r(o,t),++i.ref,o.finalize=function(){--this.parent.ref||this.parent.finalize()};var u=ot(o,e,n,s);return 0===o.ref&&o.finalize(),u}function Ze(){return Ye.id||(Ye.id=++ze),++Ye.awaits,Ye.echoes+=100,Ye.id}function et(){return!!Ye.awaits&&(0==--Ye.awaits&&(Ye.id=0),Ye.echoes=100*Ye.awaits,!0)}function tt(e){return Ye.echoes&&e&&e.constructor===pe?(Ze(),e.then((e=>(et(),e)),(e=>(et(),ht(e))))):e}function nt(e){++Qe,Ye.echoes&&0!=--Ye.echoes||(Ye.echoes=Ye.id=0),Ge.push(Ke),st(e,!0)}function rt(){var e=Ge[Ge.length-1];Ge.pop(),st(e,!1)}function st(t,n){var r=Ke;if((n?!Ye.echoes||He++&&t===Ke:!He||--He&&t===Ke)||at(n?nt.bind(null,t):rt),t!==Ke&&(Ke=t,r===Pe&&(Pe.env=it()),ye)){var s=Pe.env.Promise,i=t.env;he.then=i.nthen,s.prototype.then=i.gthen,(r.global||t.global)&&(Object.defineProperty(e,\"Promise\",i.PromiseProp),s.all=i.all,s.race=i.race,s.resolve=i.resolve,s.reject=i.reject,i.allSettled&&(s.allSettled=i.allSettled),i.any&&(s.any=i.any))}}function it(){var t=e.Promise;return ye?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(e,\"Promise\"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject,nthen:he.then,gthen:t.prototype.then}:{}}function ot(e,t,n,r,s){var i=Ke;try{return st(e,!0),t(n,r,s)}finally{st(i,!1)}}function at(e){fe.call(ce,e)}function ut(e,t,n,r){return\"function\"!=typeof e?e:function(){var s=Ke;n&&Ze(),st(t,!0);try{return e.apply(this,arguments)}finally{st(s,!1),r&&at(et)}}}function lt(e,t){return function(n,r){return e.call(this,ut(n,t),ut(r,t))}}-1===(\"\"+fe).indexOf(\"[native code]\")&&(Ze=et=ee);function ct(t,n){var s;try{s=n.onuncatched(t)}catch(e){}if(!1!==s)try{var i,o={promise:n,reason:t};if(e.document&&document.createEvent?((i=document.createEvent(\"Event\")).initEvent(\"unhandledrejection\",!0,!0),r(i,o)):e.CustomEvent&&r(i=new CustomEvent(\"unhandledrejection\",{detail:o}),o),i&&e.dispatchEvent&&(dispatchEvent(i),!e.PromiseRejectionEvent&&e.onunhandledrejection))try{e.onunhandledrejection(i)}catch(e){}R&&i&&!i.defaultPrevented&&console.warn(`Unhandled rejection: ${t.stack||t}`)}catch(e){}}var ht=Ce.reject;function dt(e,t,n,r){if(e.idbdb&&(e._state.openComplete||Ke.letThrough||e._vip)){var s=e._createTransaction(t,n,e._dbSchema);try{s.create(),e._state.PR1398_maxLoop=3}catch(s){return s.name===H.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn(\"Dexie: Need to reopen db\"),e._close(),e.open().then((()=>dt(e,t,n,r)))):ht(s)}return s._promise(t,((e,t)=>Je((()=>(Ke.trans=s,r(e,t,s)))))).then((e=>s._completion.then((()=>e))))}if(e._state.openComplete)return ht(new X.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._options.autoOpen)return ht(new X.DatabaseClosed);e.open().catch(ee)}return e._state.dbReadyPromise.then((()=>dt(e,t,n,r)))}const ft=String.fromCharCode(65535),pt=\"Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.\",yt=[],mt=\"undefined\"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),vt=mt,gt=mt,bt=e=>!/(dexie\\.js|dexie\\.min\\.js)/.test(e);function _t(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}const wt={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function xt(e){return\"string\"!=typeof e||/\\./.test(e)?e=>e:t=>(void 0===t[e]&&e in t&&delete(t=O(t))[e],t)}function kt(){throw X.Type()}class Et{_trans(e,t,n){const r=this._tx||Ke.trans,s=this.name;function i(e,n,r){if(!r.schema[s])throw new X.NotFound(\"Table \"+s+\" not part of transaction\");return t(r.idbtrans,r)}const o=$e();try{return r&&r.db===this.db?r===Ke.trans?r._promise(e,i,n):Je((()=>r._promise(e,i,n)),{trans:r,transless:Ke.transless||Ke}):dt(this.db,e,[this.name],i)}finally{o&&Ue()}}get(e,t){return e&&e.constructor===Object?this.where(e).first(t):this._trans(\"readonly\",(t=>this.core.get({trans:t,key:e}).then((e=>this.hook.reading.fire(e))))).then(t)}where(e){if(\"string\"==typeof e)return new this.db.WhereClause(this,e);if(n(e))return new this.db.WhereClause(this,`[${e.join(\"+\")}]`);const r=t(e);if(1===r.length)return this.where(r[0]).equals(e[r[0]]);const s=this.schema.indexes.concat(this.schema.primKey).filter((e=>e.compound&&r.every((t=>e.keyPath.indexOf(t)>=0))&&e.keyPath.every((e=>r.indexOf(e)>=0))))[0];if(s&&this.db._maxKey!==ft)return this.where(s.name).equals(s.keyPath.map((t=>e[t])));!s&&R&&console.warn(`The query ${JSON.stringify(e)} on ${this.name} would benefit of a compound index [${r.join(\"+\")}]`);const{idxByName:i}=this.schema,o=this.db._deps.indexedDB;function a(e,t){try{return 0===o.cmp(e,t)}catch(e){return!1}}const[u,l]=r.reduce((([t,r],s)=>{const o=i[s],u=e[s];return[t||o,t||!o?_t(r,o&&o.multi?e=>{const t=b(e,s);return n(t)&&t.some((e=>a(u,e)))}:e=>a(u,b(e,s))):r]}),[null,null]);return u?this.where(u.name).equals(e[u.keyPath]).filter(l):s?this.filter(l):this.where(r).equals(\"\")}filter(e){return this.toCollection().and(e)}count(e){return this.toCollection().count(e)}offset(e){return this.toCollection().offset(e)}limit(e){return this.toCollection().limit(e)}each(e){return this.toCollection().each(e)}toArray(e){return this.toCollection().toArray(e)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(e){return new this.db.Collection(new this.db.WhereClause(this,n(e)?`[${e.join(\"+\")}]`:e))}reverse(){return this.toCollection().reverse()}mapToClass(e){const{db:t,name:n}=this;this.schema.mappedClass=e,e.prototype instanceof kt&&(e=class extends e{get db(){return t}table(){return n}});const r=new Set;for(let t=e.prototype;t;t=s(t))Object.getOwnPropertyNames(t).forEach((e=>r.add(e)));const i=t=>{if(!t)return t;const n=Object.create(e.prototype);for(let e in t)if(!r.has(e))try{n[e]=t[e]}catch(e){}return n};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=i,this.hook(\"reading\",i),e}defineClass(){return this.mapToClass((function(e){r(this,e)}))}add(e,t){const{auto:n,keyPath:r}=this.schema.primKey;let s=e;return r&&n&&(s=xt(r)(e)),this._trans(\"readwrite\",(e=>this.core.mutate({trans:e,type:\"add\",keys:null!=t?[t]:null,values:[s]}))).then((e=>e.numFailures?Ce.reject(e.failures[0]):e.lastResult)).then((t=>{if(r)try{_(e,r,t)}catch(e){}return t}))}update(e,r){if(\"object\"!=typeof e||n(e))return this.where(\":id\").equals(e).modify(r);{const n=b(e,this.schema.primKey.keyPath);if(void 0===n)return ht(new X.InvalidArgument(\"Given object does not contain its primary key\"));try{\"function\"!=typeof r?t(r).forEach((t=>{_(e,t,r[t])})):r(e,{value:e,primKey:n})}catch(e){}return this.where(\":id\").equals(n).modify(r)}}put(e,t){const{auto:n,keyPath:r}=this.schema.primKey;let s=e;return r&&n&&(s=xt(r)(e)),this._trans(\"readwrite\",(e=>this.core.mutate({trans:e,type:\"put\",values:[s],keys:null!=t?[t]:null}))).then((e=>e.numFailures?Ce.reject(e.failures[0]):e.lastResult)).then((t=>{if(r)try{_(e,r,t)}catch(e){}return t}))}delete(e){return this._trans(\"readwrite\",(t=>this.core.mutate({trans:t,type:\"delete\",keys:[e]}))).then((e=>e.numFailures?Ce.reject(e.failures[0]):void 0))}clear(){return this._trans(\"readwrite\",(e=>this.core.mutate({trans:e,type:\"deleteRange\",range:wt}))).then((e=>e.numFailures?Ce.reject(e.failures[0]):void 0))}bulkGet(e){return this._trans(\"readonly\",(t=>this.core.getMany({keys:e,trans:t}).then((e=>e.map((e=>this.hook.reading.fire(e)))))))}bulkAdd(e,t,n){const r=Array.isArray(t)?t:void 0,s=(n=n||(r?void 0:t))?n.allKeys:void 0;return this._trans(\"readwrite\",(t=>{const{auto:n,keyPath:i}=this.schema.primKey;if(i&&r)throw new X.InvalidArgument(\"bulkAdd(): keys argument invalid on tables with inbound keys\");if(r&&r.length!==e.length)throw new X.InvalidArgument(\"Arguments objects and keys must have the same length\");const o=e.length;let a=i&&n?e.map(xt(i)):e;return this.core.mutate({trans:t,type:\"add\",keys:r,values:a,wantResults:s}).then((({numFailures:e,results:t,lastResult:n,failures:r})=>{if(0===e)return s?t:n;throw new G(`${this.name}.bulkAdd(): ${e} of ${o} operations failed`,r)}))}))}bulkPut(e,t,n){const r=Array.isArray(t)?t:void 0,s=(n=n||(r?void 0:t))?n.allKeys:void 0;return this._trans(\"readwrite\",(t=>{const{auto:n,keyPath:i}=this.schema.primKey;if(i&&r)throw new X.InvalidArgument(\"bulkPut(): keys argument invalid on tables with inbound keys\");if(r&&r.length!==e.length)throw new X.InvalidArgument(\"Arguments objects and keys must have the same length\");const o=e.length;let a=i&&n?e.map(xt(i)):e;return this.core.mutate({trans:t,type:\"put\",keys:r,values:a,wantResults:s}).then((({numFailures:e,results:t,lastResult:n,failures:r})=>{if(0===e)return s?t:n;throw new G(`${this.name}.bulkPut(): ${e} of ${o} operations failed`,r)}))}))}bulkDelete(e){const t=e.length;return this._trans(\"readwrite\",(t=>this.core.mutate({trans:t,type:\"delete\",keys:e}))).then((({numFailures:e,lastResult:n,failures:r})=>{if(0===e)return n;throw new G(`${this.name}.bulkDelete(): ${e} of ${t} operations failed`,r)}))}}function Pt(e){var r={},s=function(t,n){if(n){for(var s=arguments.length,i=new Array(s-1);--s;)i[s-1]=arguments[s];return r[t].subscribe.apply(null,i),e}if(\"string\"==typeof t)return r[t]};s.addEventType=a;for(var i=1,o=arguments.length;i<o;++i)a(arguments[i]);return s;function a(e,t,n){if(\"object\"==typeof e)return u(e);t||(t=ae),n||(n=ee);var i={subscribers:[],fire:n,subscribe:function(e){-1===i.subscribers.indexOf(e)&&(i.subscribers.push(e),i.fire=t(i.fire,e))},unsubscribe:function(e){i.subscribers=i.subscribers.filter((function(t){return t!==e})),i.fire=i.subscribers.reduce(t,n)}};return r[e]=s[e]=i,i}function u(e){t(e).forEach((function(t){var r=e[t];if(n(r))a(t,e[t][0],e[t][1]);else{if(\"asap\"!==r)throw new X.InvalidArgument(\"Invalid event config\");var s=a(t,te,(function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];s.subscribers.forEach((function(e){v((function(){e.apply(null,t)}))}))}))}}))}}function Kt(e,t){return c(t).from({prototype:e}),t}function Ot(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function St(e,t){e.filter=_t(e.filter,t)}function At(e,t,n){var r=e.replayFilter;e.replayFilter=r?()=>_t(r(),t()):t,e.justLimit=n&&!r}function Ct(e,t){if(e.isPrimKey)return t.primaryKey;const n=t.getIndexByKeyPath(e.index);if(!n)throw new X.Schema(\"KeyPath \"+e.index+\" on object store \"+t.name+\" is not indexed\");return n}function jt(e,t,n){const r=Ct(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:\"prev\"===e.dir,unique:!!e.unique,query:{index:r,range:e.range}})}function Dt(e,t,n,r){const s=e.replayFilter?_t(e.filter,e.replayFilter()):e.filter;if(e.or){const i={},a=(e,n,r)=>{if(!s||s(n,r,(e=>n.stop(e)),(e=>n.fail(e)))){var a=n.primaryKey,u=\"\"+a;\"[object ArrayBuffer]\"===u&&(u=\"\"+new Uint8Array(a)),o(i,u)||(i[u]=!0,t(e,n,r))}};return Promise.all([e.or._iterate(a,n),It(jt(e,r,n),e.algorithm,a,!e.keysOnly&&e.valueMapper)])}return It(jt(e,r,n),_t(e.algorithm,s),t,!e.keysOnly&&e.valueMapper)}function It(e,t,n,r){var s=We(r?(e,t,s)=>n(r(e),t,s):n);return e.then((e=>{if(e)return e.start((()=>{var n=()=>e.continue();t&&!t(e,(e=>n=e),(t=>{e.stop(t),n=ee}),(t=>{e.fail(t),n=ee}))||s(e.value,e,(e=>n=e)),n()}))}))}function Bt(e,t){try{const n=Tt(e),r=Tt(t);if(n!==r)return\"Array\"===n?1:\"Array\"===r?-1:\"binary\"===n?1:\"binary\"===r?-1:\"string\"===n?1:\"string\"===r?-1:\"Date\"===n?1:\"Date\"!==r?NaN:-1;switch(n){case\"number\":case\"Date\":case\"string\":return e>t?1:e<t?-1:0;case\"binary\":return function(e,t){const n=e.length,r=t.length,s=n<r?n:r;for(let n=0;n<s;++n)if(e[n]!==t[n])return e[n]<t[n]?-1:1;return n===r?0:n<r?-1:1}(Rt(e),Rt(t));case\"Array\":return function(e,t){const n=e.length,r=t.length,s=n<r?n:r;for(let n=0;n<s;++n){const r=Bt(e[n],t[n]);if(0!==r)return r}return n===r?0:n<r?-1:1}(e,t)}}catch(e){}return NaN}function Tt(e){const t=typeof e;if(\"object\"!==t)return t;if(ArrayBuffer.isView(e))return\"binary\";const n=C(e);return\"ArrayBuffer\"===n?\"binary\":n}function Rt(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}class Ft{_read(e,t){var n=this._ctx;return n.error?n.table._trans(null,ht.bind(null,n.error)):n.table._trans(\"readonly\",e).then(t)}_write(e){var t=this._ctx;return t.error?t.table._trans(null,ht.bind(null,t.error)):t.table._trans(\"readwrite\",e,\"locked\")}_addAlgorithm(e){var t=this._ctx;t.algorithm=_t(t.algorithm,e)}_iterate(e,t){return Dt(this._ctx,e,t,this._ctx.table.core)}clone(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&r(n,e),t._ctx=n,t}raw(){return this._ctx.valueMapper=null,this}each(e){var t=this._ctx;return this._read((n=>Dt(t,e,n,t.table.core)))}count(e){return this._read((e=>{const t=this._ctx,n=t.table.core;if(Ot(t,!0))return n.count({trans:e,query:{index:Ct(t,n.schema),range:t.range}}).then((e=>Math.min(e,t.limit)));var r=0;return Dt(t,(()=>(++r,!1)),e,n).then((()=>r))})).then(e)}sortBy(e,t){const n=e.split(\".\").reverse(),r=n[0],s=n.length-1;function i(e,t){return t?i(e[n[t]],t-1):e[r]}var o=\"next\"===this._ctx.dir?1:-1;function a(e,t){var n=i(e,s),r=i(t,s);return n<r?-o:n>r?o:0}return this.toArray((function(e){return e.sort(a)})).then(t)}toArray(e){return this._read((e=>{var t=this._ctx;if(\"next\"===t.dir&&Ot(t,!0)&&t.limit>0){const{valueMapper:n}=t,r=Ct(t,t.table.core.schema);return t.table.core.query({trans:e,limit:t.limit,values:!0,query:{index:r,range:t.range}}).then((({result:e})=>n?e.map(n):e))}{const n=[];return Dt(t,(e=>n.push(e)),e,t.table.core).then((()=>n))}}),e)}offset(e){var t=this._ctx;return e<=0||(t.offset+=e,Ot(t)?At(t,(()=>{var t=e;return(e,n)=>0===t||(1===t?(--t,!1):(n((()=>{e.advance(t),t=0})),!1))})):At(t,(()=>{var t=e;return()=>--t<0}))),this}limit(e){return this._ctx.limit=Math.min(this._ctx.limit,e),At(this._ctx,(()=>{var t=e;return function(e,n,r){return--t<=0&&n(r),t>=0}}),!0),this}until(e,t){return St(this._ctx,(function(n,r,s){return!e(n.value)||(r(s),t)})),this}first(e){return this.limit(1).toArray((function(e){return e[0]})).then(e)}last(e){return this.reverse().first(e)}filter(e){var t,n;return St(this._ctx,(function(t){return e(t.value)})),t=this._ctx,n=e,t.isMatch=_t(t.isMatch,n),this}and(e){return this.filter(e)}or(e){return new this.db.WhereClause(this._ctx.table,e,this)}reverse(){return this._ctx.dir=\"prev\"===this._ctx.dir?\"next\":\"prev\",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.key,n)}))}eachUniqueKey(e){return this._ctx.unique=\"unique\",this.eachKey(e)}eachPrimaryKey(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.primaryKey,n)}))}keys(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.key)})).then((function(){return n})).then(e)}primaryKeys(e){var t=this._ctx;if(\"next\"===t.dir&&Ot(t,!0)&&t.limit>0)return this._read((e=>{var n=Ct(t,t.table.core.schema);return t.table.core.query({trans:e,values:!1,limit:t.limit,query:{index:n,range:t.range}})})).then((({result:e})=>e)).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.primaryKey)})).then((function(){return n})).then(e)}uniqueKeys(e){return this._ctx.unique=\"unique\",this.keys(e)}firstKey(e){return this.limit(1).keys((function(e){return e[0]})).then(e)}lastKey(e){return this.reverse().firstKey(e)}distinct(){var e=this._ctx,t=e.index&&e.table.schema.idxByName[e.index];if(!t||!t.multi)return this;var n={};return St(this._ctx,(function(e){var t=e.primaryKey.toString(),r=o(n,t);return n[t]=!0,!r})),this}modify(e){var n=this._ctx;return this._write((r=>{var s;if(\"function\"==typeof e)s=e;else{var i=t(e),o=i.length;s=function(t){for(var n=!1,r=0;r<o;++r){var s=i[r],a=e[s];b(t,s)!==a&&(_(t,s,a),n=!0)}return n}}const a=n.table.core,{outbound:u,extractKey:l}=a.schema.primaryKey,c=this.db._options.modifyChunkSize||200,h=[];let d=0;const f=[],p=(e,n)=>{const{failures:r,numFailures:s}=n;d+=e-s;for(let e of t(r))h.push(r[e])};return this.clone().primaryKeys().then((t=>{const i=o=>{const h=Math.min(c,t.length-o);return a.getMany({trans:r,keys:t.slice(o,o+h),cache:\"immutable\"}).then((d=>{const f=[],y=[],m=u?[]:null,v=[];for(let e=0;e<h;++e){const n=d[e],r={value:O(n),primKey:t[o+e]};!1!==s.call(r,r.value,r)&&(null==r.value?v.push(t[o+e]):u||0===Bt(l(n),l(r.value))?(y.push(r.value),u&&m.push(t[o+e])):(v.push(t[o+e]),f.push(r.value)))}const g=Ot(n)&&n.limit===1/0&&(\"function\"!=typeof e||e===Mt)&&{index:n.index,range:n.range};return Promise.resolve(f.length>0&&a.mutate({trans:r,type:\"add\",values:f}).then((e=>{for(let t in e.failures)v.splice(parseInt(t),1);p(f.length,e)}))).then((()=>(y.length>0||g&&\"object\"==typeof e)&&a.mutate({trans:r,type:\"put\",keys:m,values:y,criteria:g,changeSpec:\"function\"!=typeof e&&e}).then((e=>p(y.length,e))))).then((()=>(v.length>0||g&&e===Mt)&&a.mutate({trans:r,type:\"delete\",keys:v,criteria:g}).then((e=>p(v.length,e))))).then((()=>t.length>o+h&&i(o+c)))}))};return i(0).then((()=>{if(h.length>0)throw new z(\"Error modifying one or more objects\",h,d,f);return t.length}))}))}))}delete(){var e=this._ctx,t=e.range;return Ot(e)&&(e.isPrimKey&&!gt||3===t.type)?this._write((n=>{const{primaryKey:r}=e.table.core.schema,s=t;return e.table.core.count({trans:n,query:{index:r,range:s}}).then((t=>e.table.core.mutate({trans:n,type:\"deleteRange\",range:s}).then((({failures:e,lastResult:n,results:r,numFailures:s})=>{if(s)throw new z(\"Could not delete some values\",Object.keys(e).map((t=>e[t])),t-s);return t-s}))))})):this.modify(Mt)}}const Mt=(e,t)=>t.value=null;function Nt(e,t){return e<t?-1:e===t?0:1}function qt(e,t){return e>t?-1:e===t?0:1}function $t(e,t,n){var r=e instanceof zt?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function Ut(e){return new e.Collection(e,(()=>Yt(\"\"))).limit(0)}function Lt(e,t,n,r,s,i){for(var o=Math.min(e.length,r.length),a=-1,u=0;u<o;++u){var l=t[u];if(l!==r[u])return s(e[u],n[u])<0?e.substr(0,u)+n[u]+n.substr(u+1):s(e[u],r[u])<0?e.substr(0,u)+r[u]+n.substr(u+1):a>=0?e.substr(0,a)+t[a]+n.substr(a+1):null;s(e[u],l)<0&&(a=u)}return o<r.length&&\"next\"===i?e+n.substr(e.length):o<e.length&&\"prev\"===i?e.substr(0,n.length):a<0?null:e.substr(0,a)+r[a]+n.substr(a+1)}function Vt(e,t,n,r){var s,i,o,a,u,l,c,h=n.length;if(!n.every((e=>\"string\"==typeof e)))return $t(e,\"String expected.\");function d(e){s=function(e){return\"next\"===e?e=>e.toUpperCase():e=>e.toLowerCase()}(e),i=function(e){return\"next\"===e?e=>e.toLowerCase():e=>e.toUpperCase()}(e),o=\"next\"===e?Nt:qt;var t=n.map((function(e){return{lower:i(e),upper:s(e)}})).sort((function(e,t){return o(e.lower,t.lower)}));a=t.map((function(e){return e.upper})),u=t.map((function(e){return e.lower})),l=e,c=\"next\"===e?\"\":r}d(\"next\");var f=new e.Collection(e,(()=>Wt(a[0],u[h-1]+r)));f._ondirectionchange=function(e){d(e)};var p=0;return f._addAlgorithm((function(e,n,r){var s=e.key;if(\"string\"!=typeof s)return!1;var d=i(s);if(t(d,u,p))return!0;for(var f=null,y=p;y<h;++y){var m=Lt(s,d,a[y],u[y],o,l);null===m&&null===f?p=y+1:(null===f||o(f,m)>0)&&(f=m)}return n(null!==f?function(){e.continue(f+c)}:r),!1})),f}function Wt(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function Yt(e){return{type:1,lower:e,upper:e}}class zt{get Collection(){return this._ctx.table.db.Collection}between(e,t,n,r){n=!1!==n,r=!0===r;try{return this._cmp(e,t)>0||0===this._cmp(e,t)&&(n||r)&&(!n||!r)?Ut(this):new this.Collection(this,(()=>Wt(e,t,!n,!r)))}catch(e){return $t(this,pt)}}equals(e){return null==e?$t(this,pt):new this.Collection(this,(()=>Yt(e)))}above(e){return null==e?$t(this,pt):new this.Collection(this,(()=>Wt(e,void 0,!0)))}aboveOrEqual(e){return null==e?$t(this,pt):new this.Collection(this,(()=>Wt(e,void 0,!1)))}below(e){return null==e?$t(this,pt):new this.Collection(this,(()=>Wt(void 0,e,!1,!0)))}belowOrEqual(e){return null==e?$t(this,pt):new this.Collection(this,(()=>Wt(void 0,e)))}startsWith(e){return\"string\"!=typeof e?$t(this,\"String expected.\"):this.between(e,e+ft,!0,!0)}startsWithIgnoreCase(e){return\"\"===e?this.startsWith(e):Vt(this,((e,t)=>0===e.indexOf(t[0])),[e],ft)}equalsIgnoreCase(e){return Vt(this,((e,t)=>e===t[0]),[e],\"\")}anyOfIgnoreCase(){var e=B.apply(I,arguments);return 0===e.length?Ut(this):Vt(this,((e,t)=>-1!==t.indexOf(e)),e,\"\")}startsWithAnyOfIgnoreCase(){var e=B.apply(I,arguments);return 0===e.length?Ut(this):Vt(this,((e,t)=>t.some((t=>0===e.indexOf(t)))),e,ft)}anyOf(){const e=B.apply(I,arguments);let t=this._cmp;try{e.sort(t)}catch(e){return $t(this,pt)}if(0===e.length)return Ut(this);const n=new this.Collection(this,(()=>Wt(e[0],e[e.length-1])));n._ondirectionchange=n=>{t=\"next\"===n?this._ascending:this._descending,e.sort(t)};let r=0;return n._addAlgorithm(((n,s,i)=>{const o=n.key;for(;t(o,e[r])>0;)if(++r,r===e.length)return s(i),!1;return 0===t(o,e[r])||(s((()=>{n.continue(e[r])})),!1)})),n}notEqual(e){return this.inAnyRange([[-(1/0),e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const e=B.apply(I,arguments);if(0===e.length)return new this.Collection(this);try{e.sort(this._ascending)}catch(e){return $t(this,pt)}const t=e.reduce(((e,t)=>e?e.concat([[e[e.length-1][1],t]]):[[-(1/0),t]]),null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})}inAnyRange(e,t){const n=this._cmp,r=this._ascending,s=this._descending,i=this._min,o=this._max;if(0===e.length)return Ut(this);if(!e.every((e=>void 0!==e[0]&&void 0!==e[1]&&r(e[0],e[1])<=0)))return $t(this,\"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower\",X.InvalidArgument);const a=!t||!1!==t.includeLowers,u=t&&!0===t.includeUppers;let l,c=r;function h(e,t){return c(e[0],t[0])}try{l=e.reduce((function(e,t){let r=0,s=e.length;for(;r<s;++r){const s=e[r];if(n(t[0],s[1])<0&&n(t[1],s[0])>0){s[0]=i(s[0],t[0]),s[1]=o(s[1],t[1]);break}}return r===s&&e.push(t),e}),[]),l.sort(h)}catch(e){return $t(this,pt)}let d=0;const f=u?e=>r(e,l[d][1])>0:e=>r(e,l[d][1])>=0,p=a?e=>s(e,l[d][0])>0:e=>s(e,l[d][0])>=0;let y=f;const m=new this.Collection(this,(()=>Wt(l[0][0],l[l.length-1][1],!a,!u)));return m._ondirectionchange=e=>{\"next\"===e?(y=f,c=r):(y=p,c=s),l.sort(h)},m._addAlgorithm(((e,t,n)=>{for(var s=e.key;y(s);)if(++d,d===l.length)return t(n),!1;return!!function(e){return!f(e)&&!p(e)}(s)||(0===this._cmp(s,l[d][1])||0===this._cmp(s,l[d][0])||t((()=>{c===r?e.continue(l[d][0]):e.continue(l[d][1])})),!1)})),m}startsWithAnyOf(){const e=B.apply(I,arguments);return e.every((e=>\"string\"==typeof e))?0===e.length?Ut(this):this.inAnyRange(e.map((e=>[e,e+ft]))):$t(this,\"startsWithAnyOf() only works with strings\")}}function Gt(e){return We((function(t){return Ht(t),e(t.target.error),!1}))}function Ht(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}const Qt=Pt(null,\"storagemutated\");class Xt{_lock(){return m(!Ke.global),++this._reculock,1!==this._reculock||Ke.global||(Ke.lockOwnerFor=this),this}_unlock(){if(m(!Ke.global),0==--this._reculock)for(Ke.global||(Ke.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{ot(e[1],e[0])}catch(e){}}return this}_locked(){return this._reculock&&Ke.lockOwnerFor!==this}create(e){if(!this.mode)return this;const t=this.db.idbdb,n=this.db._state.dbOpenError;if(m(!this.idbtrans),!e&&!t)switch(n&&n.name){case\"DatabaseClosedError\":throw new X.DatabaseClosed(n);case\"MissingAPIError\":throw new X.MissingAPI(n.message,n);default:throw new X.OpenFailed(n)}if(!this.active)throw new X.TransactionInactive;return m(null===this._completion._state),(e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):t.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=We((t=>{Ht(t),this._reject(e.error)})),e.onabort=We((t=>{Ht(t),this.active&&this._reject(new X.Abort(e.error)),this.active=!1,this.on(\"abort\").fire(t)})),e.oncomplete=We((()=>{this.active=!1,this._resolve(),\"mutatedParts\"in e&&Qt.storagemutated.fire(e.mutatedParts)})),this}_promise(e,t,n){if(\"readwrite\"===e&&\"readwrite\"!==this.mode)return ht(new X.ReadOnly(\"Transaction is readonly\"));if(!this.active)return ht(new X.TransactionInactive);if(this._locked())return new Ce(((r,s)=>{this._blockedFuncs.push([()=>{this._promise(e,t,n).then(r,s)},Ke])}));if(n)return Je((()=>{var e=new Ce(((e,n)=>{this._lock();const r=t(e,n,this);r&&r.then&&r.then(e,n)}));return e.finally((()=>this._unlock())),e._lib=!0,e}));var r=new Ce(((e,n)=>{var r=t(e,n,this);r&&r.then&&r.then(e,n)}));return r._lib=!0,r}_root(){return this.parent?this.parent._root():this}waitFor(e){var t=this._root();const n=Ce.resolve(e);if(t._waitingFor)t._waitingFor=t._waitingFor.then((()=>n));else{t._waitingFor=n,t._waitingQueue=[];var r=t.idbtrans.objectStore(t.storeNames[0]);!function e(){for(++t._spinCount;t._waitingQueue.length;)t._waitingQueue.shift()();t._waitingFor&&(r.get(-1/0).onsuccess=e)}()}var s=t._waitingFor;return new Ce(((e,r)=>{n.then((n=>t._waitingQueue.push(We(e.bind(null,n)))),(e=>t._waitingQueue.push(We(r.bind(null,e))))).finally((()=>{t._waitingFor===s&&(t._waitingFor=null)}))}))}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new X.Abort))}table(e){const t=this._memoizedTables||(this._memoizedTables={});if(o(t,e))return t[e];const n=this.schema[e];if(!n)throw new X.NotFound(\"Table \"+e+\" not part of transaction\");const r=new this.db.Table(e,n,this);return r.core=this.db.core.table(e),t[e]=r,r}}function Jt(e,t,n,r,s,i,o){return{name:e,keyPath:t,unique:n,multi:r,auto:s,compound:i,src:(n&&!o?\"&\":\"\")+(r?\"*\":\"\")+(s?\"++\":\"\")+Zt(t)}}function Zt(e){return\"string\"==typeof e?e:e?\"[\"+[].join.call(e,\"+\")+\"]\":\"\"}function en(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:g(n,(e=>[e.name,e]))}}let tn=e=>{try{return e.only([[]]),tn=()=>[[]],[[]]}catch(e){return tn=()=>ft,ft}};function nn(e){return null==e?()=>{}:\"string\"==typeof e?function(e){return 1===e.split(\".\").length?t=>t[e]:t=>b(t,e)}(e):t=>b(t,e)}function rn(e){return[].slice.call(e)}let sn=0;function on(e){return null==e?\":id\":\"string\"==typeof e?e:`[${e.join(\"+\")}]`}function an(e,t,r){function s(e){if(3===e.type)return null;if(4===e.type)throw new Error(\"Cannot convert never type to IDBKeyRange\");const{lower:n,upper:r,lowerOpen:s,upperOpen:i}=e;return void 0===n?void 0===r?null:t.upperBound(r,!!i):void 0===r?t.lowerBound(n,!!s):t.bound(n,r,!!s,!!i)}const{schema:i,hasGetAll:o}=function(e,t){const r=rn(e.objectStoreNames);return{schema:{name:e.name,tables:r.map((e=>t.objectStore(e))).map((e=>{const{keyPath:t,autoIncrement:r}=e,s=n(t),i=null==t,o={},a={name:e.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:i,compound:s,keyPath:t,autoIncrement:r,unique:!0,extractKey:nn(t)},indexes:rn(e.indexNames).map((t=>e.index(t))).map((e=>{const{name:t,unique:r,multiEntry:s,keyPath:i}=e,a={name:t,compound:n(i),keyPath:i,unique:r,multiEntry:s,extractKey:nn(i)};return o[on(i)]=a,a})),getIndexByKeyPath:e=>o[on(e)]};return o[\":id\"]=a.primaryKey,null!=t&&(o[on(t)]=a.primaryKey),a}))},hasGetAll:r.length>0&&\"getAll\"in t.objectStore(r[0])&&!(\"undefined\"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\\/|Edge\\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\\/(\\d*)/))[1]<604)}}(e,r),a=i.tables.map((e=>function(e){const t=e.name;return{name:t,schema:e,mutate:function({trans:e,type:n,keys:r,values:i,range:o}){return new Promise(((a,u)=>{a=We(a);const l=e.objectStore(t),c=null==l.keyPath,h=\"put\"===n||\"add\"===n;if(!h&&\"delete\"!==n&&\"deleteRange\"!==n)throw new Error(\"Invalid operation type: \"+n);const{length:d}=r||i||{length:1};if(r&&i&&r.length!==i.length)throw new Error(\"Given keys array must have same length as given values array.\");if(0===d)return a({numFailures:0,failures:{},results:[],lastResult:void 0});let f;const p=[],y=[];let m=0;const v=e=>{++m,Ht(e)};if(\"deleteRange\"===n){if(4===o.type)return a({numFailures:m,failures:y,results:[],lastResult:void 0});3===o.type?p.push(f=l.clear()):p.push(f=l.delete(s(o)))}else{const[e,t]=h?c?[i,r]:[i,null]:[r,null];if(h)for(let r=0;r<d;++r)p.push(f=t&&void 0!==t[r]?l[n](e[r],t[r]):l[n](e[r])),f.onerror=v;else for(let t=0;t<d;++t)p.push(f=l[n](e[t])),f.onerror=v}const g=e=>{const t=e.target.result;p.forEach(((e,t)=>null!=e.error&&(y[t]=e.error))),a({numFailures:m,failures:y,results:\"delete\"===n?r:p.map((e=>e.result)),lastResult:t})};f.onerror=e=>{v(e),g(e)},f.onsuccess=g}))},getMany:({trans:e,keys:n})=>new Promise(((r,s)=>{r=We(r);const i=e.objectStore(t),o=n.length,a=new Array(o);let u,l=0,c=0;const h=e=>{const t=e.target;a[t._pos]=t.result,++c===l&&r(a)},d=Gt(s);for(let e=0;e<o;++e)null!=n[e]&&(u=i.get(n[e]),u._pos=e,u.onsuccess=h,u.onerror=d,++l);0===l&&r(a)})),get:({trans:e,key:n})=>new Promise(((r,s)=>{r=We(r);const i=e.objectStore(t).get(n);i.onsuccess=e=>r(e.target.result),i.onerror=Gt(s)})),query:function(e){return n=>new Promise(((r,i)=>{r=We(r);const{trans:o,values:a,limit:u,query:l}=n,c=u===1/0?void 0:u,{index:h,range:d}=l,f=o.objectStore(t),p=h.isPrimaryKey?f:f.index(h.name),y=s(d);if(0===u)return r({result:[]});if(e){const e=a?p.getAll(y,c):p.getAllKeys(y,c);e.onsuccess=e=>r({result:e.target.result}),e.onerror=Gt(i)}else{let e=0;const t=a||!(\"openKeyCursor\"in p)?p.openCursor(y):p.openKeyCursor(y),n=[];t.onsuccess=s=>{const i=t.result;return i?(n.push(a?i.value:i.primaryKey),++e===u?r({result:n}):void i.continue()):r({result:n})},t.onerror=Gt(i)}}))}(o),openCursor:function({trans:e,values:n,query:r,reverse:i,unique:o}){return new Promise(((a,u)=>{a=We(a);const{index:l,range:c}=r,h=e.objectStore(t),d=l.isPrimaryKey?h:h.index(l.name),f=i?o?\"prevunique\":\"prev\":o?\"nextunique\":\"next\",p=n||!(\"openKeyCursor\"in d)?d.openCursor(s(c),f):d.openKeyCursor(s(c),f);p.onerror=Gt(u),p.onsuccess=We((t=>{const n=p.result;if(!n)return void a(null);n.___id=++sn,n.done=!1;const r=n.continue.bind(n);let s=n.continuePrimaryKey;s&&(s=s.bind(n));const i=n.advance.bind(n),o=()=>{throw new Error(\"Cursor not stopped\")};n.trans=e,n.stop=n.continue=n.continuePrimaryKey=n.advance=()=>{throw new Error(\"Cursor not started\")},n.fail=We(u),n.next=function(){let e=1;return this.start((()=>e--?this.continue():this.stop())).then((()=>this))},n.start=e=>{const t=new Promise(((e,t)=>{e=We(e),p.onerror=Gt(t),n.fail=t,n.stop=t=>{n.stop=n.continue=n.continuePrimaryKey=n.advance=o,e(t)}})),a=()=>{if(p.result)try{e()}catch(e){n.fail(e)}else n.done=!0,n.start=()=>{throw new Error(\"Cursor behind last entry\")},n.stop()};return p.onsuccess=We((e=>{p.onsuccess=a,a()})),n.continue=r,n.continuePrimaryKey=s,n.advance=i,a(),t},a(n)}),u)}))},count({query:e,trans:n}){const{index:r,range:i}=e;return new Promise(((e,o)=>{const a=n.objectStore(t),u=r.isPrimaryKey?a:a.index(r.name),l=s(i),c=l?u.count(l):u.count();c.onsuccess=We((t=>e(t.target.result))),c.onerror=Gt(o)}))}}}(e))),u={};return a.forEach((e=>u[e.name]=e)),{stack:\"dbcore\",transaction:e.transaction.bind(e),table(e){if(!u[e])throw new Error(`Table '${e}' not found`);return u[e]},MIN_KEY:-1/0,MAX_KEY:tn(t),schema:i}}function un({_novip:e},t){const n=t.db,r=function(e,t,{IDBKeyRange:n,indexedDB:r},s){const i=function(e,t){return t.reduce(((e,{create:t})=>({...e,...t(e)})),e)}(an(t,n,s),e.dbcore);return{dbcore:i}}(e._middlewares,n,e._deps,t);e.core=r.dbcore,e.tables.forEach((t=>{const n=t.name;e.core.schema.tables.some((e=>e.name===n))&&(t.core=e.core.table(n),e[n]instanceof e.Table&&(e[n].core=t.core))}))}function ln({_novip:e},t,n,r){n.forEach((n=>{const s=r[n];t.forEach((t=>{const r=d(t,n);(!r||\"value\"in r&&void 0===r.value)&&(t===e.Transaction.prototype||t instanceof e.Transaction?l(t,n,{get(){return this.table(n)},set(e){u(this,n,{value:e,writable:!0,configurable:!0,enumerable:!0})}}):t[n]=new e.Table(n,s))}))}))}function cn({_novip:e},t){t.forEach((t=>{for(let n in t)t[n]instanceof e.Table&&delete t[n]}))}function hn(e,t){return e._cfg.version-t._cfg.version}function dn(e,n,r,s){const i=e._dbSchema,o=e._createTransaction(\"readwrite\",e._storeNames,i);o.create(r),o._completion.catch(s);const a=o._reject.bind(o),u=Ke.transless||Ke;Je((()=>{Ke.trans=o,Ke.transless=u,0===n?(t(i).forEach((e=>{pn(r,e,i[e].primKey,i[e].indexes)})),un(e,r),Ce.follow((()=>e.on.populate.fire(o))).catch(a)):function({_novip:e},n,r,s){const i=[],o=e._versions;let a=e._dbSchema=mn(e,e.idbdb,s),u=!1;function l(){return i.length?Ce.resolve(i.shift()(r.idbtrans)).then(l):Ce.resolve()}return o.filter((e=>e._cfg.version>=n)).forEach((o=>{i.push((()=>{const i=a,l=o._cfg.dbschema;vn(e,i,s),vn(e,l,s),a=e._dbSchema=l;const c=fn(i,l);c.add.forEach((e=>{pn(s,e[0],e[1].primKey,e[1].indexes)})),c.change.forEach((e=>{if(e.recreate)throw new X.Upgrade(\"Not yet support for changing primary key\");{const t=s.objectStore(e.name);e.add.forEach((e=>yn(t,e))),e.change.forEach((e=>{t.deleteIndex(e.name),yn(t,e)})),e.del.forEach((e=>t.deleteIndex(e)))}}));const h=o._cfg.contentUpgrade;if(h&&o._cfg.version>n){un(e,s),r._memoizedTables={},u=!0;let n=w(l);c.del.forEach((e=>{n[e]=i[e]})),cn(e,[e.Transaction.prototype]),ln(e,[e.Transaction.prototype],t(n),n),r.schema=n;const o=T(h);let a;o&&Ze();const d=Ce.follow((()=>{if(a=h(r),a&&o){var e=et.bind(null,null);a.then(e,e)}}));return a&&\"function\"==typeof a.then?Ce.resolve(a):d.then((()=>a))}})),i.push((t=>{if(!u||!vt){!function(e,t){[].slice.call(t.db.objectStoreNames).forEach((n=>null==e[n]&&t.db.deleteObjectStore(n)))}(o._cfg.dbschema,t)}cn(e,[e.Transaction.prototype]),ln(e,[e.Transaction.prototype],e._storeNames,e._dbSchema),r.schema=e._dbSchema}))})),l().then((()=>{var e,n;n=s,t(e=a).forEach((t=>{n.db.objectStoreNames.contains(t)||pn(n,t,e[t].primKey,e[t].indexes)}))}))}(e,n,o,r).catch(a)}))}function fn(e,t){const n={del:[],add:[],change:[]};let r;for(r in e)t[r]||n.del.push(r);for(r in t){const s=e[r],i=t[r];if(s){const e={name:r,def:i,recreate:!1,del:[],add:[],change:[]};if(\"\"+(s.primKey.keyPath||\"\")!=\"\"+(i.primKey.keyPath||\"\")||s.primKey.auto!==i.primKey.auto&&!mt)e.recreate=!0,n.change.push(e);else{const t=s.idxByName,r=i.idxByName;let o;for(o in t)r[o]||e.del.push(o);for(o in r){const n=t[o],s=r[o];n?n.src!==s.src&&e.change.push(s):e.add.push(s)}(e.del.length>0||e.add.length>0||e.change.length>0)&&n.change.push(e)}}else n.add.push([r,i])}return n}function pn(e,t,n,r){const s=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach((e=>yn(s,e))),s}function yn(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function mn(e,t,n){const r={};return p(t.objectStoreNames,0).forEach((e=>{const t=n.objectStore(e);let s=t.keyPath;const i=Jt(Zt(s),s||\"\",!1,!1,!!t.autoIncrement,s&&\"string\"!=typeof s,!0),o=[];for(let e=0;e<t.indexNames.length;++e){const n=t.index(t.indexNames[e]);s=n.keyPath;var a=Jt(n.name,s,!!n.unique,!!n.multiEntry,!1,s&&\"string\"!=typeof s,!1);o.push(a)}r[e]=en(e,i,o)})),r}function vn({_novip:t},n,r){const s=r.db.objectStoreNames;for(let e=0;e<s.length;++e){const i=s[e],o=r.objectStore(i);t._hasGetAll=\"getAll\"in o;for(let e=0;e<o.indexNames.length;++e){const t=o.indexNames[e],r=o.index(t).keyPath,s=\"string\"==typeof r?r:\"[\"+p(r).join(\"+\")+\"]\";if(n[i]){const e=n[i].idxByName[s];e&&(e.name=t,delete n[i].idxByName[s],n[i].idxByName[t]=e)}}}\"undefined\"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\\/|Edge\\/)/.test(navigator.userAgent)&&e.WorkerGlobalScope&&e instanceof e.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\\/(\\d*)/))[1]<604&&(t._hasGetAll=!1)}class gn{_parseStoresSpec(e,r){t(e).forEach((t=>{if(null!==e[t]){var s=e[t].split(\",\").map(((e,t)=>{const r=(e=e.trim()).replace(/([&*]|\\+\\+)/g,\"\"),s=/^\\[/.test(r)?r.match(/^\\[(.*)\\]$/)[1].split(\"+\"):r;return Jt(r,s||null,/\\&/.test(e),/\\*/.test(e),/\\+\\+/.test(e),n(s),0===t)})),i=s.shift();if(i.multi)throw new X.Schema(\"Primary key cannot be multi-valued\");s.forEach((e=>{if(e.auto)throw new X.Schema(\"Only primary key can be marked as autoIncrement (++)\");if(!e.keyPath)throw new X.Schema(\"Index must have a name and cannot be an empty string\")})),r[t]=en(t,i,s)}}))}stores(e){const n=this.db;this._cfg.storesSource=this._cfg.storesSource?r(this._cfg.storesSource,e):e;const s=n._versions,i={};let o={};return s.forEach((e=>{r(i,e._cfg.storesSource),o=e._cfg.dbschema={},e._parseStoresSpec(i,o)})),n._dbSchema=o,cn(n,[n._allTables,n,n.Transaction.prototype]),ln(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],t(o),o),n._storeNames=t(o),this}upgrade(e){return this._cfg.contentUpgrade=ue(this._cfg.contentUpgrade||ee,e),this}}function bn(e,t){let n=e._dbNamesDB;return n||(n=e._dbNamesDB=new Un(\"__dbnames\",{addons:[],indexedDB:e,IDBKeyRange:t}),n.version(1).stores({dbnames:\"name\"})),n.table(\"dbnames\")}function _n(e){return e&&\"function\"==typeof e.databases}function wn(e){return Je((function(){return Ke.letThrough=!0,e()}))}function xn(){var e;return!navigator.userAgentData&&/Safari\\//.test(navigator.userAgent)&&!/Chrom(e|ium)\\//.test(navigator.userAgent)&&indexedDB.databases?new Promise((function(t){var n=function(){return indexedDB.databases().finally(t)};e=setInterval(n,100),n()})).finally((function(){return clearInterval(e)})):Promise.resolve()}function kn(e){const n=e._state,{indexedDB:r}=e._deps;if(n.isBeingOpened||e.idbdb)return n.dbReadyPromise.then((()=>n.dbOpenError?ht(n.dbOpenError):e));R&&(n.openCanceller._stackHolder=q()),n.isBeingOpened=!0,n.dbOpenError=null,n.openComplete=!1;const s=n.openCanceller;function i(){if(n.openCanceller!==s)throw new X.DatabaseClosed(\"db.open() was cancelled\")}let o=n.dbReadyResolve,a=null,u=!1;return Ce.race([s,(\"undefined\"==typeof navigator?Ce.resolve():xn()).then((()=>new Ce(((s,o)=>{if(i(),!r)throw new X.MissingAPI;const l=e.name,c=n.autoSchema?r.open(l):r.open(l,Math.round(10*e.verno));if(!c)throw new X.MissingAPI;c.onerror=Gt(o),c.onblocked=We(e._fireOnBlocked),c.onupgradeneeded=We((t=>{if(a=c.transaction,n.autoSchema&&!e._options.allowEmptyDB){c.onerror=Ht,a.abort(),c.result.close();const e=r.deleteDatabase(l);e.onsuccess=e.onerror=We((()=>{o(new X.NoSuchDatabase(`Database ${l} doesnt exist`))}))}else{a.onerror=Gt(o);var s=t.oldVersion>Math.pow(2,62)?0:t.oldVersion;u=s<1,e._novip.idbdb=c.result,dn(e,s/10,a,o)}}),o),c.onsuccess=We((()=>{a=null;const r=e._novip.idbdb=c.result,i=p(r.objectStoreNames);if(i.length>0)try{const s=r.transaction(1===(o=i).length?o[0]:o,\"readonly\");n.autoSchema?function({_novip:e},n,r){e.verno=n.version/10;const s=e._dbSchema=mn(0,n,r);e._storeNames=p(n.objectStoreNames,0),ln(e,[e._allTables],t(s),s)}(e,r,s):(vn(e,e._dbSchema,s),function(e,t){const n=fn(mn(0,e.idbdb,t),e._dbSchema);return!(n.add.length||n.change.some((e=>e.add.length||e.change.length)))}(e,s)||console.warn(\"Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.\")),un(e,s)}catch(e){}var o;yt.push(e),r.onversionchange=We((t=>{n.vcFired=!0,e.on(\"versionchange\").fire(t)})),r.onclose=We((t=>{e.on(\"close\").fire(t)})),u&&function({indexedDB:e,IDBKeyRange:t},n){!_n(e)&&\"__dbnames\"!==n&&bn(e,t).put({name:n}).catch(ee)}(e._deps,l),s()}),o)}))))]).then((()=>(i(),n.onReadyBeingFired=[],Ce.resolve(wn((()=>e.on.ready.fire(e.vip)))).then((function t(){if(n.onReadyBeingFired.length>0){let r=n.onReadyBeingFired.reduce(ue,ee);return n.onReadyBeingFired=[],Ce.resolve(wn((()=>r(e.vip)))).then(t)}}))))).finally((()=>{n.onReadyBeingFired=null,n.isBeingOpened=!1})).then((()=>e)).catch((t=>{n.dbOpenError=t;try{a&&a.abort()}catch(e){}return s===n.openCanceller&&e._close(),ht(t)})).finally((()=>{n.openComplete=!0,o()}))}function En(e){var t=t=>e.next(t),r=i(t),s=i((t=>e.throw(t)));function i(e){return t=>{var i=e(t),o=i.value;return i.done?o:o&&\"function\"==typeof o.then?o.then(r,s):n(o)?Promise.all(o).then(r,s):r(o)}}return i(t)()}function Pn(e,t,n){var r=arguments.length;if(r<2)throw new X.InvalidArgument(\"Too few arguments\");for(var s=new Array(r-1);--r;)s[r-1]=arguments[r];n=s.pop();var i=k(s);return[e,i,n]}function Kn(e,t,n,r,s){return Ce.resolve().then((()=>{const i=Ke.transless||Ke,o=e._createTransaction(t,n,e._dbSchema,r),a={trans:o,transless:i};if(r)o.idbtrans=r.idbtrans;else try{o.create(),e._state.PR1398_maxLoop=3}catch(r){return r.name===H.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn(\"Dexie: Need to reopen db\"),e._close(),e.open().then((()=>Kn(e,t,n,null,s)))):ht(r)}const u=T(s);let l;u&&Ze();const c=Ce.follow((()=>{if(l=s.call(o,o),l)if(u){var e=et.bind(null,null);l.then(e,e)}else\"function\"==typeof l.next&&\"function\"==typeof l.throw&&(l=En(l))}),a);return(l&&\"function\"==typeof l.then?Ce.resolve(l).then((e=>o.active?e:ht(new X.PrematureCommit(\"Transaction committed too early. See http://bit.ly/2kdckMn\")))):c.then((()=>l))).then((e=>(r&&o._resolve(),o._completion.then((()=>e))))).catch((e=>(o._reject(e),ht(e))))}))}function On(e,t,r){const s=n(e)?e.slice():[e];for(let e=0;e<r;++e)s.push(t);return s}const Sn={stack:\"dbcore\",name:\"VirtualIndexMiddleware\",level:1,create:function(e){return{...e,table(t){const n=e.table(t),{schema:r}=n,s={},i=[];function o(e,t,n){const r=on(e),a=s[r]=s[r]||[],u=null==e?0:\"string\"==typeof e?1:e.length,l=t>0,c={...n,isVirtual:l,keyTail:t,keyLength:u,extractKey:nn(e),unique:!l&&n.unique};if(a.push(c),c.isPrimaryKey||i.push(c),u>1){o(2===u?e[0]:e.slice(0,u-1),t+1,n)}return a.sort(((e,t)=>e.keyTail-t.keyTail)),c}const a=o(r.primaryKey.keyPath,0,r.primaryKey);s[\":id\"]=[a];for(const e of r.indexes)o(e.keyPath,0,e);function u(t){const n=t.query.index;return n.isVirtual?{...t,query:{index:n,range:(r=t.query.range,s=n.keyTail,{type:1===r.type?2:r.type,lower:On(r.lower,r.lowerOpen?e.MAX_KEY:e.MIN_KEY,s),lowerOpen:!0,upper:On(r.upper,r.upperOpen?e.MIN_KEY:e.MAX_KEY,s),upperOpen:!0})}}:t;var r,s}const l={...n,schema:{...r,primaryKey:a,indexes:i,getIndexByKeyPath:function(e){const t=s[on(e)];return t&&t[0]}},count:e=>n.count(u(e)),query:e=>n.query(u(e)),openCursor(t){const{keyTail:r,isVirtual:s,keyLength:i}=t.query.index;if(!s)return n.openCursor(t);return n.openCursor(u(t)).then((n=>n&&function(n){const s=Object.create(n,{continue:{value:function(s){null!=s?n.continue(On(s,t.reverse?e.MAX_KEY:e.MIN_KEY,r)):t.unique?n.continue(n.key.slice(0,i).concat(t.reverse?e.MIN_KEY:e.MAX_KEY,r)):n.continue()}},continuePrimaryKey:{value(t,s){n.continuePrimaryKey(On(t,e.MAX_KEY,r),s)}},primaryKey:{get:()=>n.primaryKey},key:{get(){const e=n.key;return 1===i?e[0]:e.slice(0,i)}},value:{get:()=>n.value}});return s}(n)))}};return l}}}};function An(e,n,r,s){return r=r||{},s=s||\"\",t(e).forEach((t=>{if(o(n,t)){var i=e[t],a=n[t];if(\"object\"==typeof i&&\"object\"==typeof a&&i&&a){const e=C(i);e!==C(a)?r[s+t]=n[t]:\"Object\"===e?An(i,a,r,s+t+\".\"):i!==a&&(r[s+t]=n[t])}else i!==a&&(r[s+t]=n[t])}else r[s+t]=void 0})),t(n).forEach((t=>{o(e,t)||(r[s+t]=n[t])})),r}const Cn={stack:\"dbcore\",name:\"HooksMiddleware\",level:2,create:e=>({...e,table(t){const n=e.table(t),{primaryKey:r}=n.schema,s={...n,mutate(e){const s=Ke.trans,{deleting:i,creating:a,updating:u}=s.table(t).hook;switch(e.type){case\"add\":if(a.fire===ee)break;return s._promise(\"readwrite\",(()=>l(e)),!0);case\"put\":if(a.fire===ee&&u.fire===ee)break;return s._promise(\"readwrite\",(()=>l(e)),!0);case\"delete\":if(i.fire===ee)break;return s._promise(\"readwrite\",(()=>l(e)),!0);case\"deleteRange\":if(i.fire===ee)break;return s._promise(\"readwrite\",(()=>function(e){return c(e.trans,e.range,1e4)}(e)),!0)}return n.mutate(e);function l(e){const t=Ke.trans,s=e.keys||function(e,t){return\"delete\"===t.type?t.keys:t.keys||t.values.map(e.extractKey)}(r,e);if(!s)throw new Error(\"Keys missing\");return\"delete\"!==(e=\"add\"===e.type||\"put\"===e.type?{...e,keys:s}:{...e}).type&&(e.values=[...e.values]),e.keys&&(e.keys=[...e.keys]),function(e,t,n){return\"add\"===t.type?Promise.resolve([]):e.getMany({trans:t.trans,keys:n,cache:\"immutable\"})}(n,e,s).then((l=>{const c=s.map(((n,s)=>{const c=l[s],h={onerror:null,onsuccess:null};if(\"delete\"===e.type)i.fire.call(h,n,c,t);else if(\"add\"===e.type||void 0===c){const i=a.fire.call(h,n,e.values[s],t);null==n&&null!=i&&(n=i,e.keys[s]=n,r.outbound||_(e.values[s],r.keyPath,n))}else{const r=An(c,e.values[s]),i=u.fire.call(h,r,n,c,t);if(i){const t=e.values[s];Object.keys(i).forEach((e=>{o(t,e)?t[e]=i[e]:_(t,e,i[e])}))}}return h}));return n.mutate(e).then((({failures:t,results:n,numFailures:r,lastResult:i})=>{for(let r=0;r<s.length;++r){const i=n?n[r]:s[r],o=c[r];null==i?o.onerror&&o.onerror(t[r]):o.onsuccess&&o.onsuccess(\"put\"===e.type&&l[r]?e.values[r]:i)}return{failures:t,results:n,numFailures:r,lastResult:i}})).catch((e=>(c.forEach((t=>t.onerror&&t.onerror(e))),Promise.reject(e))))}))}function c(e,t,s){return n.query({trans:e,values:!1,query:{index:r,range:t},limit:s}).then((({result:n})=>l({type:\"delete\",keys:n,trans:e}).then((r=>r.numFailures>0?Promise.reject(r.failures[0]):n.length<s?{failures:[],numFailures:0,lastResult:void 0}:c(e,{...t,lower:n[n.length-1],lowerOpen:!0},s)))))}}};return s}})};function jn(e,t,n){try{if(!t)return null;if(t.keys.length<e.length)return null;const r=[];for(let s=0,i=0;s<t.keys.length&&i<e.length;++s)0===Bt(t.keys[s],e[i])&&(r.push(n?O(t.values[s]):t.values[s]),++i);return r.length===e.length?r:null}catch(e){return null}}const Dn={stack:\"dbcore\",level:-1,create:e=>({table:t=>{const n=e.table(t);return{...n,getMany:e=>{if(!e.cache)return n.getMany(e);const t=jn(e.keys,e.trans._cache,\"clone\"===e.cache);return t?Ce.resolve(t):n.getMany(e).then((t=>(e.trans._cache={keys:e.keys,values:\"clone\"===e.cache?O(t):t},t)))},mutate:e=>(\"add\"!==e.type&&(e.trans._cache=null),n.mutate(e))}}})};function In(e){return!(\"from\"in e)}const Bn=function(e,t){if(!this){const t=new Bn;return e&&\"d\"in e&&r(t,e),t}r(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0})};function Tn(e,t,n){const s=Bt(t,n);if(isNaN(s))return;if(s>0)throw RangeError();if(In(e))return r(e,{from:t,to:n,d:1});const i=e.l,o=e.r;if(Bt(n,e.from)<0)return i?Tn(i,t,n):e.l={from:t,to:n,d:1,l:null,r:null},Nn(e);if(Bt(t,e.to)>0)return o?Tn(o,t,n):e.r={from:t,to:n,d:1,l:null,r:null},Nn(e);Bt(t,e.from)<0&&(e.from=t,e.l=null,e.d=o?o.d+1:1),Bt(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);const a=!e.r;i&&!e.l&&Rn(e,i),o&&a&&Rn(e,o)}function Rn(e,t){In(t)||function e(t,{from:n,to:r,l:s,r:i}){Tn(t,n,r),s&&e(t,s),i&&e(t,i)}(e,t)}function Fn(e,t){const n=Mn(t);let r=n.next();if(r.done)return!1;let s=r.value;const i=Mn(e);let o=i.next(s.from),a=o.value;for(;!r.done&&!o.done;){if(Bt(a.from,s.to)<=0&&Bt(a.to,s.from)>=0)return!0;Bt(s.from,a.from)<0?s=(r=n.next(a.from)).value:a=(o=i.next(s.from)).value}return!1}function Mn(e){let t=In(e)?null:{s:0,n:e};return{next(e){const n=arguments.length>0;for(;t;)switch(t.s){case 0:if(t.s=1,n)for(;t.n.l&&Bt(e,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!n||Bt(e,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function Nn(e){var t,n;const r=((null===(t=e.r)||void 0===t?void 0:t.d)||0)-((null===(n=e.l)||void 0===n?void 0:n.d)||0),s=r>1?\"r\":r<-1?\"l\":\"\";if(s){const t=\"r\"===s?\"l\":\"r\",n={...e},r=e[s];e.from=r.from,e.to=r.to,e[s]=r[s],n[s]=r[t],e[t]=n,n.d=qn(n)}e.d=qn(e)}function qn({r:e,l:t}){return(e?t?Math.max(e.d,t.d):e.d:t?t.d:0)+1}a(Bn.prototype,{add(e){return Rn(this,e),this},addKey(e){return Tn(this,e,e),this},addKeys(e){return e.forEach((e=>Tn(this,e,e))),this},[j](){return Mn(this)}});const $n={stack:\"dbcore\",level:0,create:e=>{const r=e.schema.name,s=new Bn(e.MIN_KEY,e.MAX_KEY);return{...e,table:i=>{const o=e.table(i),{schema:a}=o,{primaryKey:u}=a,{extractKey:l,outbound:c}=u,h={...o,mutate:e=>{const t=e.trans,u=t.mutatedParts||(t.mutatedParts={}),l=e=>{const t=`idb://${r}/${i}/${e}`;return u[t]||(u[t]=new Bn)},c=l(\"\"),h=l(\":dels\"),{type:d}=e;let[f,p]=\"deleteRange\"===e.type?[e.range]:\"delete\"===e.type?[e.keys]:e.values.length<50?[[],e.values]:[];const y=e.trans._cache;return o.mutate(e).then((e=>{if(n(f)){\"delete\"!==d&&(f=e.results),c.addKeys(f);const t=jn(f,y);t||\"add\"===d||h.addKeys(f),(t||p)&&function(e,t,r,s){function i(t){const i=e(t.name||\"\");function o(e){return null!=e?t.extractKey(e):null}const a=e=>t.multiEntry&&n(e)?e.forEach((e=>i.addKey(e))):i.addKey(e);(r||s).forEach(((e,t)=>{const n=r&&o(r[t]),i=s&&o(s[t]);0!==Bt(n,i)&&(null!=n&&a(n),null!=i&&a(i))}))}t.indexes.forEach(i)}(l,a,t,p)}else if(f){const e={from:f.lower,to:f.upper};h.add(e),c.add(e)}else c.add(s),h.add(s),a.indexes.forEach((e=>l(e.name).add(s)));return e}))}},d=({query:{index:t,range:n}})=>{var r,s;return[t,new Bn(null!==(r=n.lower)&&void 0!==r?r:e.MIN_KEY,null!==(s=n.upper)&&void 0!==s?s:e.MAX_KEY)]},f={get:e=>[u,new Bn(e.key)],getMany:e=>[u,(new Bn).addKeys(e.keys)],count:d,query:d,openCursor:d};return t(f).forEach((e=>{h[e]=function(t){const{subscr:n}=Ke;if(n){const a=e=>{const t=`idb://${r}/${i}/${e}`;return n[t]||(n[t]=new Bn)},u=a(\"\"),h=a(\":dels\"),[d,p]=f[e](t);if(a(d.name||\"\").add(p),!d.isPrimaryKey){if(\"count\"!==e){const n=\"query\"===e&&c&&t.values&&o.query({...t,values:!1});return o[e].apply(this,arguments).then((r=>{if(\"query\"===e){if(c&&t.values)return n.then((({result:e})=>(u.addKeys(e),r)));const e=t.values?r.result.map(l):r.result;t.values?u.addKeys(e):h.addKeys(e)}else if(\"openCursor\"===e){const e=r,n=t.values;return e&&Object.create(e,{key:{get:()=>(h.addKey(e.primaryKey),e.key)},primaryKey:{get(){const t=e.primaryKey;return h.addKey(t),t}},value:{get:()=>(n&&u.addKey(e.primaryKey),e.value)}})}return r}))}h.add(s)}}return o[e].apply(this,arguments)}})),h}}}};class Un{constructor(e,t){this._middlewares={},this.verno=0;const n=Un.dependencies;this._options=t={addons:Un.addons,autoOpen:!0,indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange,...t},this._deps={indexedDB:t.indexedDB,IDBKeyRange:t.IDBKeyRange};const{addons:r}=t;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const s={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:ee,dbReadyPromise:null,cancelOpen:ee,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var i;s.dbReadyPromise=new Ce((e=>{s.dbReadyResolve=e})),s.openCanceller=new Ce(((e,t)=>{s.cancelOpen=t})),this._state=s,this.name=e,this.on=Pt(this,\"populate\",\"blocked\",\"versionchange\",\"close\",{ready:[ue,ee]}),this.on.ready.subscribe=y(this.on.ready.subscribe,(e=>(t,n)=>{Un.vip((()=>{const r=this._state;if(r.openComplete)r.dbOpenError||Ce.resolve().then(t),n&&e(t);else if(r.onReadyBeingFired)r.onReadyBeingFired.push(t),n&&e(t);else{e(t);const r=this;n||e((function e(){r.on.ready.unsubscribe(t),r.on.ready.unsubscribe(e)}))}}))})),this.Collection=(i=this,Kt(Ft.prototype,(function(e,t){this.db=i;let n=wt,r=null;if(t)try{n=t()}catch(e){r=e}const s=e._ctx,o=s.table,a=o.hook.reading.fire;this._ctx={table:o,index:s.index,isPrimKey:!s.index||o.schema.primKey.keyPath&&s.index===o.schema.primKey.name,range:n,keysOnly:!1,dir:\"next\",unique:\"\",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:r,or:s.or,valueMapper:a!==te?a:null}}))),this.Table=function(e){return Kt(Et.prototype,(function(t,n,r){this.db=e,this._tx=r,this.name=t,this.schema=n,this.hook=e._allTables[t]?e._allTables[t].hook:Pt(null,{creating:[se,ee],reading:[ne,te],updating:[oe,ee],deleting:[ie,ee]})}))}(this),this.Transaction=function(e){return Kt(Xt.prototype,(function(t,n,r,s,i){this.db=e,this.mode=t,this.storeNames=n,this.schema=r,this.chromeTransactionDurability=s,this.idbtrans=null,this.on=Pt(this,\"complete\",\"error\",\"abort\"),this.parent=i||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Ce(((e,t)=>{this._resolve=e,this._reject=t})),this._completion.then((()=>{this.active=!1,this.on.complete.fire()}),(e=>{var t=this.active;return this.active=!1,this.on.error.fire(e),this.parent?this.parent._reject(e):t&&this.idbtrans&&this.idbtrans.abort(),ht(e)}))}))}(this),this.Version=function(e){return Kt(gn.prototype,(function(t){this.db=e,this._cfg={version:t,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}}))}(this),this.WhereClause=function(e){return Kt(zt.prototype,(function(t,n,r){this.db=e,this._ctx={table:t,index:\":id\"===n?null:n,or:r};const s=e._deps.indexedDB;if(!s)throw new X.MissingAPI;this._cmp=this._ascending=s.cmp.bind(s),this._descending=(e,t)=>s.cmp(t,e),this._max=(e,t)=>s.cmp(e,t)>0?e:t,this._min=(e,t)=>s.cmp(e,t)<0?e:t,this._IDBKeyRange=e._deps.IDBKeyRange}))}(this),this.on(\"versionchange\",(e=>{e.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()})),this.on(\"blocked\",(e=>{!e.newVersion||e.newVersion<e.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${e.oldVersion/10}`)})),this._maxKey=tn(t.IDBKeyRange),this._createTransaction=(e,t,n,r)=>new this.Transaction(e,t,n,this._options.chromeTransactionDurability,r),this._fireOnBlocked=e=>{this.on(\"blocked\").fire(e),yt.filter((e=>e.name===this.name&&e!==this&&!e._state.vcFired)).map((t=>t.on(\"versionchange\").fire(e)))},this.use(Sn),this.use(Cn),this.use($n),this.use(Dn),this.vip=Object.create(this,{_vip:{value:!0}}),r.forEach((e=>e(this)))}version(e){if(isNaN(e)||e<.1)throw new X.Type(\"Given version is not a positive number\");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new X.Schema(\"Cannot add version when database is open\");this.verno=Math.max(this.verno,e);const t=this._versions;var n=t.filter((t=>t._cfg.version===e))[0];return n||(n=new this.Version(e),t.push(n),t.sort(hn),n.stores({}),this._state.autoSchema=!1,n)}_whenReady(e){return this.idbdb&&(this._state.openComplete||Ke.letThrough||this._vip)?e():new Ce(((e,t)=>{if(this._state.openComplete)return t(new X.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void t(new X.DatabaseClosed);this.open().catch(ee)}this._state.dbReadyPromise.then(e,t)})).then(e)}use({stack:e,create:t,level:n,name:r}){r&&this.unuse({stack:e,name:r});const s=this._middlewares[e]||(this._middlewares[e]=[]);return s.push({stack:e,create:t,level:null==n?10:n,name:r}),s.sort(((e,t)=>e.level-t.level)),this}unuse({stack:e,name:t,create:n}){return e&&this._middlewares[e]&&(this._middlewares[e]=this._middlewares[e].filter((e=>n?e.create!==n:!!t&&e.name!==t))),this}open(){return kn(this)}_close(){const e=this._state,t=yt.indexOf(this);if(t>=0&&yt.splice(t,1),this.idbdb){try{this.idbdb.close()}catch(e){}this._novip.idbdb=null}e.dbReadyPromise=new Ce((t=>{e.dbReadyResolve=t})),e.openCanceller=new Ce(((t,n)=>{e.cancelOpen=n}))}close(){this._close();const e=this._state;this._options.autoOpen=!1,e.dbOpenError=new X.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)}delete(){const e=arguments.length>0,t=this._state;return new Ce(((n,r)=>{const s=()=>{this.close();var e=this._deps.indexedDB.deleteDatabase(this.name);e.onsuccess=We((()=>{!function({indexedDB:e,IDBKeyRange:t},n){!_n(e)&&\"__dbnames\"!==n&&bn(e,t).delete(n).catch(ee)}(this._deps,this.name),n()})),e.onerror=Gt(r),e.onblocked=this._fireOnBlocked};if(e)throw new X.InvalidArgument(\"Arguments not allowed in db.delete()\");t.isBeingOpened?t.dbReadyPromise.then(s):s()}))}backendDB(){return this.idbdb}isOpen(){return null!==this.idbdb}hasBeenClosed(){const e=this._state.dbOpenError;return e&&\"DatabaseClosed\"===e.name}hasFailed(){return null!==this._state.dbOpenError}dynamicallyOpened(){return this._state.autoSchema}get tables(){return t(this._allTables).map((e=>this._allTables[e]))}transaction(){const e=Pn.apply(this,arguments);return this._transaction.apply(this,e)}_transaction(e,t,n){let r=Ke.trans;r&&r.db===this&&-1===e.indexOf(\"!\")||(r=null);const s=-1!==e.indexOf(\"?\");let i,o;e=e.replace(\"!\",\"\").replace(\"?\",\"\");try{if(o=t.map((e=>{var t=e instanceof this.Table?e.name:e;if(\"string\"!=typeof t)throw new TypeError(\"Invalid table argument to Dexie.transaction(). Only Table or String are allowed\");return t})),\"r\"==e||\"readonly\"===e)i=\"readonly\";else{if(\"rw\"!=e&&\"readwrite\"!=e)throw new X.InvalidArgument(\"Invalid transaction mode: \"+e);i=\"readwrite\"}if(r){if(\"readonly\"===r.mode&&\"readwrite\"===i){if(!s)throw new X.SubTransaction(\"Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY\");r=null}r&&o.forEach((e=>{if(r&&-1===r.storeNames.indexOf(e)){if(!s)throw new X.SubTransaction(\"Table \"+e+\" not included in parent transaction.\");r=null}})),s&&r&&!r.active&&(r=null)}}catch(e){return r?r._promise(null,((t,n)=>{n(e)})):ht(e)}const a=Kn.bind(null,this,i,o,r,n);return r?r._promise(i,a,\"lock\"):Ke.trans?ot(Ke.transless,(()=>this._whenReady(a))):this._whenReady(a)}table(e){if(!o(this._allTables,e))throw new X.InvalidTable(`Table ${e} does not exist`);return this._allTables[e]}}const Ln=\"undefined\"!=typeof Symbol&&\"observable\"in Symbol?Symbol.observable:\"@@observable\";class Vn{constructor(e){this._subscribe=e}subscribe(e,t,n){return this._subscribe(e&&\"function\"!=typeof e?e:{next:e,error:t,complete:n})}[Ln](){return this}}function Wn(e,n){return t(n).forEach((t=>{Rn(e[t]||(e[t]=new Bn),n[t])})),e}function Yn(e){return new Vn((n=>{const r=T(e);let s=!1,i={},o={};const a={get closed(){return s},unsubscribe:()=>{s=!0,Qt.storagemutated.unsubscribe(h)}};n.start&&n.start(a);let u=!1,l=!1;function c(){return t(o).some((e=>i[e]&&Fn(i[e],o[e])))}const h=e=>{Wn(i,e),c()&&d()},d=()=>{if(u||s)return;i={};const t={},f=function(t){r&&Ze();const n=()=>Je(e,{subscr:t,trans:null}),s=Ke.trans?ot(Ke.transless,n):n();return r&&s.then(et,et),s}(t);l||(Qt(\"storagemutated\",h),l=!0),u=!0,Promise.resolve(f).then((e=>{u=!1,s||(c()?d():(i={},o=t,n.next&&n.next(e)))}),(e=>{[\"DatabaseClosedError\",\"AbortError\"].includes(null==e?void 0:e.name)||(u=!1,n.error&&n.error(e),a.unsubscribe())}))};return d(),a}))}let zn;try{zn={indexedDB:e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB,IDBKeyRange:e.IDBKeyRange||e.webkitIDBKeyRange}}catch(e){zn={indexedDB:null,IDBKeyRange:null}}const Gn=Un;function Hn(e){let t=Qn;try{Qn=!0,Qt.storagemutated.fire(e)}finally{Qn=t}}a(Gn,{...Z,delete:e=>new Gn(e,{addons:[]}).delete(),exists:e=>new Gn(e,{addons:[]}).open().then((e=>(e.close(),!0))).catch(\"NoSuchDatabaseError\",(()=>!1)),getDatabaseNames(e){try{return function({indexedDB:e,IDBKeyRange:t}){return _n(e)?Promise.resolve(e.databases()).then((e=>e.map((e=>e.name)).filter((e=>\"__dbnames\"!==e)))):bn(e,t).toCollection().primaryKeys()}(Gn.dependencies).then(e)}catch(e){return ht(new X.MissingAPI)}},defineClass:()=>function(e){r(this,e)},ignoreTransaction:e=>Ke.trans?ot(Ke.transless,e):e(),vip:wn,async:function(e){return function(){try{var t=En(e.apply(this,arguments));return t&&\"function\"==typeof t.then?t:Ce.resolve(t)}catch(e){return ht(e)}}},spawn:function(e,t,n){try{var r=En(e.apply(n,t||[]));return r&&\"function\"==typeof r.then?r:Ce.resolve(r)}catch(e){return ht(e)}},currentTransaction:{get:()=>Ke.trans||null},waitFor:function(e,t){const n=Ce.resolve(\"function\"==typeof e?Gn.ignoreTransaction(e):e).timeout(t||6e4);return Ke.trans?Ke.trans.waitFor(n):n},Promise:Ce,debug:{get:()=>R,set:e=>{F(e,\"dexie\"===e?()=>!0:bt)}},derive:c,extend:r,props:a,override:y,Events:Pt,on:Qt,liveQuery:Yn,extendObservabilitySet:Wn,getByKeyPath:b,setByKeyPath:_,delByKeyPath:function(e,t){\"string\"==typeof t?_(e,t,void 0):\"length\"in t&&[].map.call(t,(function(t){_(e,t,void 0)}))},shallowClone:w,deepClone:O,getObjectDiff:An,cmp:Bt,asap:v,minKey:-(1/0),addons:[],connections:yt,errnames:H,dependencies:zn,semVer:\"4.0.0-alpha.4\",version:\"4.0.0-alpha.4\".split(\".\").map((e=>parseInt(e))).reduce(((e,t,n)=>e+t/Math.pow(10,2*n)))}),Gn.maxKey=tn(Gn.dependencies.IDBKeyRange),\"undefined\"!=typeof dispatchEvent&&\"undefined\"!=typeof addEventListener&&(Qt(\"storagemutated\",(e=>{if(!Qn){let t;mt?(t=document.createEvent(\"CustomEvent\"),t.initCustomEvent(\"x-storagemutated-1\",!0,!0,e)):t=new CustomEvent(\"x-storagemutated-1\",{detail:e}),Qn=!0,dispatchEvent(t),Qn=!1}})),addEventListener(\"x-storagemutated-1\",(({detail:e})=>{Qn||Hn(e)})));let Qn=!1;if(\"undefined\"!=typeof BroadcastChannel){const e=new BroadcastChannel(\"x-storagemutated-1\");\"function\"==typeof e.unref&&e.unref(),Qt(\"storagemutated\",(t=>{Qn||e.postMessage(t)})),e.onmessage=e=>{e.data&&Hn(e.data)}}else if(\"undefined\"!=typeof self&&\"undefined\"!=typeof navigator){Qt(\"storagemutated\",(e=>{try{Qn||(\"undefined\"!=typeof localStorage&&localStorage.setItem(\"x-storagemutated-1\",JSON.stringify({trig:Math.random(),changedParts:e})),\"object\"==typeof self.clients&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach((t=>t.postMessage({type:\"x-storagemutated-1\",changedParts:e}))))}catch(e){}})),\"undefined\"!=typeof addEventListener&&addEventListener(\"storage\",(e=>{if(\"x-storagemutated-1\"===e.key){const t=JSON.parse(e.newValue);t&&Hn(t.changedParts)}}));const e=self.document&&navigator.serviceWorker;e&&e.addEventListener(\"message\",(function({data:e}){e&&\"x-storagemutated-1\"===e.type&&Hn(e.changedParts)}))}Ce.rejectionMapper=function(e,t){if(!e||e instanceof W||e instanceof TypeError||e instanceof SyntaxError||!e.name||!J[e.name])return e;var n=new J[e.name](t||e.message,e);return\"stack\"in e&&l(n,\"stack\",{get:function(){return this.inner.stack}}),n},F(R,bt);export{Un as Dexie,kt as Entity,Bn as RangeSet,Bt as cmp,Un as default,Yn as liveQuery,Rn as mergeRanges,Fn as rangesOverlap};","/**\n *  base64.ts\n *\n *  Licensed under the BSD 3-Clause License.\n *    http://opensource.org/licenses/BSD-3-Clause\n *\n *  References:\n *    http://en.wikipedia.org/wiki/Base64\n *\n * @author Dan Kogai (https://github.com/dankogai)\n */\nconst version = '3.7.3';\n/**\n * @deprecated use lowercase `version`.\n */\nconst VERSION = version;\nconst _hasatob = typeof atob === 'function';\nconst _hasbtoa = typeof btoa === 'function';\nconst _hasBuffer = typeof Buffer === 'function';\nconst _TD = typeof TextDecoder === 'function' ? new TextDecoder() : undefined;\nconst _TE = typeof TextEncoder === 'function' ? new TextEncoder() : undefined;\nconst b64ch = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\nconst b64chs = Array.prototype.slice.call(b64ch);\nconst b64tab = ((a) => {\n    let tab = {};\n    a.forEach((c, i) => tab[c] = i);\n    return tab;\n})(b64chs);\nconst b64re = /^(?:[A-Za-z\\d+\\/]{4})*?(?:[A-Za-z\\d+\\/]{2}(?:==)?|[A-Za-z\\d+\\/]{3}=?)?$/;\nconst _fromCC = String.fromCharCode.bind(String);\nconst _U8Afrom = typeof Uint8Array.from === 'function'\n    ? Uint8Array.from.bind(Uint8Array)\n    : (it, fn = (x) => x) => new Uint8Array(Array.prototype.slice.call(it, 0).map(fn));\nconst _mkUriSafe = (src) => src\n    .replace(/=/g, '').replace(/[+\\/]/g, (m0) => m0 == '+' ? '-' : '_');\nconst _tidyB64 = (s) => s.replace(/[^A-Za-z0-9\\+\\/]/g, '');\n/**\n * polyfill version of `btoa`\n */\nconst btoaPolyfill = (bin) => {\n    // console.log('polyfilled');\n    let u32, c0, c1, c2, asc = '';\n    const pad = bin.length % 3;\n    for (let i = 0; i < bin.length;) {\n        if ((c0 = bin.charCodeAt(i++)) > 255 ||\n            (c1 = bin.charCodeAt(i++)) > 255 ||\n            (c2 = bin.charCodeAt(i++)) > 255)\n            throw new TypeError('invalid character found');\n        u32 = (c0 << 16) | (c1 << 8) | c2;\n        asc += b64chs[u32 >> 18 & 63]\n            + b64chs[u32 >> 12 & 63]\n            + b64chs[u32 >> 6 & 63]\n            + b64chs[u32 & 63];\n    }\n    return pad ? asc.slice(0, pad - 3) + \"===\".substring(pad) : asc;\n};\n/**\n * does what `window.btoa` of web browsers do.\n * @param {String} bin binary string\n * @returns {string} Base64-encoded string\n */\nconst _btoa = _hasbtoa ? (bin) => btoa(bin)\n    : _hasBuffer ? (bin) => Buffer.from(bin, 'binary').toString('base64')\n        : btoaPolyfill;\nconst _fromUint8Array = _hasBuffer\n    ? (u8a) => Buffer.from(u8a).toString('base64')\n    : (u8a) => {\n        // cf. https://stackoverflow.com/questions/12710001/how-to-convert-uint8-array-to-base64-encoded-string/12713326#12713326\n        const maxargs = 0x1000;\n        let strs = [];\n        for (let i = 0, l = u8a.length; i < l; i += maxargs) {\n            strs.push(_fromCC.apply(null, u8a.subarray(i, i + maxargs)));\n        }\n        return _btoa(strs.join(''));\n    };\n/**\n * converts a Uint8Array to a Base64 string.\n * @param {boolean} [urlsafe] URL-and-filename-safe a la RFC4648 §5\n * @returns {string} Base64 string\n */\nconst fromUint8Array = (u8a, urlsafe = false) => urlsafe ? _mkUriSafe(_fromUint8Array(u8a)) : _fromUint8Array(u8a);\n// This trick is found broken https://github.com/dankogai/js-base64/issues/130\n// const utob = (src: string) => unescape(encodeURIComponent(src));\n// reverting good old fationed regexp\nconst cb_utob = (c) => {\n    if (c.length < 2) {\n        var cc = c.charCodeAt(0);\n        return cc < 0x80 ? c\n            : cc < 0x800 ? (_fromCC(0xc0 | (cc >>> 6))\n                + _fromCC(0x80 | (cc & 0x3f)))\n                : (_fromCC(0xe0 | ((cc >>> 12) & 0x0f))\n                    + _fromCC(0x80 | ((cc >>> 6) & 0x3f))\n                    + _fromCC(0x80 | (cc & 0x3f)));\n    }\n    else {\n        var cc = 0x10000\n            + (c.charCodeAt(0) - 0xD800) * 0x400\n            + (c.charCodeAt(1) - 0xDC00);\n        return (_fromCC(0xf0 | ((cc >>> 18) & 0x07))\n            + _fromCC(0x80 | ((cc >>> 12) & 0x3f))\n            + _fromCC(0x80 | ((cc >>> 6) & 0x3f))\n            + _fromCC(0x80 | (cc & 0x3f)));\n    }\n};\nconst re_utob = /[\\uD800-\\uDBFF][\\uDC00-\\uDFFFF]|[^\\x00-\\x7F]/g;\n/**\n * @deprecated should have been internal use only.\n * @param {string} src UTF-8 string\n * @returns {string} UTF-16 string\n */\nconst utob = (u) => u.replace(re_utob, cb_utob);\n//\nconst _encode = _hasBuffer\n    ? (s) => Buffer.from(s, 'utf8').toString('base64')\n    : _TE\n        ? (s) => _fromUint8Array(_TE.encode(s))\n        : (s) => _btoa(utob(s));\n/**\n * converts a UTF-8-encoded string to a Base64 string.\n * @param {boolean} [urlsafe] if `true` make the result URL-safe\n * @returns {string} Base64 string\n */\nconst encode = (src, urlsafe = false) => urlsafe\n    ? _mkUriSafe(_encode(src))\n    : _encode(src);\n/**\n * converts a UTF-8-encoded string to URL-safe Base64 RFC4648 §5.\n * @returns {string} Base64 string\n */\nconst encodeURI = (src) => encode(src, true);\n// This trick is found broken https://github.com/dankogai/js-base64/issues/130\n// const btou = (src: string) => decodeURIComponent(escape(src));\n// reverting good old fationed regexp\nconst re_btou = /[\\xC0-\\xDF][\\x80-\\xBF]|[\\xE0-\\xEF][\\x80-\\xBF]{2}|[\\xF0-\\xF7][\\x80-\\xBF]{3}/g;\nconst cb_btou = (cccc) => {\n    switch (cccc.length) {\n        case 4:\n            var cp = ((0x07 & cccc.charCodeAt(0)) << 18)\n                | ((0x3f & cccc.charCodeAt(1)) << 12)\n                | ((0x3f & cccc.charCodeAt(2)) << 6)\n                | (0x3f & cccc.charCodeAt(3)), offset = cp - 0x10000;\n            return (_fromCC((offset >>> 10) + 0xD800)\n                + _fromCC((offset & 0x3FF) + 0xDC00));\n        case 3:\n            return _fromCC(((0x0f & cccc.charCodeAt(0)) << 12)\n                | ((0x3f & cccc.charCodeAt(1)) << 6)\n                | (0x3f & cccc.charCodeAt(2)));\n        default:\n            return _fromCC(((0x1f & cccc.charCodeAt(0)) << 6)\n                | (0x3f & cccc.charCodeAt(1)));\n    }\n};\n/**\n * @deprecated should have been internal use only.\n * @param {string} src UTF-16 string\n * @returns {string} UTF-8 string\n */\nconst btou = (b) => b.replace(re_btou, cb_btou);\n/**\n * polyfill version of `atob`\n */\nconst atobPolyfill = (asc) => {\n    // console.log('polyfilled');\n    asc = asc.replace(/\\s+/g, '');\n    if (!b64re.test(asc))\n        throw new TypeError('malformed base64.');\n    asc += '=='.slice(2 - (asc.length & 3));\n    let u24, bin = '', r1, r2;\n    for (let i = 0; i < asc.length;) {\n        u24 = b64tab[asc.charAt(i++)] << 18\n            | b64tab[asc.charAt(i++)] << 12\n            | (r1 = b64tab[asc.charAt(i++)]) << 6\n            | (r2 = b64tab[asc.charAt(i++)]);\n        bin += r1 === 64 ? _fromCC(u24 >> 16 & 255)\n            : r2 === 64 ? _fromCC(u24 >> 16 & 255, u24 >> 8 & 255)\n                : _fromCC(u24 >> 16 & 255, u24 >> 8 & 255, u24 & 255);\n    }\n    return bin;\n};\n/**\n * does what `window.atob` of web browsers do.\n * @param {String} asc Base64-encoded string\n * @returns {string} binary string\n */\nconst _atob = _hasatob ? (asc) => atob(_tidyB64(asc))\n    : _hasBuffer ? (asc) => Buffer.from(asc, 'base64').toString('binary')\n        : atobPolyfill;\n//\nconst _toUint8Array = _hasBuffer\n    ? (a) => _U8Afrom(Buffer.from(a, 'base64'))\n    : (a) => _U8Afrom(_atob(a), c => c.charCodeAt(0));\n/**\n * converts a Base64 string to a Uint8Array.\n */\nconst toUint8Array = (a) => _toUint8Array(_unURI(a));\n//\nconst _decode = _hasBuffer\n    ? (a) => Buffer.from(a, 'base64').toString('utf8')\n    : _TD\n        ? (a) => _TD.decode(_toUint8Array(a))\n        : (a) => btou(_atob(a));\nconst _unURI = (a) => _tidyB64(a.replace(/[-_]/g, (m0) => m0 == '-' ? '+' : '/'));\n/**\n * converts a Base64 string to a UTF-8 string.\n * @param {String} src Base64 string.  Both normal and URL-safe are supported\n * @returns {string} UTF-8 string\n */\nconst decode = (src) => _decode(_unURI(src));\n/**\n * check if a value is a valid Base64 string\n * @param {String} src a value to check\n  */\nconst isValid = (src) => {\n    if (typeof src !== 'string')\n        return false;\n    const s = src.replace(/\\s+/g, '').replace(/={0,2}$/, '');\n    return !/[^\\s0-9a-zA-Z\\+/]/.test(s) || !/[^\\s0-9a-zA-Z\\-_]/.test(s);\n};\n//\nconst _noEnum = (v) => {\n    return {\n        value: v, enumerable: false, writable: true, configurable: true\n    };\n};\n/**\n * extend String.prototype with relevant methods\n */\nconst extendString = function () {\n    const _add = (name, body) => Object.defineProperty(String.prototype, name, _noEnum(body));\n    _add('fromBase64', function () { return decode(this); });\n    _add('toBase64', function (urlsafe) { return encode(this, urlsafe); });\n    _add('toBase64URI', function () { return encode(this, true); });\n    _add('toBase64URL', function () { return encode(this, true); });\n    _add('toUint8Array', function () { return toUint8Array(this); });\n};\n/**\n * extend Uint8Array.prototype with relevant methods\n */\nconst extendUint8Array = function () {\n    const _add = (name, body) => Object.defineProperty(Uint8Array.prototype, name, _noEnum(body));\n    _add('toBase64', function (urlsafe) { return fromUint8Array(this, urlsafe); });\n    _add('toBase64URI', function () { return fromUint8Array(this, true); });\n    _add('toBase64URL', function () { return fromUint8Array(this, true); });\n};\n/**\n * extend Builtin prototypes with relevant methods\n */\nconst extendBuiltins = () => {\n    extendString();\n    extendUint8Array();\n};\nconst gBase64 = {\n    version: version,\n    VERSION: VERSION,\n    atob: _atob,\n    atobPolyfill: atobPolyfill,\n    btoa: _btoa,\n    btoaPolyfill: btoaPolyfill,\n    fromBase64: decode,\n    toBase64: encode,\n    encode: encode,\n    encodeURI: encodeURI,\n    encodeURL: encodeURI,\n    utob: utob,\n    btou: btou,\n    decode: decode,\n    isValid: isValid,\n    fromUint8Array: fromUint8Array,\n    toUint8Array: toUint8Array,\n    extendString: extendString,\n    extendUint8Array: extendUint8Array,\n    extendBuiltins: extendBuiltins,\n};\n// makecjs:CUT //\nexport { version };\nexport { VERSION };\nexport { _atob as atob };\nexport { atobPolyfill };\nexport { _btoa as btoa };\nexport { btoaPolyfill };\nexport { decode as fromBase64 };\nexport { encode as toBase64 };\nexport { utob };\nexport { encode };\nexport { encodeURI };\nexport { encodeURI as encodeURL };\nexport { btou };\nexport { decode };\nexport { isValid };\nexport { fromUint8Array };\nexport { toUint8Array };\nexport { extendString };\nexport { extendUint8Array };\nexport { extendBuiltins };\n// and finally,\nexport { gBase64 as Base64 };\n","import type {\n    BlobBuffer,\n    DeepReadonlyObject,\n    HashFunction,\n    MaybeReadonly,\n    PlainJsonError,\n    RxDocumentData,\n    RxDocumentMeta,\n    RxDocumentWriteData,\n    RxError,\n    RxTypeError,\n    StringKeys\n} from './types';\n\n/**\n * Returns an error that indicates that a plugin is missing\n * We do not throw a RxError because this should not be handled\n * programmatically but by using the correct import\n */\nexport function pluginMissing(\n    pluginKey: string\n): Error {\n    const keyParts = pluginKey.split('-');\n    let pluginName = 'RxDB';\n    keyParts.forEach(part => {\n        pluginName += ucfirst(part);\n    });\n    pluginName += 'Plugin';\n    return new Error(\n        `You are using a function which must be overwritten by a plugin.\n        You should either prevent the usage of this function or add the plugin via:\n            import { ${pluginName} } from 'rxdb/plugins/${pluginKey}';\n            addRxPlugin(${pluginName});\n        `\n    );\n}\n\n/**\n * This is a very fast hash method\n * but it is not cryptographically secure.\n * For each run it will append a number between 0 and 2147483647 (=biggest 32 bit int).\n * @link http://stackoverflow.com/questions/7616461/generate-a-hash-from-string-in-javascript-jquery\n * @return a string as hash-result\n */\nexport function fastUnsecureHash(\n    inputString: string,\n    // used to test the polyfill\n    doNotUseTextEncoder?: boolean\n): string {\n    let hashValue = 0,\n        i, chr, len;\n\n    /**\n     * For better performance we first transform all\n     * chars into their ascii numbers at once.\n     *\n     * This is what makes the murmurhash implementation such fast.\n     * @link https://github.com/perezd/node-murmurhash/blob/master/murmurhash.js#L4\n     */\n    let encoded: Uint8Array | number[];\n\n    /**\n     * All modern browsers support the TextEncoder\n     * @link https://caniuse.com/textencoder\n     * But to make RxDB work in other JavaScript runtimes,\n     * like when using it in flutter or QuickJS, we need to\n     * make it work even when there is no TextEncoder.\n     */\n    if (typeof TextEncoder !== 'undefined' && !doNotUseTextEncoder) {\n        encoded = new TextEncoder().encode(inputString);\n    } else {\n        encoded = [];\n        for (let j = 0; j < inputString.length; j++) {\n            encoded.push(inputString.charCodeAt(j));\n        }\n    }\n\n    for (i = 0, len = inputString.length; i < len; i++) {\n        chr = encoded[i];\n        hashValue = ((hashValue << 5) - hashValue) + chr;\n        hashValue |= 0; // Convert to 32bit integer\n    }\n    if (hashValue < 0) {\n        hashValue = hashValue * -1;\n    }\n\n    /**\n     * To make the output smaller\n     * but still have it to represent the same value,\n     * we use the biggest radix of 36 instead of just\n     * transforming it into a hex string.\n     */\n    return hashValue.toString(36);\n}\n\n\n/**\n * Default hash method used to create revision hashes\n * that do not have to be cryptographically secure.\n * IMPORTANT: Changing the default hashing method\n * requires a BREAKING change!\n */\nexport function defaultHashFunction(input: string): string {\n    return fastUnsecureHash(input);\n}\n\n/**\n * Returns the current unix time in milliseconds (with two decmials!)\n * Because the accuracy of getTime() in javascript is bad,\n * and we cannot rely on performance.now() on all platforms,\n * this method implements a way to never return the same value twice.\n * This ensures that when now() is called often, we do not loose the information\n * about which call came first and which came after.\n *\n * We had to move from having no decimals, to having two decimal\n * because it turned out that some storages are such fast that\n * calling this method too often would return 'the future'.\n */\nlet _lastNow: number = 0;\n/**\n * Returns the current time in milliseconds,\n * also ensures to not return the same value twice.\n */\nexport function now(): number {\n    let ret = new Date().getTime();\n    ret = ret + 0.01;\n    if (ret <= _lastNow) {\n        ret = _lastNow + 0.01;\n    }\n\n    /**\n     * Strip the returned number to max two decimals.\n     * In theory we would not need this but\n     * in practice JavaScript has no such good number precision\n     * so rounding errors could add another decimal place.\n     */\n    const twoDecimals = parseFloat(ret.toFixed(2));\n\n    _lastNow = twoDecimals;\n    return twoDecimals;\n}\n\n/**\n * returns a promise that resolves on the next tick\n */\nexport function nextTick(): Promise<void> {\n    return new Promise(res => setTimeout(res, 0));\n}\n\nexport function promiseWait(ms: number = 0): Promise<void> {\n    return new Promise(res => setTimeout(res, ms));\n}\n\nexport function toPromise<T>(maybePromise: Promise<T> | T): Promise<T> {\n    if (maybePromise && typeof (maybePromise as any).then === 'function') {\n        // is promise\n        return maybePromise as any;\n    } else {\n        return Promise.resolve(maybePromise);\n    }\n}\n\nexport const PROMISE_RESOLVE_TRUE: Promise<true> = Promise.resolve(true);\nexport const PROMISE_RESOLVE_FALSE: Promise<false> = Promise.resolve(false);\nexport const PROMISE_RESOLVE_NULL: Promise<null> = Promise.resolve(null);\nexport const PROMISE_RESOLVE_VOID: Promise<void> = Promise.resolve();\n\nexport function requestIdlePromise(timeout: number | null = null) {\n    if (\n        typeof window === 'object' &&\n        (window as any)['requestIdleCallback']\n    ) {\n        return new Promise(\n            res => (window as any)['requestIdleCallback'](res, {\n                timeout\n            })\n        );\n    } else {\n        return promiseWait(0);\n    }\n}\n\n\n/**\n * like Promise.all() but runs in series instead of parallel\n * @link https://github.com/egoist/promise.series/blob/master/index.js\n * @param tasks array with functions that return a promise\n */\nexport function promiseSeries(\n    tasks: Function[],\n    initial?: any\n): Promise<any[]> {\n    return tasks\n        .reduce(\n            (current, next) => (current as any).then(next),\n            Promise.resolve(initial)\n        );\n}\n\n/**\n * run the callback if requestIdleCallback available\n * do nothing if not\n * @link https://developer.mozilla.org/de/docs/Web/API/Window/requestIdleCallback\n */\nexport function requestIdleCallbackIfAvailable(fun: Function): void {\n    if (\n        typeof window === 'object' &&\n        (window as any)['requestIdleCallback']\n    ) (window as any)['requestIdleCallback'](fun);\n}\n\n/**\n * uppercase first char\n */\nexport function ucfirst(str: string): string {\n    str += '';\n    const f = str.charAt(0)\n        .toUpperCase();\n    return f + str.substr(1);\n}\n\n/**\n * removes trailing and ending dots from the string\n */\nexport function trimDots(str: string): string {\n    // start\n    while (str.charAt(0) === '.')\n        str = str.substr(1);\n\n    // end\n    while (str.slice(-1) === '.')\n        str = str.slice(0, -1);\n\n    return str;\n}\n\n\nexport function runXTimes(xTimes: number, fn: (idx: number) => void) {\n    new Array(xTimes).fill(0).forEach((_v, idx) => fn(idx));\n}\n\nexport function ensureNotFalsy<T>(obj: T | false | undefined | null): T {\n    if (!obj) {\n        throw new Error('ensureNotFalsy() is falsy');\n    }\n    return obj;\n}\n\nexport function ensureInteger(obj: unknown): number {\n    if (!Number.isInteger(obj)) {\n        throw new Error('ensureInteger() is falsy');\n    }\n    return obj as number;\n}\n\n/**\n * deep-sort an object so its attributes are in lexical order.\n * Also sorts the arrays inside of the object if no-array-sort not set\n */\nexport function sortObject(obj: any, noArraySort = false): any {\n    if (!obj) return obj; // do not sort null, false or undefined\n\n    // array\n    if (!noArraySort && Array.isArray(obj)) {\n        return obj\n            .sort((a, b) => {\n                if (typeof a === 'string' && typeof b === 'string')\n                    return a.localeCompare(b);\n\n                if (typeof a === 'object') return 1;\n                else return -1;\n            })\n            .map(i => sortObject(i, noArraySort));\n    }\n\n    // object\n    // array is also of type object\n    if (typeof obj === 'object' && !Array.isArray(obj)) {\n        if (obj instanceof RegExp) {\n            return obj;\n        }\n\n        const out: any = {};\n        Object.keys(obj)\n            .sort((a, b) => a.localeCompare(b))\n            .forEach(key => {\n                out[key] = sortObject(obj[key], noArraySort);\n            });\n        return out;\n    }\n\n    // everything else\n    return obj;\n}\n\n\n/**\n * used to JSON.stringify() objects that contain a regex\n * @link https://stackoverflow.com/a/33416684 thank you Fabian Jakobs!\n */\nexport function stringifyFilter(key: string, value: any) {\n    if (value instanceof RegExp) {\n        return value.toString();\n    }\n    return value;\n}\n\n/**\n * get a random string which can be used with couchdb\n * @link http://stackoverflow.com/a/1349426/3443137\n */\nexport function randomCouchString(length: number = 10): string {\n    let text = '';\n    const possible = 'abcdefghijklmnopqrstuvwxyz';\n\n    for (let i = 0; i < length; i++) {\n        text += possible.charAt(Math.floor(Math.random() * possible.length));\n    }\n\n    return text;\n}\n\n/**\n * A random string that is never inside of any storage\n */\nexport const RANDOM_STRING = 'Fz7SZXPmYJujkzjY1rpXWvlWBqoGAfAX';\n\n\nexport function lastOfArray<T>(ar: T[]): T | undefined {\n    return ar[ar.length - 1];\n}\n\n/**\n * shuffle the given array\n */\nexport function shuffleArray<T>(arr: T[]): T[] {\n    return arr.sort(() => (Math.random() - 0.5));\n}\n\n/**\n * Split array with items into smaller arrays with items\n * @link https://stackoverflow.com/a/7273794/3443137\n */\nexport function batchArray<T>(array: T[], batchSize: number): T[][] {\n    array = array.slice(0);\n    const ret: T[][] = [];\n    while (array.length) {\n        const batch = array.splice(0, batchSize);\n        ret.push(batch);\n    }\n    return ret;\n}\n\n\n/**\n * @link https://stackoverflow.com/a/15996017\n */\nexport function removeOneFromArrayIfMatches<T>(ar: T[], condition: (x: T) => boolean): T[] {\n    ar = ar.slice();\n    let i = ar.length;\n    let done = false;\n    while (i-- && !done) {\n        if (condition(ar[i])) {\n            done = true;\n            ar.splice(i, 1);\n        }\n    }\n    return ar;\n}\n\n\n/**\n * transforms the given adapter into a pouch-compatible object\n */\nexport function adapterObject(adapter: any): any {\n    let adapterObj: any = {\n        db: adapter\n    };\n    if (typeof adapter === 'string') {\n        adapterObj = {\n            adapter,\n            db: undefined,\n        };\n    }\n    return adapterObj;\n}\n\n\n/**\n * Deep clone a plain json object.\n * Does not work with recursive stuff\n * or non-plain-json.\n * IMPORANT: Performance of this is very important,\n * do not change it without running performance tests!\n *\n * @link https://github.com/zxdong262/deep-copy/blob/master/src/index.ts\n */\nfunction deepClone<T>(src: T | DeepReadonlyObject<T>): T {\n    if (!src) {\n        return src;\n    }\n    if (src === null || typeof (src) !== 'object') {\n        return src;\n    }\n    if (Array.isArray(src)) {\n        const ret = new Array(src.length);\n        let i = ret.length;\n        while (i--) {\n            ret[i] = deepClone(src[i]);\n        }\n        return ret as any;\n    }\n    const dest: any = {};\n    // eslint-disable-next-line guard-for-in\n    for (const key in src) {\n        // TODO we should not be required to deep clone RegEx objects,\n        // this must be fixed in RxDB.\n        if (src[key] instanceof RegExp) {\n            dest[key] = src[key];\n        } else {\n            dest[key] = deepClone(src[key]);\n        }\n    }\n    return dest;\n}\nexport const clone = deepClone;\n\n/**\n * does a flat copy on the objects,\n * is about 3 times faster then using deepClone\n * @link https://jsperf.com/object-rest-spread-vs-clone/2\n */\nexport function flatClone<T>(obj: T | DeepReadonlyObject<T>): T {\n    return Object.assign({}, obj) as any;\n}\n\n/**\n * @link https://stackoverflow.com/a/11509718/3443137\n */\nexport function firstPropertyNameOfObject(obj: any): string {\n    return Object.keys(obj)[0];\n}\nexport function firstPropertyValueOfObject<T>(obj: { [k: string]: T; }): T {\n    const key = Object.keys(obj)[0];\n    return obj[key];\n}\n\n/**\n * returns a flattened object\n * @link https://gist.github.com/penguinboy/762197\n */\nexport function flattenObject(ob: any) {\n    const toReturn: any = {};\n\n    for (const i in ob) {\n        if (!ob.hasOwnProperty(i)) continue;\n\n        if ((typeof ob[i]) === 'object') {\n            const flatObject = flattenObject(ob[i]);\n            for (const x in flatObject) {\n                if (!flatObject.hasOwnProperty(x)) continue;\n\n                toReturn[i + '.' + x] = flatObject[x];\n            }\n        } else {\n            toReturn[i] = ob[i];\n        }\n    }\n    return toReturn;\n}\n\n\nexport function parseRevision(revision: string): { height: number; hash: string; } {\n    const split = revision.split('-');\n    return {\n        height: parseInt(split[0], 10),\n        hash: split[1]\n    };\n}\n\nexport function getHeightOfRevision(revision: string): number {\n    return parseRevision(revision).height;\n}\n\n/**\n * Creates the next write revision for a given document.\n */\nexport function createRevision<RxDocType>(\n    hashFunction: HashFunction,\n    docData: RxDocumentWriteData<RxDocType> & {\n        /**\n         * Passing a revision is optional here,\n         * because it is anyway not needed to calculate\n         * the new revision.\n         */\n        _rev?: string;\n    },\n    previousDocData?: RxDocumentData<RxDocType>\n): string {\n\n    const previousRevision = previousDocData ? previousDocData._rev : null;\n    const previousRevisionHeigth = previousRevision ? parseRevision(previousRevision).height : 0;\n    const newRevisionHeight = previousRevisionHeigth + 1;\n\n\n    const docWithoutRev: any = Object.assign({}, docData, {\n        _rev: undefined,\n        _rev_tree: undefined,\n        /**\n         * All _meta properties MUST NOT be part of the\n         * revision hash.\n         * Plugins might temporarily store data in the _meta\n         * field and strip it away when the document is replicated\n         * or written to another storage.\n         */\n        _meta: undefined\n    });\n\n    /**\n     * The revision height must be part of the hash\n     * as the last parameter of the document data.\n     * This is required to ensure we never ever create\n     * two different document states that have the same revision\n     * hash. Even writing the exact same document data\n     * must have to result in a different hash so that\n     * the replication can known if the state just looks equal\n     * or if it is really exactly the equal state in data and time.\n     */\n    delete docWithoutRev._rev;\n    docWithoutRev._rev = previousDocData ? newRevisionHeight : 1;\n\n    const diggestString = JSON.stringify(docWithoutRev);\n\n    const revisionHash = hashFunction(diggestString);\n    return newRevisionHeight + '-' + revisionHash;\n}\n\n\n/**\n * Faster way to check the equalness of document lists\n * compared to doing a deep-equal.\n * Here we only check the ids and revisions.\n */\nexport function areRxDocumentArraysEqual<RxDocType>(\n    primaryPath: StringKeys<RxDocumentData<RxDocType>>,\n    ar1: RxDocumentData<RxDocType>[],\n    ar2: RxDocumentData<RxDocType>[]\n): boolean {\n    if (ar1.length !== ar2.length) {\n        return false;\n    }\n    let i = 0;\n    const len = ar1.length;\n    while (i < len) {\n        const row1 = ar1[i];\n        const row2 = ar2[i];\n        i++;\n\n        if (\n            row1._rev !== row2._rev ||\n            row1[primaryPath] !== row2[primaryPath]\n        ) {\n            return false;\n        }\n    }\n    return true;\n}\n\n/**\n * overwrites the getter with the actual value\n * Mostly used for caching stuff on the first run\n */\nexport function overwriteGetterForCaching<ValueType = any>(\n    obj: any,\n    getterName: string,\n    value: ValueType\n): ValueType {\n    Object.defineProperty(obj, getterName, {\n        get: function () {\n            return value;\n        }\n    });\n    return value;\n}\n\n/**\n * returns true if the given name is likely a folder path\n */\nexport function isFolderPath(name: string) {\n    // do not check, if foldername is given\n    if (\n        name.includes('/') || // unix\n        name.includes('\\\\') // windows\n    ) {\n        return true;\n    } else {\n        return false;\n    }\n}\n\nexport function getFromMapOrThrow<K, V>(map: Map<K, V> | WeakMap<any, V>, key: K): V {\n    const val = map.get(key);\n    if (typeof val === 'undefined') {\n        throw new Error('missing value from map ' + key);\n    }\n    return val;\n}\n\nexport function getFromObjectOrThrow<V>(\n    obj: { [k: string]: V; },\n    key: string\n): V {\n    const val = obj[key];\n    if (!val) {\n        throw new Error('missing value from object ' + key);\n    }\n    return val;\n}\n\n/**\n * returns true if the supplied argument is either an Array<T> or a Readonly<Array<T>>\n */\nexport function isMaybeReadonlyArray(x: any): x is MaybeReadonly<any[]> {\n    // While this looks strange, it's a workaround for an issue in TypeScript:\n    // https://github.com/microsoft/TypeScript/issues/17002\n    //\n    // The problem is that `Array.isArray` as a type guard returns `false` for a readonly array,\n    // but at runtime the object is an array and the runtime call to `Array.isArray` would return `true`.\n    // The type predicate here allows for both `Array<T>` and `Readonly<Array<T>>` to pass a type check while\n    // still performing runtime type inspection.\n    return Array.isArray(x);\n}\n\n\n/**\n * Use this in array.filter() to remove all empty slots\n * and have the correct typings afterwards.\n * @link https://stackoverflow.com/a/46700791/3443137\n */\nexport function arrayFilterNotEmpty<TValue>(value: TValue | null | undefined): value is TValue {\n    if (value === null || value === undefined) {\n        return false;\n    }\n    return true;\n}\n\n\n/**\n * NO! We cannot just use btoa() and atob()\n * because they do not work correctly with binary data.\n * @link https://stackoverflow.com/q/30106476/3443137\n */\nimport { encode, decode } from 'js-base64';\n\n/**\n * atob() and btoa() do not work well with non ascii chars,\n * so we have to use these helper methods instead.\n * @link https://stackoverflow.com/a/30106551/3443137\n */\n// Encoding UTF8 -> base64\nexport function b64EncodeUnicode(str: string) {\n    return encode(str);\n}\n\n// Decoding base64 -> UTF8\nexport function b64DecodeUnicode(str: string) {\n    return decode(str);\n}\n\n/**\n * @link https://stackoverflow.com/a/9458996/3443137\n */\nexport function arrayBufferToBase64(buffer: ArrayBuffer) {\n    let binary = '';\n    const bytes = new Uint8Array(buffer);\n    const len = bytes.byteLength;\n    for (let i = 0; i < len; i++) {\n        binary += String.fromCharCode(bytes[i]);\n    }\n    return btoa(binary);\n}\n\n\n/**\n * This is an abstraction over the Blob/Buffer data structure.\n * We need this because it behaves different in different JavaScript runtimes.\n * Since RxDB 13.0.0 we switch to Blob-only because Node.js does not support\n * the Blob data structure which is also supported by the browsers.\n */\nexport const blobBufferUtil = {\n    /**\n     * depending if we are on node or browser,\n     * we have to use Buffer(node) or Blob(browser)\n     */\n    createBlobBuffer(\n        data: string,\n        type: string\n    ): BlobBuffer {\n        const blobBuffer = new Blob([data], {\n            type\n        });\n        return blobBuffer;\n    },\n    /**\n     * depending if we are on node or browser,\n     * we have to use Buffer(node) or Blob(browser)\n     */\n    async createBlobBufferFromBase64(\n        base64String: string,\n        type: string\n    ): Promise<BlobBuffer> {\n        const base64Response = await fetch(`data:${type};base64,${base64String}`);\n        const blob = await base64Response.blob();\n        return blob;\n\n    },\n    isBlobBuffer(data: any): boolean {\n        if (data instanceof Blob || (typeof Buffer !== 'undefined' && Buffer.isBuffer(data))) {\n            return true;\n        } else {\n            return false;\n        }\n    },\n    toString(blobBuffer: BlobBuffer | string): Promise<string> {\n        /**\n         * in the electron-renderer we have a typed array insteaf of a blob\n         * so we have to transform it.\n         * @link https://github.com/pubkey/rxdb/issues/1371\n         */\n        const blobBufferType = Object.prototype.toString.call(blobBuffer);\n        if (blobBufferType === '[object Uint8Array]') {\n            blobBuffer = new Blob([blobBuffer]);\n        }\n        if (typeof blobBuffer === 'string') {\n            return Promise.resolve(blobBuffer);\n        }\n\n        return (blobBuffer as Blob).text();\n    },\n    async toBase64String(blobBuffer: BlobBuffer | string): Promise<string> {\n        if (typeof blobBuffer === 'string') {\n            return blobBuffer;\n        }\n\n        /**\n         * in the electron-renderer we have a typed array insteaf of a blob\n         * so we have to transform it.\n         * @link https://github.com/pubkey/rxdb/issues/1371\n         */\n        const blobBufferType = Object.prototype.toString.call(blobBuffer);\n        if (blobBufferType === '[object Uint8Array]') {\n            blobBuffer = new Blob([blobBuffer]);\n        }\n\n        const arrayBuffer = await fetch(URL.createObjectURL(blobBuffer as Blob)).then(res => res.arrayBuffer());\n        return arrayBufferToBase64(arrayBuffer);\n    },\n    size(blobBuffer: BlobBuffer): number {\n        return (blobBuffer as Blob).size;\n    }\n};\n\n/**\n * Using shareReplay() without settings will not unsubscribe\n * if there are no more subscribers.\n * So we use these defaults.\n * @link https://cartant.medium.com/rxjs-whats-changed-with-sharereplay-65c098843e95\n */\nexport const RXJS_SHARE_REPLAY_DEFAULTS = {\n    bufferSize: 1,\n    refCount: true\n};\n\n/**\n * We use 1 as minimum so that the value is never falsy.\n * This const is used in several places because querying\n * with a value lower then the minimum could give false results.\n */\nexport const RX_META_LWT_MINIMUM = 1;\n\nexport function getDefaultRxDocumentMeta(): RxDocumentMeta {\n    return {\n        /**\n         * Set this to 1 to not waste performance\n         * while calling new Date()..\n         * The storage wrappers will anyway update\n         * the lastWrite time while calling transformDocumentDataFromRxDBToRxStorage()\n         */\n        lwt: RX_META_LWT_MINIMUM\n    };\n}\n\n/**\n * Returns a revision that is not valid.\n * Use this to have correct typings\n * while the storage wrapper anyway will overwrite the revision.\n */\nexport function getDefaultRevision(): string {\n    /**\n     * Use a non-valid revision format,\n     * to ensure that the RxStorage will throw\n     * when the revision is not replaced downstream.\n     */\n    return '';\n}\n\n\nexport function getSortDocumentsByLastWriteTimeComparator<RxDocType>(primaryPath: string) {\n    return (a: RxDocumentData<RxDocType>, b: RxDocumentData<RxDocType>) => {\n        if (a._meta.lwt === b._meta.lwt) {\n            if ((b as any)[primaryPath] < (a as any)[primaryPath]) {\n                return 1;\n            } else {\n                return -1;\n            }\n        } else {\n            return a._meta.lwt - b._meta.lwt;\n        }\n    };\n}\nexport function sortDocumentsByLastWriteTime<RxDocType>(\n    primaryPath: string,\n    docs: RxDocumentData<RxDocType>[]\n): RxDocumentData<RxDocType>[] {\n    return docs.sort(getSortDocumentsByLastWriteTimeComparator(primaryPath));\n}\n\n\n\n/**\n * To get specific nested path values from objects,\n * RxDB normally uses the 'object-path' npm module.\n * But when performance is really relevant, this is not fast enough.\n * Instead we use a monad that can prepare some stuff up front\n * and we can re-use the generated function.\n */\nexport type ObjectPathMonadFunction<T, R = any> = (obj: T) => R;\nexport function objectPathMonad<T, R = any>(objectPath: string): ObjectPathMonadFunction<T, R> {\n    const split = objectPath.split('.');\n\n    /**\n     * Performance shortcut,\n     * if no nested path is used,\n     * directly return the field of the object.\n     */\n    if (split.length === 1) {\n        return (obj: T) => (obj as any)[objectPath];\n    }\n\n\n    return (obj: T) => {\n        let currentVal: any = obj;\n        let t = 0;\n        while (t < split.length) {\n            const subPath = split[t];\n            currentVal = currentVal[subPath];\n            if (typeof currentVal === 'undefined') {\n                return currentVal;\n            }\n            t++;\n        }\n        return currentVal;\n    };\n}\n\n\nexport function deepFreeze<T>(o: T): T {\n    Object.freeze(o);\n    Object.getOwnPropertyNames(o).forEach(function (prop) {\n        if (\n            (o as any).hasOwnProperty(prop)\n            &&\n            (o as any)[prop] !== null\n            &&\n            (\n                typeof (o as any)[prop] === 'object'\n                ||\n                typeof (o as any)[prop] === 'function'\n            )\n            &&\n            !Object.isFrozen((o as any)[prop])\n        ) {\n            deepFreeze((o as any)[prop]);\n        }\n    });\n    return o;\n}\n\n\n\nexport function errorToPlainJson(err: Error | TypeError | RxError | RxTypeError): PlainJsonError {\n    const ret: PlainJsonError = {\n        name: err.name,\n        message: err.message,\n        stack: err.stack,\n        rxdb: (err as any).rxdb\n    };\n    return ret;\n}\n","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nexport default function _toPropertyKey(arg) {\n  var key = toPrimitive(arg, \"string\");\n  return _typeof(key) === \"symbol\" ? key : String(key);\n}","import _typeof from \"./typeof.js\";\nexport default function _toPrimitive(input, hint) {\n  if (_typeof(input) !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (_typeof(res) !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}","import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, toPropertyKey(descriptor.key), descriptor);\n  }\n}\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","export default function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nimport isNativeReflectConstruct from \"./isNativeReflectConstruct.js\";\nexport default function _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    _construct = Reflect.construct.bind();\n  } else {\n    _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n  return _construct.apply(null, arguments);\n}","import getPrototypeOf from \"./getPrototypeOf.js\";\nimport setPrototypeOf from \"./setPrototypeOf.js\";\nimport isNativeFunction from \"./isNativeFunction.js\";\nimport construct from \"./construct.js\";\nexport default function _wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n  _wrapNativeSuper = function _wrapNativeSuper(Class) {\n    if (Class === null || !isNativeFunction(Class)) return Class;\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n      _cache.set(Class, Wrapper);\n    }\n    function Wrapper() {\n      return construct(Class, arguments, getPrototypeOf(this).constructor);\n    }\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return setPrototypeOf(Wrapper, Class);\n  };\n  return _wrapNativeSuper(Class);\n}","export default function _isNativeFunction(fn) {\n  return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n}","/**\n * functions that can or should be overwritten by plugins\n * IMPORTANT: Do not import any big stuff from RxDB here!\n * An 'overwritable' can be used inside WebWorkers for RxStorage only,\n * and we do not want to have the full RxDB lib bundled in them.\n */\n\nimport type { DeepReadonly } from './types/util';\n\nexport const overwritable = {\n    /**\n     * if this method is overwritten with one\n     * that returns true, we do additional checks\n     * which help the developer but have bad performance\n     */\n    isDevMode(): boolean {\n        return false;\n    },\n\n    /**\n     * Deep freezes and object when in dev-mode.\n     * Deep-Freezing has the same performance as deep-cloning, so we only do that in dev-mode.\n     * Also, we can ensure the readonly state via typescript\n     * @link https://developer.mozilla.org/de/docs/Web/JavaScript/Reference/Global_Objects/Object/freeze\n     */\n    deepFreezeWhenDevMode<T>(obj: T): DeepReadonly<T> {\n        return obj as any;\n    },\n\n    /**\n     * overwritten to map error-codes to text-messages\n     */\n    tunnelErrorMessage(message: string): string {\n        return `RxDB Error-Code ${message}.\n        Error messages are not included in RxDB core to reduce build size.\n        - To find out what this error means, either use the dev-mode-plugin https://rxdb.info/dev-mode.html\n        - or search for the error code here: https://github.com/pubkey/rxdb/search?q=${message}\n        `;\n    }\n};\n","/**\n * here we use custom errors with the additional field 'parameters'\n */\n\nimport { overwritable } from './overwritable';\nimport type {\n    RxErrorParameters,\n    RxErrorKey,\n    RxStorageBulkWriteError\n} from './types';\n\n/**\n * transform an object of parameters to a presentable string\n */\nfunction parametersToString(parameters: any): string {\n    let ret = '';\n    if (Object.keys(parameters).length === 0)\n        return ret;\n    ret += 'Given parameters: {\\n';\n    ret += Object.keys(parameters)\n        .map(k => {\n            let paramStr = '[object Object]';\n            try {\n                paramStr = JSON.stringify(\n                    parameters[k],\n                    (_k, v) => v === undefined ? null : v,\n                    2\n                );\n            } catch (e) { }\n            return k + ':' + paramStr;\n        })\n        .join('\\n');\n    ret += '}';\n    return ret;\n}\n\nfunction messageForError(\n    message: string,\n    code: string,\n    parameters: any\n): string {\n    return 'RxError (' + code + '):' + '\\n' +\n        message + '\\n' +\n        parametersToString(parameters);\n}\n\nexport class RxError extends Error {\n    public code: RxErrorKey;\n    public message: string;\n    public parameters: RxErrorParameters;\n    public rxdb: true;\n    constructor(\n        code: RxErrorKey,\n        message: string,\n        parameters: RxErrorParameters = {}\n    ) {\n        const mes = messageForError(message, code, parameters);\n        super(mes);\n        this.code = code;\n        this.message = mes;\n        this.parameters = parameters;\n        this.rxdb = true; // tag them as internal\n    }\n    get name(): string {\n        return 'RxError (' + this.code + ')';\n    }\n    toString(): string {\n        return this.message;\n    }\n    get typeError(): boolean {\n        return false;\n    }\n}\n\nexport class RxTypeError extends TypeError {\n    public code: RxErrorKey;\n    public message: string;\n    public parameters: RxErrorParameters;\n    public rxdb: true;\n    constructor(\n        code: RxErrorKey,\n        message: string,\n        parameters: RxErrorParameters = {}\n    ) {\n        const mes = messageForError(message, code, parameters);\n        super(mes);\n        this.code = code;\n        this.message = mes;\n        this.parameters = parameters;\n        this.rxdb = true; // tag them as internal\n    }\n    get name(): string {\n        return 'RxTypeError (' + this.code + ')';\n    }\n    toString(): string {\n        return this.message;\n    }\n    get typeError(): boolean {\n        return true;\n    }\n}\n\nexport function newRxError(\n    code: RxErrorKey,\n    parameters?: RxErrorParameters\n): RxError {\n    return new RxError(\n        code,\n        overwritable.tunnelErrorMessage(code),\n        parameters\n    );\n}\n\nexport function newRxTypeError(\n    code: RxErrorKey,\n    parameters?: RxErrorParameters\n): RxTypeError {\n    return new RxTypeError(\n        code,\n        overwritable.tunnelErrorMessage(code),\n        parameters\n    );\n}\n\n\n/**\n * Returns the error if it is a 409 conflict,\n * return false if it is another error.\n */\nexport function isBulkWriteConflictError<RxDocType>(\n    err: RxStorageBulkWriteError<RxDocType> | any\n): RxStorageBulkWriteError<RxDocType> | false {\n    if (\n        err.status === 409\n    ) {\n        return err;\n    } else {\n        return false;\n    }\n}\n","import objectPath from 'object-path';\nimport { newRxError } from './rx-error';\nimport type {\n    CompositePrimaryKey,\n    DeepReadonly,\n    JsonSchema,\n    PrimaryKey,\n    RxDocumentData,\n    RxJsonSchema,\n    RxStorageDefaultCheckpoint,\n    StringKeys\n} from './types';\nimport { clone, flatClone, isMaybeReadonlyArray, RX_META_LWT_MINIMUM, sortObject, trimDots } from './util';\n\n/**\n * Helper function to create a valid RxJsonSchema\n * with a given version.\n */\nexport function getPseudoSchemaForVersion<T = any>(\n    version: number,\n    primaryKey: StringKeys<T>\n): RxJsonSchema<RxDocumentData<T>> {\n    const pseudoSchema: RxJsonSchema<RxDocumentData<T>> = fillWithDefaultSettings({\n        version,\n        type: 'object',\n        primaryKey: primaryKey as any,\n        properties: {\n            [primaryKey]: {\n                type: 'string',\n                maxLength: 100\n            }\n        } as any,\n        required: [primaryKey]\n    });\n    return pseudoSchema;\n}\n\n/**\n * Returns the sub-schema for a given path\n */\nexport function getSchemaByObjectPath<T = any>(\n    rxJsonSchema: RxJsonSchema<T>,\n    path: keyof T | string\n): JsonSchema {\n    let usePath: string = path as string;\n    usePath = usePath.replace(/\\./g, '.properties.');\n    usePath = 'properties.' + usePath;\n    usePath = trimDots(usePath);\n\n    const ret = objectPath.get(rxJsonSchema, usePath);\n    return ret;\n}\n\nexport function fillPrimaryKey<T>(\n    primaryPath: keyof T,\n    jsonSchema: RxJsonSchema<T>,\n    documentData: RxDocumentData<T>\n): RxDocumentData<T> {\n    const cloned = flatClone(documentData);\n    const newPrimary = getComposedPrimaryKeyOfDocumentData<T>(\n        jsonSchema,\n        documentData\n    );\n    const existingPrimary: string | undefined = documentData[primaryPath] as any;\n    if (\n        existingPrimary &&\n        existingPrimary !== newPrimary\n    ) {\n        throw newRxError(\n            'DOC19',\n            {\n                args: {\n                    documentData,\n                    existingPrimary,\n                    newPrimary,\n                },\n                schema: jsonSchema\n            });\n    }\n\n    (cloned as any)[primaryPath] = newPrimary;\n    return cloned;\n}\n\nexport function getPrimaryFieldOfPrimaryKey<RxDocType>(\n    primaryKey: PrimaryKey<RxDocType>\n): StringKeys<RxDocType> {\n    if (typeof primaryKey === 'string') {\n        return primaryKey as any;\n    } else {\n        return (primaryKey as CompositePrimaryKey<RxDocType>).key;\n    }\n}\n\n/**\n * Returns the composed primaryKey of a document by its data.\n */\nexport function getComposedPrimaryKeyOfDocumentData<RxDocType>(\n    jsonSchema: RxJsonSchema<RxDocType> | RxJsonSchema<RxDocumentData<RxDocType>>,\n    documentData: Partial<RxDocType>\n): string {\n    if (typeof jsonSchema.primaryKey === 'string') {\n        return (documentData as any)[jsonSchema.primaryKey];\n    }\n\n    const compositePrimary: CompositePrimaryKey<RxDocType> = jsonSchema.primaryKey as any;\n    return compositePrimary.fields.map(field => {\n        const value = objectPath.get(documentData as any, field as string);\n        if (typeof value === 'undefined') {\n            throw newRxError('DOC18', { args: { field, documentData } });\n        }\n        return value;\n    }).join(compositePrimary.separator);\n}\n\n\n/**\n * Normalize the RxJsonSchema.\n * We need this to ensure everything is set up properly\n * and we have the same hash on schemas that represent the same value but\n * have different json.\n *\n * - Orders the schemas attributes by alphabetical order\n * - Adds the primaryKey to all indexes that do not contain the primaryKey\n * - We need this for deterministic sort order on all queries, which is required for event-reduce to work.\n *\n * @return RxJsonSchema - ordered and filled\n */\nexport function normalizeRxJsonSchema<T>(jsonSchema: RxJsonSchema<T>): RxJsonSchema<T> {\n    // TODO do we need the deep clone() here?\n    const normalizedSchema: RxJsonSchema<T> = sortObject(clone(jsonSchema));\n\n    // indexes must NOT be sorted because sort order is important here.\n    if (jsonSchema.indexes) {\n        normalizedSchema.indexes = Array.from(jsonSchema.indexes);\n    }\n\n    // primaryKey.fields must NOT be sorted because sort order is important here.\n    if (\n        typeof normalizedSchema.primaryKey === 'object' &&\n        typeof jsonSchema.primaryKey === 'object'\n    ) {\n        normalizedSchema.primaryKey.fields = jsonSchema.primaryKey.fields;\n    }\n\n\n\n    return normalizedSchema;\n}\n\n/**\n * fills the schema-json with default-settings\n * @return cloned schemaObj\n */\nexport function fillWithDefaultSettings<T = any>(\n    schemaObj: RxJsonSchema<T>\n): RxJsonSchema<RxDocumentData<T>> {\n    schemaObj = flatClone(schemaObj);\n    const primaryPath: string = getPrimaryFieldOfPrimaryKey(schemaObj.primaryKey);\n    schemaObj.properties = flatClone(schemaObj.properties);\n\n    // additionalProperties is always false\n    schemaObj.additionalProperties = false;\n\n    // fill with key-compression-state ()\n    if (!schemaObj.hasOwnProperty('keyCompression')) {\n        schemaObj.keyCompression = false;\n    }\n\n    // indexes must be array\n    schemaObj.indexes = schemaObj.indexes ? schemaObj.indexes.slice(0) : [];\n\n    // required must be array\n    schemaObj.required = schemaObj.required ? schemaObj.required.slice(0) : [];\n\n    // encrypted must be array\n    schemaObj.encrypted = schemaObj.encrypted ? schemaObj.encrypted.slice(0) : [];\n\n    /**\n     * TODO we should not need to add the internal fields to the schema.\n     * Better remove the fields before validation.\n     */\n    // add _rev\n    (schemaObj.properties as any)._rev = {\n        type: 'string',\n        minLength: 1\n    };\n\n    // add attachments\n    (schemaObj.properties as any)._attachments = {\n        type: 'object'\n    };\n\n    // add deleted flag\n    (schemaObj.properties as any)._deleted = {\n        type: 'boolean'\n    };\n\n    // add meta property\n    (schemaObj.properties as any)._meta = RX_META_SCHEMA;\n\n    /**\n     * meta fields are all required\n     */\n    schemaObj.required = schemaObj.required ? schemaObj.required.slice(0) : [];\n    (schemaObj.required as string[]).push('_deleted');\n    (schemaObj.required as string[]).push('_rev');\n    (schemaObj.required as string[]).push('_meta');\n    (schemaObj.required as string[]).push('_attachments');\n\n    // final fields are always required\n    const finalFields = getFinalFields(schemaObj);\n    schemaObj.required = schemaObj.required\n        .concat(finalFields as any)\n        .filter((field: string) => !field.includes('.'))\n        .filter((elem: any, pos: any, arr: any) => arr.indexOf(elem) === pos); // unique;\n\n    // version is 0 by default\n    schemaObj.version = schemaObj.version || 0;\n\n    /**\n     * Append primary key to indexes that do not contain the primaryKey.\n     * All indexes must have the primaryKey to ensure a deterministic sort order.\n     */\n    if (schemaObj.indexes) {\n        schemaObj.indexes = schemaObj.indexes.map(index => {\n            const arIndex = isMaybeReadonlyArray(index) ? index.slice(0) : [index];\n            if (!arIndex.includes(primaryPath)) {\n                const modifiedIndex = arIndex.slice(0);\n                modifiedIndex.push(primaryPath);\n                return modifiedIndex;\n            }\n            return arIndex;\n        });\n    }\n\n    return schemaObj as any;\n}\n\n\nexport const RX_META_SCHEMA: JsonSchema = {\n    type: 'object',\n    properties: {\n        /**\n         * The last-write time.\n         * Unix time in milliseconds.\n         */\n        lwt: {\n            type: 'number',\n            /**\n             * We use 1 as minimum so that the value is never falsy.\n             */\n            minimum: RX_META_LWT_MINIMUM,\n            maximum: 1000000000000000,\n            multipleOf: 0.01\n        }\n    },\n    /**\n     * Additional properties are allowed\n     * and can be used by plugins to set various flags.\n     */\n    additionalProperties: true as any,\n    required: [\n        'lwt'\n    ]\n};\n\n\n/**\n * returns the final-fields of the schema\n * @return field-names of the final-fields\n */\nexport function getFinalFields<T = any>(\n    jsonSchema: RxJsonSchema<T>\n): string[] {\n    const ret = Object.keys(jsonSchema.properties)\n        .filter(key => (jsonSchema as any).properties[key].final);\n\n    // primary is also final\n    const primaryPath = getPrimaryFieldOfPrimaryKey(jsonSchema.primaryKey);\n    ret.push(primaryPath);\n\n    // fields of composite primary are final\n    if (typeof jsonSchema.primaryKey !== 'string') {\n        (jsonSchema.primaryKey as CompositePrimaryKey<T>).fields\n            .forEach(field => ret.push(field as string));\n    }\n\n    return ret;\n}\n\n\nexport const DEFAULT_CHECKPOINT_SCHEMA: DeepReadonly<JsonSchema<RxStorageDefaultCheckpoint>> = {\n    type: 'object',\n    properties: {\n        id: {\n            type: 'string'\n        },\n        lwt: {\n            type: 'number'\n        }\n    },\n    required: [\n        'id',\n        'lwt'\n    ],\n    additionalProperties: false\n} as const;\n","import { useOperators, OperatorType } from 'mingo/core';\nimport { Query } from 'mingo/query';\nimport type { MangoQuerySelector } from './types';\n\nimport { $sort, $project } from 'mingo/operators/pipeline';\nimport {\n    $and,\n    $eq,\n    $elemMatch,\n    $exists,\n    $gt,\n    $gte,\n    $in,\n    $lt,\n    $lte,\n    $ne,\n    $nin,\n    $mod,\n    $nor,\n    $not,\n    $or,\n    $regex,\n    $size,\n    $type,\n} from 'mingo/operators/query';\n\nlet mingoInitDone = false;\n\n\n/**\n * The MongoDB query library is huge and we do not need all the operators.\n * If you add an operator here, make sure that you properly add a test in\n * the file /test/unit/rx-storage-query-correctness.test.ts\n *\n * @link https://github.com/kofrasa/mingo#es6\n */\nexport function getMingoQuery<RxDocType>(\n    selector?: MangoQuerySelector<RxDocType>\n) {\n    if (!mingoInitDone) {\n\n        useOperators(OperatorType.PIPELINE, {\n            $sort,\n            $project\n        } as any);\n        useOperators(OperatorType.QUERY, {\n            $and,\n            $eq,\n            $elemMatch,\n            $exists,\n            $gt,\n            $gte,\n            $in,\n            $lt,\n            $lte,\n            $ne,\n            $nin,\n            $mod,\n            $nor,\n            $not,\n            $or,\n            $regex,\n            $size,\n            $type,\n        } as any);\n        mingoInitDone = true;\n    }\n    return new Query(selector as any);\n}\n","import type {\n    DeterministicSortComparator\n} from 'event-reduce-js';\nimport type {\n    DexieStorageInternals,\n    MangoQuery,\n    RxDocumentData,\n    RxJsonSchema\n} from '../../types';\nimport { Dexie } from 'dexie';\nimport { DexieSettings } from '../../types';\nimport { flatClone } from '../../util';\nimport { newRxError } from '../../rx-error';\nimport {\n    getPrimaryFieldOfPrimaryKey,\n    getSchemaByObjectPath\n} from '../../rx-schema-helper';\nimport { getMingoQuery } from '../../rx-query-mingo';\n\nexport const DEXIE_DOCS_TABLE_NAME = 'docs';\nexport const DEXIE_DELETED_DOCS_TABLE_NAME = 'deleted-docs';\nexport const DEXIE_CHANGES_TABLE_NAME = 'changes';\n\nexport const RX_STORAGE_NAME_DEXIE = 'dexie';\n\nconst DEXIE_STATE_DB_BY_NAME: Map<string, DexieStorageInternals> = new Map();\nconst REF_COUNT_PER_DEXIE_DB: Map<DexieStorageInternals, number> = new Map();\nexport function getDexieDbWithTables(\n    databaseName: string,\n    collectionName: string,\n    settings: DexieSettings,\n    schema: RxJsonSchema<any>\n): DexieStorageInternals {\n    const primaryPath = getPrimaryFieldOfPrimaryKey(schema.primaryKey);\n    const dexieDbName = 'rxdb-dexie-' + databaseName + '--' + schema.version + '--' + collectionName;\n    let state = DEXIE_STATE_DB_BY_NAME.get(dexieDbName);\n    if (!state) {\n        state = (async () => {\n            /**\n             * IndexedDB was not designed for dynamically adding tables on the fly,\n             * so we create one dexie database per RxDB storage instance.\n             * @link https://github.com/dexie/Dexie.js/issues/684#issuecomment-373224696\n             */\n            const useSettings = flatClone(settings);\n            useSettings.autoOpen = false;\n            const dexieDb = new Dexie(dexieDbName, useSettings);\n            const dexieStoresSettings = {\n                [DEXIE_DOCS_TABLE_NAME]: getDexieStoreSchema(schema),\n                [DEXIE_CHANGES_TABLE_NAME]: '++sequence, id',\n                /**\n                 * Instead of adding {deleted: false} to every query we run over the document store,\n                 * we move deleted documents into a separate store where they can only be queried\n                 * by primary key.\n                 * This increases performance because it is way easier for the query planner to select\n                 * a good index and we also do not have to add the _deleted field to every index.\n                 *\n                 * We also need the [_meta.lwt+' + primaryPath + '] index for getChangedDocumentsSince()\n                 */\n                [DEXIE_DELETED_DOCS_TABLE_NAME]: primaryPath + ',_meta.lwt,[_meta.lwt+' + primaryPath + ']'\n            };\n\n            dexieDb.version(1).stores(dexieStoresSettings);\n            await dexieDb.open();\n            return {\n                dexieDb,\n                dexieTable: (dexieDb as any)[DEXIE_DOCS_TABLE_NAME],\n                dexieDeletedTable: (dexieDb as any)[DEXIE_DELETED_DOCS_TABLE_NAME]\n            };\n        })();\n\n        DEXIE_STATE_DB_BY_NAME.set(dexieDbName, state);\n        REF_COUNT_PER_DEXIE_DB.set(state, 0);\n    }\n\n    return state;\n}\n\nexport async function closeDexieDb(statePromise: DexieStorageInternals) {\n    const state = await statePromise;\n    const prevCount = REF_COUNT_PER_DEXIE_DB.get(statePromise);\n    const newCount = (prevCount as any) - 1;\n    if (newCount === 0) {\n        state.dexieDb.close();\n        REF_COUNT_PER_DEXIE_DB.delete(statePromise);\n    } else {\n        REF_COUNT_PER_DEXIE_DB.set(statePromise, newCount);\n    }\n}\n\n\nfunction sortDirectionToMingo(direction: 'asc' | 'desc'): 1 | -1 {\n    if (direction === 'asc') {\n        return 1;\n    } else {\n        return -1;\n    }\n}\n\n/**\n * This function is at dexie-helper\n * because we need it in multiple places.\n */\nexport function getDexieSortComparator<RxDocType>(\n    _schema: RxJsonSchema<RxDocumentData<RxDocType>>,\n    query: MangoQuery<RxDocType>\n): DeterministicSortComparator<RxDocType> {\n    const mingoSortObject: {\n        [fieldName: string]: 1 | -1;\n    } = {};\n\n    if (!query.sort) {\n        throw newRxError('SNH', { query });\n    }\n\n    query.sort.forEach(sortBlock => {\n        const key = Object.keys(sortBlock)[0];\n        const direction = Object.values(sortBlock)[0];\n        mingoSortObject[key] = sortDirectionToMingo(direction);\n    });\n\n    const fun: DeterministicSortComparator<RxDocType> = (a: RxDocType, b: RxDocType) => {\n        const sorted = getMingoQuery({}).find([a, b], {}).sort(mingoSortObject);\n        const first = sorted.next();\n        if (first === a) {\n            return -1;\n        } else {\n            return 1;\n        }\n    };\n\n    return fun;\n}\n\n\nexport function ensureNoBooleanIndex(schema: RxJsonSchema<any>) {\n    if (!schema.indexes) {\n        return;\n    }\n    const checkedFields = new Set<string>();\n    schema.indexes.forEach(index => {\n        const fields = Array.isArray(index) ? index : [];\n        fields.forEach(field => {\n            if (checkedFields.has(field)) {\n                return;\n            }\n            checkedFields.add(field);\n            const schemaObj = getSchemaByObjectPath(schema, field);\n            if (schemaObj.type === 'boolean') {\n                throw newRxError('DXE1', {\n                    schema,\n                    index,\n                    field\n                });\n            }\n        });\n    });\n}\n\n\n\n/**\n * It is not possible to set non-javascript-variable-syntax\n * keys as IndexedDB indexes. So we have to substitute the pipe-char\n * which comes from the key-compression plugin.\n */\nexport const DEXIE_PIPE_SUBSTITUTE = '__';\nexport function dexieReplaceIfStartsWithPipe(str: string): string {\n    const split = str.split('.');\n    if (split.length > 1) {\n        return split.map(part => dexieReplaceIfStartsWithPipe(part)).join('.');\n    }\n\n    if (str.startsWith('|')) {\n        const withoutFirst = str.substring(1);\n        return DEXIE_PIPE_SUBSTITUTE + withoutFirst;\n    } else {\n        return str;\n    }\n}\n\nexport function dexieReplaceIfStartsWithPipeRevert(str: string): string {\n    const split = str.split('.');\n    if (split.length > 1) {\n        return split.map(part => dexieReplaceIfStartsWithPipeRevert(part)).join('.');\n    }\n\n    if (str.startsWith(DEXIE_PIPE_SUBSTITUTE)) {\n        const withoutFirst = str.substring(DEXIE_PIPE_SUBSTITUTE.length);\n        return '|' + withoutFirst;\n    } else {\n        return str;\n    }\n}\n\n/**\n * @recursive\n */\nexport function fromStorageToDexie(documentData: RxDocumentData<any>): any {\n    if (!documentData || typeof documentData === 'string' || typeof documentData === 'number' || typeof documentData === 'boolean') {\n        return documentData;\n    } else if (Array.isArray(documentData)) {\n        return documentData.map(row => fromStorageToDexie(row));\n    } else if (typeof documentData === 'object') {\n        const ret: any = {};\n        Object.entries(documentData).forEach(([key, value]) => {\n            if (typeof value === 'object') {\n                value = fromStorageToDexie(value);\n            }\n            ret[dexieReplaceIfStartsWithPipe(key)] = value;\n        });\n        return ret;\n    }\n}\n\nexport function fromDexieToStorage(documentData: any): RxDocumentData<any> {\n    if (!documentData || typeof documentData === 'string' || typeof documentData === 'number' || typeof documentData === 'boolean') {\n        return documentData;\n    } else if (Array.isArray(documentData)) {\n        return documentData.map(row => fromDexieToStorage(row));\n    } else if (typeof documentData === 'object') {\n        const ret: any = {};\n        Object.entries(documentData).forEach(([key, value]) => {\n            if (typeof value === 'object' || Array.isArray(documentData)) {\n                value = fromDexieToStorage(value);\n            }\n            ret[dexieReplaceIfStartsWithPipeRevert(key)] = value;\n        });\n        return ret;\n    }\n}\n\n\n/**\n * Creates a string that can be used to create the dexie store.\n * @link https://dexie.org/docs/API-Reference#quick-reference\n */\nexport function getDexieStoreSchema(\n    rxJsonSchema: RxJsonSchema<any>\n): string {\n    let parts: string[][] = [];\n\n    /**\n     * First part must be the primary key\n     * @link https://github.com/dexie/Dexie.js/issues/1307#issuecomment-846590912\n     */\n    const primaryKey = getPrimaryFieldOfPrimaryKey(rxJsonSchema.primaryKey);\n    parts.push([primaryKey]);\n\n    // add other indexes\n    if (rxJsonSchema.indexes) {\n        rxJsonSchema.indexes.forEach(index => {\n            const arIndex = Array.isArray(index) ? index : [index];\n            parts.push(arIndex);\n        });\n    }\n\n    // we also need the _meta.lwt+primaryKey index for the getChangedDocumentsSince() method.\n    parts.push(['_meta.lwt', primaryKey]);\n\n    /**\n     * It is not possible to set non-javascript-variable-syntax\n     * keys as IndexedDB indexes. So we have to substitute the pipe-char\n     * which comes from the key-compression plugin.\n     */\n    parts = parts.map(part => {\n        return part.map(str => dexieReplaceIfStartsWithPipe(str));\n    });\n\n    return parts.map(part => {\n        if (part.length === 1) {\n            return part[0];\n        } else {\n            return '[' + part.join('+') + ']';\n        }\n    }).join(', ');\n}\n\n/**\n * Returns all documents in the database.\n * Non-deleted plus deleted ones.\n */\nexport async function getDocsInDb<RxDocType>(\n    internals: DexieStorageInternals,\n    docIds: string[]\n): Promise<RxDocumentData<RxDocType>[]> {\n    const state = await internals;\n    const [\n        nonDeletedDocsInDb,\n        deletedDocsInDb\n    ] = await Promise.all([\n        state.dexieTable.bulkGet(docIds),\n        state.dexieDeletedTable.bulkGet(docIds)\n    ]);\n    const docsInDb = deletedDocsInDb.slice(0);\n    nonDeletedDocsInDb.forEach((doc, idx) => {\n        if (doc) {\n            docsInDb[idx] = doc;\n        }\n    });\n    return docsInDb;\n}\n","/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n        desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n\r\nexport function __classPrivateFieldIn(state, receiver) {\r\n    if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\r\n    return typeof state === \"function\" ? receiver === state : state.has(receiver);\r\n}\r\n","export function isFunction(value) {\n    return typeof value === 'function';\n}\n//# sourceMappingURL=isFunction.js.map","export function createErrorClass(createImpl) {\n    var _super = function (instance) {\n        Error.call(instance);\n        instance.stack = new Error().stack;\n    };\n    var ctorFunc = createImpl(_super);\n    ctorFunc.prototype = Object.create(Error.prototype);\n    ctorFunc.prototype.constructor = ctorFunc;\n    return ctorFunc;\n}\n//# sourceMappingURL=createErrorClass.js.map","import { createErrorClass } from './createErrorClass';\nexport var UnsubscriptionError = createErrorClass(function (_super) {\n    return function UnsubscriptionErrorImpl(errors) {\n        _super(this);\n        this.message = errors\n            ? errors.length + \" errors occurred during unsubscription:\\n\" + errors.map(function (err, i) { return i + 1 + \") \" + err.toString(); }).join('\\n  ')\n            : '';\n        this.name = 'UnsubscriptionError';\n        this.errors = errors;\n    };\n});\n//# sourceMappingURL=UnsubscriptionError.js.map","export function arrRemove(arr, item) {\n    if (arr) {\n        var index = arr.indexOf(item);\n        0 <= index && arr.splice(index, 1);\n    }\n}\n//# sourceMappingURL=arrRemove.js.map","import { __read, __spreadArray, __values } from \"tslib\";\nimport { isFunction } from './util/isFunction';\nimport { UnsubscriptionError } from './util/UnsubscriptionError';\nimport { arrRemove } from './util/arrRemove';\nvar Subscription = (function () {\n    function Subscription(initialTeardown) {\n        this.initialTeardown = initialTeardown;\n        this.closed = false;\n        this._parentage = null;\n        this._finalizers = null;\n    }\n    Subscription.prototype.unsubscribe = function () {\n        var e_1, _a, e_2, _b;\n        var errors;\n        if (!this.closed) {\n            this.closed = true;\n            var _parentage = this._parentage;\n            if (_parentage) {\n                this._parentage = null;\n                if (Array.isArray(_parentage)) {\n                    try {\n                        for (var _parentage_1 = __values(_parentage), _parentage_1_1 = _parentage_1.next(); !_parentage_1_1.done; _parentage_1_1 = _parentage_1.next()) {\n                            var parent_1 = _parentage_1_1.value;\n                            parent_1.remove(this);\n                        }\n                    }\n                    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                    finally {\n                        try {\n                            if (_parentage_1_1 && !_parentage_1_1.done && (_a = _parentage_1.return)) _a.call(_parentage_1);\n                        }\n                        finally { if (e_1) throw e_1.error; }\n                    }\n                }\n                else {\n                    _parentage.remove(this);\n                }\n            }\n            var initialFinalizer = this.initialTeardown;\n            if (isFunction(initialFinalizer)) {\n                try {\n                    initialFinalizer();\n                }\n                catch (e) {\n                    errors = e instanceof UnsubscriptionError ? e.errors : [e];\n                }\n            }\n            var _finalizers = this._finalizers;\n            if (_finalizers) {\n                this._finalizers = null;\n                try {\n                    for (var _finalizers_1 = __values(_finalizers), _finalizers_1_1 = _finalizers_1.next(); !_finalizers_1_1.done; _finalizers_1_1 = _finalizers_1.next()) {\n                        var finalizer = _finalizers_1_1.value;\n                        try {\n                            execFinalizer(finalizer);\n                        }\n                        catch (err) {\n                            errors = errors !== null && errors !== void 0 ? errors : [];\n                            if (err instanceof UnsubscriptionError) {\n                                errors = __spreadArray(__spreadArray([], __read(errors)), __read(err.errors));\n                            }\n                            else {\n                                errors.push(err);\n                            }\n                        }\n                    }\n                }\n                catch (e_2_1) { e_2 = { error: e_2_1 }; }\n                finally {\n                    try {\n                        if (_finalizers_1_1 && !_finalizers_1_1.done && (_b = _finalizers_1.return)) _b.call(_finalizers_1);\n                    }\n                    finally { if (e_2) throw e_2.error; }\n                }\n            }\n            if (errors) {\n                throw new UnsubscriptionError(errors);\n            }\n        }\n    };\n    Subscription.prototype.add = function (teardown) {\n        var _a;\n        if (teardown && teardown !== this) {\n            if (this.closed) {\n                execFinalizer(teardown);\n            }\n            else {\n                if (teardown instanceof Subscription) {\n                    if (teardown.closed || teardown._hasParent(this)) {\n                        return;\n                    }\n                    teardown._addParent(this);\n                }\n                (this._finalizers = (_a = this._finalizers) !== null && _a !== void 0 ? _a : []).push(teardown);\n            }\n        }\n    };\n    Subscription.prototype._hasParent = function (parent) {\n        var _parentage = this._parentage;\n        return _parentage === parent || (Array.isArray(_parentage) && _parentage.includes(parent));\n    };\n    Subscription.prototype._addParent = function (parent) {\n        var _parentage = this._parentage;\n        this._parentage = Array.isArray(_parentage) ? (_parentage.push(parent), _parentage) : _parentage ? [_parentage, parent] : parent;\n    };\n    Subscription.prototype._removeParent = function (parent) {\n        var _parentage = this._parentage;\n        if (_parentage === parent) {\n            this._parentage = null;\n        }\n        else if (Array.isArray(_parentage)) {\n            arrRemove(_parentage, parent);\n        }\n    };\n    Subscription.prototype.remove = function (teardown) {\n        var _finalizers = this._finalizers;\n        _finalizers && arrRemove(_finalizers, teardown);\n        if (teardown instanceof Subscription) {\n            teardown._removeParent(this);\n        }\n    };\n    Subscription.EMPTY = (function () {\n        var empty = new Subscription();\n        empty.closed = true;\n        return empty;\n    })();\n    return Subscription;\n}());\nexport { Subscription };\nexport var EMPTY_SUBSCRIPTION = Subscription.EMPTY;\nexport function isSubscription(value) {\n    return (value instanceof Subscription ||\n        (value && 'closed' in value && isFunction(value.remove) && isFunction(value.add) && isFunction(value.unsubscribe)));\n}\nfunction execFinalizer(finalizer) {\n    if (isFunction(finalizer)) {\n        finalizer();\n    }\n    else {\n        finalizer.unsubscribe();\n    }\n}\n//# sourceMappingURL=Subscription.js.map","export var config = {\n    onUnhandledError: null,\n    onStoppedNotification: null,\n    Promise: undefined,\n    useDeprecatedSynchronousErrorHandling: false,\n    useDeprecatedNextContext: false,\n};\n//# sourceMappingURL=config.js.map","import { __read, __spreadArray } from \"tslib\";\nexport var timeoutProvider = {\n    setTimeout: function (handler, timeout) {\n        var args = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            args[_i - 2] = arguments[_i];\n        }\n        var delegate = timeoutProvider.delegate;\n        if (delegate === null || delegate === void 0 ? void 0 : delegate.setTimeout) {\n            return delegate.setTimeout.apply(delegate, __spreadArray([handler, timeout], __read(args)));\n        }\n        return setTimeout.apply(void 0, __spreadArray([handler, timeout], __read(args)));\n    },\n    clearTimeout: function (handle) {\n        var delegate = timeoutProvider.delegate;\n        return ((delegate === null || delegate === void 0 ? void 0 : delegate.clearTimeout) || clearTimeout)(handle);\n    },\n    delegate: undefined,\n};\n//# sourceMappingURL=timeoutProvider.js.map","import { config } from '../config';\nimport { timeoutProvider } from '../scheduler/timeoutProvider';\nexport function reportUnhandledError(err) {\n    timeoutProvider.setTimeout(function () {\n        var onUnhandledError = config.onUnhandledError;\n        if (onUnhandledError) {\n            onUnhandledError(err);\n        }\n        else {\n            throw err;\n        }\n    });\n}\n//# sourceMappingURL=reportUnhandledError.js.map","export function noop() { }\n//# sourceMappingURL=noop.js.map","export var COMPLETE_NOTIFICATION = (function () { return createNotification('C', undefined, undefined); })();\nexport function errorNotification(error) {\n    return createNotification('E', undefined, error);\n}\nexport function nextNotification(value) {\n    return createNotification('N', value, undefined);\n}\nexport function createNotification(kind, value, error) {\n    return {\n        kind: kind,\n        value: value,\n        error: error,\n    };\n}\n//# sourceMappingURL=NotificationFactories.js.map","import { config } from '../config';\nvar context = null;\nexport function errorContext(cb) {\n    if (config.useDeprecatedSynchronousErrorHandling) {\n        var isRoot = !context;\n        if (isRoot) {\n            context = { errorThrown: false, error: null };\n        }\n        cb();\n        if (isRoot) {\n            var _a = context, errorThrown = _a.errorThrown, error = _a.error;\n            context = null;\n            if (errorThrown) {\n                throw error;\n            }\n        }\n    }\n    else {\n        cb();\n    }\n}\nexport function captureError(err) {\n    if (config.useDeprecatedSynchronousErrorHandling && context) {\n        context.errorThrown = true;\n        context.error = err;\n    }\n}\n//# sourceMappingURL=errorContext.js.map","import { __extends } from \"tslib\";\nimport { isFunction } from './util/isFunction';\nimport { isSubscription, Subscription } from './Subscription';\nimport { config } from './config';\nimport { reportUnhandledError } from './util/reportUnhandledError';\nimport { noop } from './util/noop';\nimport { nextNotification, errorNotification, COMPLETE_NOTIFICATION } from './NotificationFactories';\nimport { timeoutProvider } from './scheduler/timeoutProvider';\nimport { captureError } from './util/errorContext';\nvar Subscriber = (function (_super) {\n    __extends(Subscriber, _super);\n    function Subscriber(destination) {\n        var _this = _super.call(this) || this;\n        _this.isStopped = false;\n        if (destination) {\n            _this.destination = destination;\n            if (isSubscription(destination)) {\n                destination.add(_this);\n            }\n        }\n        else {\n            _this.destination = EMPTY_OBSERVER;\n        }\n        return _this;\n    }\n    Subscriber.create = function (next, error, complete) {\n        return new SafeSubscriber(next, error, complete);\n    };\n    Subscriber.prototype.next = function (value) {\n        if (this.isStopped) {\n            handleStoppedNotification(nextNotification(value), this);\n        }\n        else {\n            this._next(value);\n        }\n    };\n    Subscriber.prototype.error = function (err) {\n        if (this.isStopped) {\n            handleStoppedNotification(errorNotification(err), this);\n        }\n        else {\n            this.isStopped = true;\n            this._error(err);\n        }\n    };\n    Subscriber.prototype.complete = function () {\n        if (this.isStopped) {\n            handleStoppedNotification(COMPLETE_NOTIFICATION, this);\n        }\n        else {\n            this.isStopped = true;\n            this._complete();\n        }\n    };\n    Subscriber.prototype.unsubscribe = function () {\n        if (!this.closed) {\n            this.isStopped = true;\n            _super.prototype.unsubscribe.call(this);\n            this.destination = null;\n        }\n    };\n    Subscriber.prototype._next = function (value) {\n        this.destination.next(value);\n    };\n    Subscriber.prototype._error = function (err) {\n        try {\n            this.destination.error(err);\n        }\n        finally {\n            this.unsubscribe();\n        }\n    };\n    Subscriber.prototype._complete = function () {\n        try {\n            this.destination.complete();\n        }\n        finally {\n            this.unsubscribe();\n        }\n    };\n    return Subscriber;\n}(Subscription));\nexport { Subscriber };\nvar _bind = Function.prototype.bind;\nfunction bind(fn, thisArg) {\n    return _bind.call(fn, thisArg);\n}\nvar ConsumerObserver = (function () {\n    function ConsumerObserver(partialObserver) {\n        this.partialObserver = partialObserver;\n    }\n    ConsumerObserver.prototype.next = function (value) {\n        var partialObserver = this.partialObserver;\n        if (partialObserver.next) {\n            try {\n                partialObserver.next(value);\n            }\n            catch (error) {\n                handleUnhandledError(error);\n            }\n        }\n    };\n    ConsumerObserver.prototype.error = function (err) {\n        var partialObserver = this.partialObserver;\n        if (partialObserver.error) {\n            try {\n                partialObserver.error(err);\n            }\n            catch (error) {\n                handleUnhandledError(error);\n            }\n        }\n        else {\n            handleUnhandledError(err);\n        }\n    };\n    ConsumerObserver.prototype.complete = function () {\n        var partialObserver = this.partialObserver;\n        if (partialObserver.complete) {\n            try {\n                partialObserver.complete();\n            }\n            catch (error) {\n                handleUnhandledError(error);\n            }\n        }\n    };\n    return ConsumerObserver;\n}());\nvar SafeSubscriber = (function (_super) {\n    __extends(SafeSubscriber, _super);\n    function SafeSubscriber(observerOrNext, error, complete) {\n        var _this = _super.call(this) || this;\n        var partialObserver;\n        if (isFunction(observerOrNext) || !observerOrNext) {\n            partialObserver = {\n                next: (observerOrNext !== null && observerOrNext !== void 0 ? observerOrNext : undefined),\n                error: error !== null && error !== void 0 ? error : undefined,\n                complete: complete !== null && complete !== void 0 ? complete : undefined,\n            };\n        }\n        else {\n            var context_1;\n            if (_this && config.useDeprecatedNextContext) {\n                context_1 = Object.create(observerOrNext);\n                context_1.unsubscribe = function () { return _this.unsubscribe(); };\n                partialObserver = {\n                    next: observerOrNext.next && bind(observerOrNext.next, context_1),\n                    error: observerOrNext.error && bind(observerOrNext.error, context_1),\n                    complete: observerOrNext.complete && bind(observerOrNext.complete, context_1),\n                };\n            }\n            else {\n                partialObserver = observerOrNext;\n            }\n        }\n        _this.destination = new ConsumerObserver(partialObserver);\n        return _this;\n    }\n    return SafeSubscriber;\n}(Subscriber));\nexport { SafeSubscriber };\nfunction handleUnhandledError(error) {\n    if (config.useDeprecatedSynchronousErrorHandling) {\n        captureError(error);\n    }\n    else {\n        reportUnhandledError(error);\n    }\n}\nfunction defaultErrorHandler(err) {\n    throw err;\n}\nfunction handleStoppedNotification(notification, subscriber) {\n    var onStoppedNotification = config.onStoppedNotification;\n    onStoppedNotification && timeoutProvider.setTimeout(function () { return onStoppedNotification(notification, subscriber); });\n}\nexport var EMPTY_OBSERVER = {\n    closed: true,\n    next: noop,\n    error: defaultErrorHandler,\n    complete: noop,\n};\n//# sourceMappingURL=Subscriber.js.map","export var observable = (function () { return (typeof Symbol === 'function' && Symbol.observable) || '@@observable'; })();\n//# sourceMappingURL=observable.js.map","export function identity(x) {\n    return x;\n}\n//# sourceMappingURL=identity.js.map","import { identity } from './identity';\nexport function pipe() {\n    var fns = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        fns[_i] = arguments[_i];\n    }\n    return pipeFromArray(fns);\n}\nexport function pipeFromArray(fns) {\n    if (fns.length === 0) {\n        return identity;\n    }\n    if (fns.length === 1) {\n        return fns[0];\n    }\n    return function piped(input) {\n        return fns.reduce(function (prev, fn) { return fn(prev); }, input);\n    };\n}\n//# sourceMappingURL=pipe.js.map","import { SafeSubscriber, Subscriber } from './Subscriber';\nimport { isSubscription } from './Subscription';\nimport { observable as Symbol_observable } from './symbol/observable';\nimport { pipeFromArray } from './util/pipe';\nimport { config } from './config';\nimport { isFunction } from './util/isFunction';\nimport { errorContext } from './util/errorContext';\nvar Observable = (function () {\n    function Observable(subscribe) {\n        if (subscribe) {\n            this._subscribe = subscribe;\n        }\n    }\n    Observable.prototype.lift = function (operator) {\n        var observable = new Observable();\n        observable.source = this;\n        observable.operator = operator;\n        return observable;\n    };\n    Observable.prototype.subscribe = function (observerOrNext, error, complete) {\n        var _this = this;\n        var subscriber = isSubscriber(observerOrNext) ? observerOrNext : new SafeSubscriber(observerOrNext, error, complete);\n        errorContext(function () {\n            var _a = _this, operator = _a.operator, source = _a.source;\n            subscriber.add(operator\n                ?\n                    operator.call(subscriber, source)\n                : source\n                    ?\n                        _this._subscribe(subscriber)\n                    :\n                        _this._trySubscribe(subscriber));\n        });\n        return subscriber;\n    };\n    Observable.prototype._trySubscribe = function (sink) {\n        try {\n            return this._subscribe(sink);\n        }\n        catch (err) {\n            sink.error(err);\n        }\n    };\n    Observable.prototype.forEach = function (next, promiseCtor) {\n        var _this = this;\n        promiseCtor = getPromiseCtor(promiseCtor);\n        return new promiseCtor(function (resolve, reject) {\n            var subscriber = new SafeSubscriber({\n                next: function (value) {\n                    try {\n                        next(value);\n                    }\n                    catch (err) {\n                        reject(err);\n                        subscriber.unsubscribe();\n                    }\n                },\n                error: reject,\n                complete: resolve,\n            });\n            _this.subscribe(subscriber);\n        });\n    };\n    Observable.prototype._subscribe = function (subscriber) {\n        var _a;\n        return (_a = this.source) === null || _a === void 0 ? void 0 : _a.subscribe(subscriber);\n    };\n    Observable.prototype[Symbol_observable] = function () {\n        return this;\n    };\n    Observable.prototype.pipe = function () {\n        var operations = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            operations[_i] = arguments[_i];\n        }\n        return pipeFromArray(operations)(this);\n    };\n    Observable.prototype.toPromise = function (promiseCtor) {\n        var _this = this;\n        promiseCtor = getPromiseCtor(promiseCtor);\n        return new promiseCtor(function (resolve, reject) {\n            var value;\n            _this.subscribe(function (x) { return (value = x); }, function (err) { return reject(err); }, function () { return resolve(value); });\n        });\n    };\n    Observable.create = function (subscribe) {\n        return new Observable(subscribe);\n    };\n    return Observable;\n}());\nexport { Observable };\nfunction getPromiseCtor(promiseCtor) {\n    var _a;\n    return (_a = promiseCtor !== null && promiseCtor !== void 0 ? promiseCtor : config.Promise) !== null && _a !== void 0 ? _a : Promise;\n}\nfunction isObserver(value) {\n    return value && isFunction(value.next) && isFunction(value.error) && isFunction(value.complete);\n}\nfunction isSubscriber(value) {\n    return (value && value instanceof Subscriber) || (isObserver(value) && isSubscription(value));\n}\n//# sourceMappingURL=Observable.js.map","import { createErrorClass } from './createErrorClass';\nexport var ObjectUnsubscribedError = createErrorClass(function (_super) {\n    return function ObjectUnsubscribedErrorImpl() {\n        _super(this);\n        this.name = 'ObjectUnsubscribedError';\n        this.message = 'object unsubscribed';\n    };\n});\n//# sourceMappingURL=ObjectUnsubscribedError.js.map","import { __extends, __values } from \"tslib\";\nimport { Observable } from './Observable';\nimport { Subscription, EMPTY_SUBSCRIPTION } from './Subscription';\nimport { ObjectUnsubscribedError } from './util/ObjectUnsubscribedError';\nimport { arrRemove } from './util/arrRemove';\nimport { errorContext } from './util/errorContext';\nvar Subject = (function (_super) {\n    __extends(Subject, _super);\n    function Subject() {\n        var _this = _super.call(this) || this;\n        _this.closed = false;\n        _this.currentObservers = null;\n        _this.observers = [];\n        _this.isStopped = false;\n        _this.hasError = false;\n        _this.thrownError = null;\n        return _this;\n    }\n    Subject.prototype.lift = function (operator) {\n        var subject = new AnonymousSubject(this, this);\n        subject.operator = operator;\n        return subject;\n    };\n    Subject.prototype._throwIfClosed = function () {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n    };\n    Subject.prototype.next = function (value) {\n        var _this = this;\n        errorContext(function () {\n            var e_1, _a;\n            _this._throwIfClosed();\n            if (!_this.isStopped) {\n                if (!_this.currentObservers) {\n                    _this.currentObservers = Array.from(_this.observers);\n                }\n                try {\n                    for (var _b = __values(_this.currentObservers), _c = _b.next(); !_c.done; _c = _b.next()) {\n                        var observer = _c.value;\n                        observer.next(value);\n                    }\n                }\n                catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                finally {\n                    try {\n                        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n                    }\n                    finally { if (e_1) throw e_1.error; }\n                }\n            }\n        });\n    };\n    Subject.prototype.error = function (err) {\n        var _this = this;\n        errorContext(function () {\n            _this._throwIfClosed();\n            if (!_this.isStopped) {\n                _this.hasError = _this.isStopped = true;\n                _this.thrownError = err;\n                var observers = _this.observers;\n                while (observers.length) {\n                    observers.shift().error(err);\n                }\n            }\n        });\n    };\n    Subject.prototype.complete = function () {\n        var _this = this;\n        errorContext(function () {\n            _this._throwIfClosed();\n            if (!_this.isStopped) {\n                _this.isStopped = true;\n                var observers = _this.observers;\n                while (observers.length) {\n                    observers.shift().complete();\n                }\n            }\n        });\n    };\n    Subject.prototype.unsubscribe = function () {\n        this.isStopped = this.closed = true;\n        this.observers = this.currentObservers = null;\n    };\n    Object.defineProperty(Subject.prototype, \"observed\", {\n        get: function () {\n            var _a;\n            return ((_a = this.observers) === null || _a === void 0 ? void 0 : _a.length) > 0;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Subject.prototype._trySubscribe = function (subscriber) {\n        this._throwIfClosed();\n        return _super.prototype._trySubscribe.call(this, subscriber);\n    };\n    Subject.prototype._subscribe = function (subscriber) {\n        this._throwIfClosed();\n        this._checkFinalizedStatuses(subscriber);\n        return this._innerSubscribe(subscriber);\n    };\n    Subject.prototype._innerSubscribe = function (subscriber) {\n        var _this = this;\n        var _a = this, hasError = _a.hasError, isStopped = _a.isStopped, observers = _a.observers;\n        if (hasError || isStopped) {\n            return EMPTY_SUBSCRIPTION;\n        }\n        this.currentObservers = null;\n        observers.push(subscriber);\n        return new Subscription(function () {\n            _this.currentObservers = null;\n            arrRemove(observers, subscriber);\n        });\n    };\n    Subject.prototype._checkFinalizedStatuses = function (subscriber) {\n        var _a = this, hasError = _a.hasError, thrownError = _a.thrownError, isStopped = _a.isStopped;\n        if (hasError) {\n            subscriber.error(thrownError);\n        }\n        else if (isStopped) {\n            subscriber.complete();\n        }\n    };\n    Subject.prototype.asObservable = function () {\n        var observable = new Observable();\n        observable.source = this;\n        return observable;\n    };\n    Subject.create = function (destination, source) {\n        return new AnonymousSubject(destination, source);\n    };\n    return Subject;\n}(Observable));\nexport { Subject };\nvar AnonymousSubject = (function (_super) {\n    __extends(AnonymousSubject, _super);\n    function AnonymousSubject(destination, source) {\n        var _this = _super.call(this) || this;\n        _this.destination = destination;\n        _this.source = source;\n        return _this;\n    }\n    AnonymousSubject.prototype.next = function (value) {\n        var _a, _b;\n        (_b = (_a = this.destination) === null || _a === void 0 ? void 0 : _a.next) === null || _b === void 0 ? void 0 : _b.call(_a, value);\n    };\n    AnonymousSubject.prototype.error = function (err) {\n        var _a, _b;\n        (_b = (_a = this.destination) === null || _a === void 0 ? void 0 : _a.error) === null || _b === void 0 ? void 0 : _b.call(_a, err);\n    };\n    AnonymousSubject.prototype.complete = function () {\n        var _a, _b;\n        (_b = (_a = this.destination) === null || _a === void 0 ? void 0 : _a.complete) === null || _b === void 0 ? void 0 : _b.call(_a);\n    };\n    AnonymousSubject.prototype._subscribe = function (subscriber) {\n        var _a, _b;\n        return (_b = (_a = this.source) === null || _a === void 0 ? void 0 : _a.subscribe(subscriber)) !== null && _b !== void 0 ? _b : EMPTY_SUBSCRIPTION;\n    };\n    return AnonymousSubject;\n}(Subject));\nexport { AnonymousSubject };\n//# sourceMappingURL=Subject.js.map","import { getPrimaryFieldOfPrimaryKey } from './rx-schema-helper';\nimport type {\n    FilledMangoQuery,\n    MangoQuerySelector,\n    RxDocumentData,\n    RxJsonSchema,\n    RxQueryPlan,\n    RxQueryPlanerOpts\n} from './types';\n\n\nexport const INDEX_MAX = String.fromCharCode(65535);\nexport const INDEX_MIN = -Infinity;\n\n/**\n * Returns the query plan which contains\n * information about how to run the query\n * and which indexes to use.\n *\n * This is used in some storage like Memory, dexie.js and IndexedDB.\n */\nexport function getQueryPlan<RxDocType>(\n    schema: RxJsonSchema<RxDocumentData<RxDocType>>,\n    query: FilledMangoQuery<RxDocType>\n): RxQueryPlan {\n    const primaryPath = getPrimaryFieldOfPrimaryKey(schema.primaryKey);\n    const selector = query.selector;\n\n    let indexes: string[][] = schema.indexes ? schema.indexes.slice(0) as any : [];\n    if (query.index) {\n        indexes = [query.index];\n    } else {\n        indexes.push([primaryPath]);\n    }\n\n    const optimalSortIndex = query.sort.map(sortField => Object.keys(sortField)[0]);\n    const optimalSortIndexCompareString = optimalSortIndex.join(',');\n    /**\n     * Most storages do not support descending indexes\n     * so having a 'desc' in the sorting, means we always have to re-sort the results.\n     */\n    const hasDescSorting = !!query.sort.find(sortField => Object.values(sortField)[0] === 'desc');\n\n    let currentBestQuality = -1;\n    let currentBestQueryPlan: RxQueryPlan | undefined;\n\n    indexes.forEach((index) => {\n        let inclusiveEnd = true;\n        let inclusiveStart = true;\n        const opts: RxQueryPlanerOpts[] = index.map(indexField => {\n            const matcher = selector[indexField];\n            const operators = matcher ? Object.keys(matcher) : [];\n\n            let matcherOpts: RxQueryPlanerOpts = {} as any;\n\n            if (\n                !matcher ||\n                !operators.length\n            ) {\n                matcherOpts = {\n                    startKey: inclusiveStart ? INDEX_MIN : INDEX_MAX,\n                    endKey: inclusiveEnd ? INDEX_MAX : INDEX_MIN,\n                    inclusiveStart: true,\n                    inclusiveEnd: true\n                };\n            } else {\n                operators.forEach(operator => {\n                    if (LOGICAL_OPERATORS.has(operator)) {\n                        const operatorValue = matcher[operator];\n                        const partialOpts = getMatcherQueryOpts(operator, operatorValue);\n                        matcherOpts = Object.assign(matcherOpts, partialOpts);\n                    }\n                });\n            }\n\n            // fill missing attributes\n            if (typeof matcherOpts.startKey === 'undefined') {\n                matcherOpts.startKey = INDEX_MIN;\n            }\n            if (typeof matcherOpts.endKey === 'undefined') {\n                matcherOpts.endKey = INDEX_MAX;\n            }\n            if (typeof matcherOpts.inclusiveStart === 'undefined') {\n                matcherOpts.inclusiveStart = true;\n            }\n            if (typeof matcherOpts.inclusiveEnd === 'undefined') {\n                matcherOpts.inclusiveEnd = true;\n            }\n\n\n            if (inclusiveStart && !matcherOpts.inclusiveStart) {\n                inclusiveStart = false;\n            }\n            if (inclusiveEnd && !matcherOpts.inclusiveEnd) {\n                inclusiveEnd = false;\n            }\n\n            return matcherOpts;\n        });\n\n        const queryPlan: RxQueryPlan = {\n            index,\n            startKeys: opts.map(opt => opt.startKey),\n            endKeys: opts.map(opt => opt.endKey),\n            inclusiveEnd,\n            inclusiveStart,\n            sortFieldsSameAsIndexFields: !hasDescSorting && optimalSortIndexCompareString === index.join(','),\n            selectorSatisfiedByIndex: isSelectorSatisfiedByIndex(index, query.selector)\n        };\n        const quality = rateQueryPlan(\n            schema,\n            query,\n            queryPlan\n        );\n        if (\n            (\n                quality > 0 &&\n                quality > currentBestQuality\n            ) ||\n            query.index\n        ) {\n            currentBestQuality = quality;\n            currentBestQueryPlan = queryPlan;\n        }\n    });\n\n    /**\n     * No index found, use the default index\n     */\n    if (!currentBestQueryPlan) {\n        currentBestQueryPlan = {\n            index: [primaryPath],\n            startKeys: [INDEX_MIN],\n            endKeys: [INDEX_MAX],\n            inclusiveEnd: true,\n            inclusiveStart: true,\n            sortFieldsSameAsIndexFields: !hasDescSorting && optimalSortIndexCompareString === primaryPath,\n            selectorSatisfiedByIndex: isSelectorSatisfiedByIndex([primaryPath], query.selector)\n        };\n    }\n\n    return currentBestQueryPlan;\n}\n\nexport const LOGICAL_OPERATORS = new Set(['$eq', '$gt', '$gte', '$lt', '$lte']);\nexport const LOWER_BOUND_LOGICAL_OPERATORS = new Set(['$eq', '$gt', '$gte']);\nexport const UPPER_BOUND_LOGICAL_OPERATORS = new Set(['$eq', '$lt', '$lte']);\n\nexport function isSelectorSatisfiedByIndex(\n    index: string[],\n    selector: MangoQuerySelector\n): boolean {\n    const selectorEntries = Object.entries(selector);\n    const hasNonMatchingOperator = selectorEntries\n        .find(([fieldName, operation]) => {\n            if (!index.includes(fieldName)) {\n                return true;\n            }\n            const hasNonLogicOperator = Object.entries(operation)\n                .find(([op, _value]) => !LOGICAL_OPERATORS.has(op));\n            return hasNonLogicOperator;\n        });\n    if (hasNonMatchingOperator) {\n        return false;\n    }\n\n\n    let prevLowerBoundaryField: any;\n    const hasMoreThenOneLowerBoundaryField = index.find(fieldName => {\n        const operation = selector[fieldName];\n        if (!operation) {\n            return false;\n        }\n        const hasLowerLogicOp = Object.keys(operation).find(key => LOWER_BOUND_LOGICAL_OPERATORS.has(key));\n        if (prevLowerBoundaryField && hasLowerLogicOp) {\n            return true;\n        } else if (hasLowerLogicOp !== '$eq') {\n            prevLowerBoundaryField = hasLowerLogicOp;\n        }\n        return false;\n    });\n    if (hasMoreThenOneLowerBoundaryField) {\n        return false;\n    }\n\n    let prevUpperBoundaryField: any;\n    const hasMoreThenOneUpperBoundaryField = index.find(fieldName => {\n        const operation = selector[fieldName];\n        if (!operation) {\n            return false;\n        }\n        const hasUpperLogicOp = Object.keys(operation).find(key => UPPER_BOUND_LOGICAL_OPERATORS.has(key));\n        if (prevUpperBoundaryField && hasUpperLogicOp) {\n            return true;\n        } else if (hasUpperLogicOp !== '$eq') {\n            prevUpperBoundaryField = hasUpperLogicOp;\n        }\n        return false;\n    });\n    if (hasMoreThenOneUpperBoundaryField) {\n        return false;\n    }\n\n    return true;\n}\n\nexport function getMatcherQueryOpts(\n    operator: string,\n    operatorValue: any\n): Partial<RxQueryPlanerOpts> {\n    switch (operator) {\n        case '$eq':\n            return {\n                startKey: operatorValue,\n                endKey: operatorValue\n            };\n        case '$lte':\n            return {\n                endKey: operatorValue\n            };\n        case '$gte':\n            return {\n                startKey: operatorValue\n            };\n        case '$lt':\n            return {\n                endKey: operatorValue,\n                inclusiveEnd: false\n            };\n        case '$gt':\n            return {\n                startKey: operatorValue,\n                inclusiveStart: false\n            };\n        default:\n            throw new Error('SNH');\n    }\n}\n\n\n/**\n * Returns a number that determines the quality of the query plan.\n * Higher number means better query plan.\n */\nexport function rateQueryPlan<RxDocType>(\n    schema: RxJsonSchema<RxDocumentData<RxDocType>>,\n    query: FilledMangoQuery<RxDocType>,\n    queryPlan: RxQueryPlan\n): number {\n    let quality: number = 0;\n\n    const pointsPerMatchingKey = 10;\n    const idxOfFirstMinStartKey = queryPlan.startKeys.findIndex(keyValue => keyValue === INDEX_MIN);\n    if (idxOfFirstMinStartKey > 0) {\n        quality = quality + (idxOfFirstMinStartKey * pointsPerMatchingKey);\n    }\n\n    const idxOfFirstMaxEndKey = queryPlan.endKeys.findIndex(keyValue => keyValue === INDEX_MAX);\n    if (idxOfFirstMaxEndKey > 0) {\n        quality = quality + (idxOfFirstMaxEndKey * pointsPerMatchingKey);\n    }\n\n    const pointsIfNoReSortMustBeDone = 5;\n    if (queryPlan.sortFieldsSameAsIndexFields) {\n        quality = quality + pointsIfNoReSortMustBeDone;\n    }\n\n    return quality;\n}\n","import type {\n    DeterministicSortComparator,\n    QueryMatcher\n} from 'event-reduce-js';\nimport type {\n    RxDocumentData,\n    RxJsonSchema,\n    RxStorageStatics,\n    DexiePreparedQuery,\n    FilledMangoQuery\n} from '../../types';\nimport {\n    getDexieSortComparator\n} from './dexie-helper';\nimport { newRxError } from '../../rx-error';\nimport { getQueryPlan } from '../../query-planner';\nimport { DEFAULT_CHECKPOINT_SCHEMA } from '../../rx-schema-helper';\nimport { getMingoQuery } from '../../rx-query-mingo';\n\nexport const RxStorageDexieStatics: RxStorageStatics = {\n    prepareQuery<RxDocType>(\n        schema: RxJsonSchema<RxDocumentData<RxDocType>>,\n        mutateableQuery: FilledMangoQuery<RxDocType>\n    ): DexiePreparedQuery<RxDocType> {\n\n        if (!mutateableQuery.sort) {\n            throw newRxError('SNH', {\n                query: mutateableQuery\n            });\n        }\n\n        /**\n         * Store the query plan together with the\n         * prepared query to save performance.\n         */\n        const queryPlan = getQueryPlan(\n            schema,\n            mutateableQuery\n        );\n\n        return {\n            query: mutateableQuery,\n            queryPlan\n        };\n    },\n\n    getSortComparator<RxDocType>(\n        schema: RxJsonSchema<RxDocumentData<RxDocType>>,\n        preparedQuery: DexiePreparedQuery<RxDocType>\n    ): DeterministicSortComparator<RxDocType> {\n        return getDexieSortComparator(schema, preparedQuery.query);\n    },\n\n    getQueryMatcher<RxDocType>(\n        _schema: RxJsonSchema<RxDocType>,\n        preparedQuery: DexiePreparedQuery<RxDocType>\n    ): QueryMatcher<RxDocumentData<RxDocType>> {\n        const query = preparedQuery.query;\n        const mingoQuery = getMingoQuery(query.selector);\n        const fun: QueryMatcher<RxDocumentData<RxDocType>> = (doc: RxDocumentData<RxDocType>) => {\n            if (doc._deleted) {\n                return false;\n            }\n            const cursor = mingoQuery.find([doc]);\n            const next = cursor.next();\n            if (next) {\n                return true;\n            } else {\n                return false;\n            }\n        };\n        return fun;\n    },\n\n    checkpointSchema: DEFAULT_CHECKPOINT_SCHEMA\n\n};\n","import { QueryMatcher } from 'event-reduce-js';\nimport type {\n    DexiePreparedQuery,\n    RxDocumentData,\n    RxQueryPlan,\n    RxStorageQueryResult\n} from '../../types';\nimport {\n    dexieReplaceIfStartsWithPipe,\n    DEXIE_DOCS_TABLE_NAME,\n    fromDexieToStorage\n} from './dexie-helper';\nimport { RxStorageDexieStatics } from './dexie-statics';\nimport type { RxStorageInstanceDexie } from './rx-storage-instance-dexie';\n\n\nexport function getKeyRangeByQueryPlan(\n    queryPlan: RxQueryPlan,\n    IDBKeyRange?: any\n) {\n    if (!IDBKeyRange) {\n        if (typeof window === 'undefined') {\n            throw new Error('IDBKeyRange missing');\n        } else {\n            IDBKeyRange = window.IDBKeyRange;\n        }\n    }\n\n    let ret: any;\n    /**\n     * If index has only one field,\n     * we have to pass the keys directly, not the key arrays.\n     */\n    if (queryPlan.index.length === 1) {\n        ret = IDBKeyRange.bound(\n            queryPlan.startKeys[0],\n            queryPlan.endKeys[0],\n            queryPlan.inclusiveStart,\n            queryPlan.inclusiveEnd\n        );\n    } else {\n        ret = IDBKeyRange.bound(\n            queryPlan.startKeys,\n            queryPlan.endKeys,\n            queryPlan.inclusiveStart,\n            queryPlan.inclusiveEnd\n        );\n    }\n    return ret;\n}\n\n\n/**\n * Runs mango queries over the Dexie.js database.\n */\nexport async function dexieQuery<RxDocType>(\n    instance: RxStorageInstanceDexie<RxDocType>,\n    preparedQuery: DexiePreparedQuery<RxDocType>\n): Promise<RxStorageQueryResult<RxDocType>> {\n    const state = await instance.internals;\n    const query = preparedQuery.query;\n\n    const skip = query.skip ? query.skip : 0;\n    const limit = query.limit ? query.limit : Infinity;\n    const skipPlusLimit = skip + limit;\n    const queryPlan = preparedQuery.queryPlan;\n\n    let queryMatcher: QueryMatcher<RxDocumentData<RxDocType>> | false = false;\n    if (!queryPlan.selectorSatisfiedByIndex) {\n        queryMatcher = RxStorageDexieStatics.getQueryMatcher(\n            instance.schema,\n            preparedQuery\n        );\n    }\n\n    const keyRange = getKeyRangeByQueryPlan(\n        queryPlan,\n        (state.dexieDb as any)._options.IDBKeyRange\n    );\n\n    const queryPlanFields: string[] = queryPlan.index;\n\n    let rows: any[] = [];\n    await state.dexieDb.transaction(\n        'r',\n        state.dexieTable,\n        async (dexieTx) => {\n            /**\n             * TODO here we use the native IndexedDB transaction\n             * to get the cursor.\n             * Instead we should not leave Dexie.js API and find\n             * a way to create the cursor with Dexie.js.\n             */\n            const tx = (dexieTx as any).idbtrans;\n\n            // const nativeIndexedDB = state.dexieDb.backendDB();\n            // const trans = nativeIndexedDB.transaction([DEXIE_DOCS_TABLE_NAME], 'readonly');\n\n            const store = tx.objectStore(DEXIE_DOCS_TABLE_NAME);\n            let index: any;\n            if (\n                queryPlanFields.length === 1 &&\n                queryPlanFields[0] === instance.primaryPath\n            ) {\n                index = store;\n            } else {\n                let indexName: string;\n                if (queryPlanFields.length === 1) {\n                    indexName = dexieReplaceIfStartsWithPipe(queryPlanFields[0]);\n                } else {\n                    indexName = '[' +\n                        queryPlanFields\n                            .map(field => dexieReplaceIfStartsWithPipe(field))\n                            .join('+')\n                        + ']';\n                }\n                index = store.index(indexName);\n            }\n            const cursorReq = index.openCursor(keyRange);\n            await new Promise<void>(res => {\n                cursorReq.onsuccess = function (e: any) {\n                    const cursor = e.target.result;\n                    if (cursor) {\n                        // We have a record in cursor.value\n                        const docData = fromDexieToStorage(cursor.value);\n                        if (\n                            !docData._deleted &&\n                            (!queryMatcher || queryMatcher(docData))\n                        ) {\n                            rows.push(docData);\n                        }\n\n                        /**\n                         * If we do not have to manually sort\n                         * and have enough documents,\n                         * we can abort iterating over the cursor\n                         * because we already have every relevant document.\n                         */\n                        if (\n                            queryPlan.sortFieldsSameAsIndexFields &&\n                            rows.length === skipPlusLimit\n                        ) {\n                            res();\n                        } else {\n                            cursor.continue();\n                        }\n                    } else {\n                        // Iteration complete\n                        res();\n                    }\n                };\n            });\n\n\n        }\n    );\n\n\n    if (!queryPlan.sortFieldsSameAsIndexFields) {\n        const sortComparator = RxStorageDexieStatics.getSortComparator(instance.schema, preparedQuery);\n        rows = rows.sort(sortComparator);\n    }\n\n    // apply skip and limit boundaries.\n    rows = rows.slice(skip, skipPlusLimit);\n\n    /**\n     * Comment this in for debugging to check all fields in the database.\n     */\n    // const docsInDb = await state.dexieTable.filter(queryMatcher).toArray();\n    // let documents = docsInDb\n    //     .map(docData => stripDexieKey(docData))\n    //     .sort(sortComparator);\n    // if (preparedQuery.skip) {\n    //     documents = documents.slice(preparedQuery.skip);\n    // }\n    // if (preparedQuery.limit && documents.length > preparedQuery.limit) {\n    //     documents = documents.slice(0, preparedQuery.limit);\n    // }\n\n\n\n    return {\n        documents: rows\n    };\n}\n\n\nexport async function dexieCount<RxDocType>(\n    instance: RxStorageInstanceDexie<RxDocType>,\n    preparedQuery: DexiePreparedQuery<RxDocType>\n): Promise<number> {\n    const state = await instance.internals;\n    const queryPlan = preparedQuery.queryPlan;\n    const queryPlanFields: string[] = queryPlan.index;\n\n    const keyRange = getKeyRangeByQueryPlan(\n        queryPlan,\n        (state.dexieDb as any)._options.IDBKeyRange\n    );\n    let count: number = -1;\n    await state.dexieDb.transaction(\n        'r',\n        state.dexieTable,\n        async (dexieTx) => {\n            const tx = (dexieTx as any).idbtrans;\n            const store = tx.objectStore(DEXIE_DOCS_TABLE_NAME);\n            let index: any;\n            if (\n                queryPlanFields.length === 1 &&\n                queryPlanFields[0] === instance.primaryPath\n            ) {\n                index = store;\n            } else {\n                let indexName: string;\n                if (queryPlanFields.length === 1) {\n                    indexName = dexieReplaceIfStartsWithPipe(queryPlanFields[0]);\n                } else {\n                    indexName = '[' +\n                        queryPlanFields\n                            .map(field => dexieReplaceIfStartsWithPipe(field))\n                            .join('+')\n                        + ']';\n                }\n                index = store.index(indexName);\n            }\n\n            const request = index.count(keyRange);\n            count = await new Promise<number>((res, rej) => {\n                request.onsuccess = function () {\n                    res(request.result);\n                };\n                request.onerror = (err: any) => rej(err);\n            });\n        }\n    );\n    return count;\n}\n","/**\n * Helper functions for accessing the RxStorage instances.\n */\n\nimport { overwritable } from './overwritable';\nimport { newRxError } from './rx-error';\nimport {\n    fillPrimaryKey,\n    getPrimaryFieldOfPrimaryKey\n} from './rx-schema-helper';\nimport type {\n    BulkWriteRow,\n    BulkWriteRowProcessed,\n    ById,\n    CategorizeBulkWriteRowsOutput,\n    EventBulk,\n    RxAttachmentData,\n    RxAttachmentWriteData,\n    RxChangeEvent,\n    RxCollection,\n    RxDatabase,\n    RxDocumentData,\n    RxDocumentWriteData,\n    RxJsonSchema,\n    RxStorageBulkWriteError,\n    RxStorageChangeEvent,\n    RxStorageInstance,\n    RxStorageInstanceCreationParams,\n    StringKeys\n} from './types';\nimport {\n    createRevision,\n    defaultHashFunction,\n    ensureNotFalsy,\n    firstPropertyValueOfObject,\n    flatClone,\n    getDefaultRevision,\n    getDefaultRxDocumentMeta,\n    now,\n    randomCouchString\n} from './util';\n\nexport const INTERNAL_STORAGE_NAME = '_rxdb_internal';\nexport const RX_DATABASE_LOCAL_DOCS_STORAGE_NAME = 'rxdatabase_storage_local';\n\nexport async function getSingleDocument<RxDocType>(\n    storageInstance: RxStorageInstance<RxDocType, any, any>,\n    documentId: string\n): Promise<RxDocumentData<RxDocType> | null> {\n    const results = await storageInstance.findDocumentsById([documentId], false);\n    const doc = results[documentId];\n    if (doc) {\n        return doc;\n    } else {\n        return null;\n    }\n}\n\n/**\n * Writes a single document,\n * throws RxStorageBulkWriteError on failure\n */\nexport async function writeSingle<RxDocType>(\n    instance: RxStorageInstance<RxDocType, any, any>,\n    writeRow: BulkWriteRow<RxDocType>,\n    context: string\n): Promise<RxDocumentData<RxDocType>> {\n    const writeResult = await instance.bulkWrite(\n        [writeRow],\n        context\n    );\n    if (Object.keys(writeResult.error).length > 0) {\n        const error = firstPropertyValueOfObject(writeResult.error);\n        throw error;\n    } else {\n        const ret = firstPropertyValueOfObject(writeResult.success);\n        return ret;\n    }\n}\n\n\n/**\n * Checkpoints must be stackable over another.\n * This is required form some RxStorage implementations\n * like the sharding plugin, where a checkpoint only represents\n * the document state from some, but not all shards.\n */\nexport function stackCheckpoints<CheckpointType>(\n    checkpoints: CheckpointType[]\n): CheckpointType {\n    return Object.assign(\n        {},\n        ...checkpoints\n    );\n}\n\nexport function storageChangeEventToRxChangeEvent<DocType>(\n    isLocal: boolean,\n    rxStorageChangeEvent: RxStorageChangeEvent<DocType>,\n    rxCollection?: RxCollection,\n): RxChangeEvent<DocType> {\n    const documentData = rxStorageChangeEvent.documentData;\n    const previousDocumentData = rxStorageChangeEvent.previousDocumentData;\n    const ret: RxChangeEvent<DocType> = {\n        eventId: rxStorageChangeEvent.eventId,\n        documentId: rxStorageChangeEvent.documentId,\n        collectionName: rxCollection ? rxCollection.name : undefined,\n        startTime: rxStorageChangeEvent.startTime,\n        endTime: rxStorageChangeEvent.endTime,\n        isLocal,\n        operation: rxStorageChangeEvent.operation,\n        documentData: overwritable.deepFreezeWhenDevMode(documentData as any),\n        previousDocumentData: overwritable.deepFreezeWhenDevMode(previousDocumentData as any)\n    };\n    return ret;\n}\n\nexport function throwIfIsStorageWriteError<RxDocType>(\n    collection: RxCollection<RxDocType>,\n    documentId: string,\n    writeData: RxDocumentWriteData<RxDocType> | RxDocType,\n    error: RxStorageBulkWriteError<RxDocType> | undefined\n) {\n    if (error) {\n        if (error.status === 409) {\n            throw newRxError('COL19', {\n                collection: collection.name,\n                id: documentId,\n                error,\n                data: writeData\n            });\n        } else {\n            throw error;\n        }\n    }\n}\n\n\n/**\n * From a list of documents,\n * it will return the document that has the 'newest' state\n * which must be used to create the correct checkpoint\n * for the whole list.\n */\nexport function getNewestOfDocumentStates<RxDocType>(\n    primaryPath: string,\n    docs: RxDocumentData<RxDocType>[]\n): RxDocumentData<RxDocType> {\n    let ret: RxDocumentData<RxDocType> | null = null;\n    docs.forEach(doc => {\n        if (\n            !ret ||\n            doc._meta.lwt > ret._meta.lwt ||\n            (\n                doc._meta.lwt === ret._meta.lwt &&\n                (doc as any)[primaryPath] > (ret as any)[primaryPath]\n            )\n        ) {\n            ret = doc;\n        }\n\n    });\n    return ensureNotFalsy(ret as any);\n}\n\n/**\n * Analyzes a list of BulkWriteRows and determines\n * which documents must be inserted, updated or deleted\n * and which events must be emitted and which documents cause a conflict\n * and must not be written.\n * Used as helper inside of some RxStorage implementations.\n */\nexport function categorizeBulkWriteRows<RxDocType>(\n    storageInstance: RxStorageInstance<any, any, any>,\n    primaryPath: StringKeys<RxDocType>,\n    /**\n     * Current state of the documents\n     * inside of the storage. Used to determine\n     * which writes cause conflicts.\n     * This can be a Map for better performance\n     * but it can also be an object because some storages\n     * need to work with something that is JSON-stringify-able\n     * and we do not want to transform a big object into a Map\n     * each time we use it.\n     */\n    docsInDb:\n    Map<RxDocumentData<RxDocType>[StringKeys<RxDocType>] | string, RxDocumentData<RxDocType>> |\n    ById<RxDocumentData<RxDocType>>,\n    /**\n     * The write rows that are passed to\n     * RxStorageInstance().bulkWrite().\n     */\n    bulkWriteRows: BulkWriteRow<RxDocType>[],\n    context: string\n): CategorizeBulkWriteRowsOutput<RxDocType> {\n    const hasAttachments = !!storageInstance.schema.attachments;\n    const bulkInsertDocs: BulkWriteRowProcessed<RxDocType>[] = [];\n    const bulkUpdateDocs: BulkWriteRowProcessed<RxDocType>[] = [];\n    const errors: ById<RxStorageBulkWriteError<RxDocType>> = {};\n    const changedDocumentIds: RxDocType[StringKeys<RxDocType>][] = [];\n    const eventBulk: EventBulk<RxStorageChangeEvent<RxDocumentData<RxDocType>>, any> = {\n        id: randomCouchString(10),\n        events: [],\n        checkpoint: null,\n        context\n    };\n\n    const attachmentsAdd: {\n        documentId: string;\n        attachmentId: string;\n        attachmentData: RxAttachmentWriteData;\n    }[] = [];\n    const attachmentsRemove: {\n        documentId: string;\n        attachmentId: string;\n    }[] = [];\n    const attachmentsUpdate: {\n        documentId: string;\n        attachmentId: string;\n        attachmentData: RxAttachmentWriteData;\n    }[] = [];\n\n\n    const startTime = now();\n\n    const docsByIdIsMap = typeof docsInDb.get === 'function';\n\n    bulkWriteRows.forEach(writeRow => {\n        const id = writeRow.document[primaryPath];\n        const documentInDb = docsByIdIsMap ? (docsInDb as any).get(id) : (docsInDb as any)[id];\n        let attachmentError: RxStorageBulkWriteError<RxDocType> | undefined;\n\n        if (!documentInDb) {\n            /**\n             * It is possible to insert already deleted documents,\n             * this can happen on replication.\n             */\n            const insertedIsDeleted = writeRow.document._deleted ? true : false;\n            Object.entries(writeRow.document._attachments).forEach(([attachmentId, attachmentData]) => {\n                if (\n                    !(attachmentData as RxAttachmentWriteData).data\n                ) {\n                    attachmentError = {\n                        documentId: id as any,\n                        isError: true,\n                        status: 510,\n                        writeRow\n                    };\n                    errors[id as any] = attachmentError;\n                } else {\n                    attachmentsAdd.push({\n                        documentId: id as any,\n                        attachmentId,\n                        attachmentData: attachmentData as any\n                    });\n                }\n            });\n            if (!attachmentError) {\n                if (hasAttachments) {\n                    bulkInsertDocs.push(stripAttachmentsDataFromRow(writeRow));\n                } else {\n                    bulkInsertDocs.push(writeRow as any);\n                }\n            }\n\n            if (!insertedIsDeleted) {\n                changedDocumentIds.push(id);\n                eventBulk.events.push({\n                    eventId: getUniqueDeterministicEventKey(storageInstance, primaryPath as any, writeRow),\n                    documentId: id as any,\n                    operation: 'INSERT',\n                    documentData: hasAttachments ? stripAttachmentsDataFromDocument(writeRow.document) : writeRow.document as any,\n                    previousDocumentData: hasAttachments && writeRow.previous ? stripAttachmentsDataFromDocument(writeRow.previous) : writeRow.previous as any,\n                    startTime,\n                    endTime: now()\n                });\n            }\n        } else {\n            // update existing document\n            const revInDb: string = documentInDb._rev;\n\n            /**\n             * Check for conflict\n             */\n            if (\n                (\n                    !writeRow.previous\n                ) ||\n                (\n                    !!writeRow.previous &&\n                    revInDb !== writeRow.previous._rev\n                )\n            ) {\n                // is conflict error\n                const err: RxStorageBulkWriteError<RxDocType> = {\n                    isError: true,\n                    status: 409,\n                    documentId: id as any,\n                    writeRow: writeRow,\n                    documentInDb\n                };\n                errors[id as any] = err;\n                return;\n            }\n\n            // handle attachments data\n\n            const updatedRow: BulkWriteRowProcessed<RxDocType> = hasAttachments ? stripAttachmentsDataFromRow(writeRow) : writeRow as any;\n            if (writeRow.document._deleted) {\n                /**\n                 * Deleted documents must have cleared all their attachments.\n                 */\n                if (writeRow.previous) {\n                    Object\n                        .keys(writeRow.previous._attachments)\n                        .forEach(attachmentId => {\n                            attachmentsRemove.push({\n                                documentId: id as any,\n                                attachmentId\n                            });\n                        });\n                }\n            } else {\n                // first check for errors\n                Object\n                    .entries(writeRow.document._attachments)\n                    .find(([attachmentId, attachmentData]) => {\n                        const previousAttachmentData = writeRow.previous ? writeRow.previous._attachments[attachmentId] : undefined;\n                        if (\n                            !previousAttachmentData &&\n                            !(attachmentData as RxAttachmentWriteData).data\n                        ) {\n                            attachmentError = {\n                                documentId: id as any,\n                                documentInDb: documentInDb,\n                                isError: true,\n                                status: 510,\n                                writeRow\n                            };\n                        }\n                        return true;\n                    });\n                if (!attachmentError) {\n                    Object\n                        .entries(writeRow.document._attachments)\n                        .forEach(([attachmentId, attachmentData]) => {\n                            const previousAttachmentData = writeRow.previous ? writeRow.previous._attachments[attachmentId] : undefined;\n                            if (!previousAttachmentData) {\n                                attachmentsAdd.push({\n                                    documentId: id as any,\n                                    attachmentId,\n                                    attachmentData: attachmentData as any\n                                });\n                            } else {\n                                const newDigest = updatedRow.document._attachments[attachmentId].digest;\n                                if (\n                                    (attachmentData as RxAttachmentWriteData).data &&\n                                    /**\n                                     * Performance shortcut,\n                                     * do not update the attachment data if it did not change.\n                                     */\n                                    previousAttachmentData.digest !== newDigest\n                                ) {\n                                    attachmentsUpdate.push({\n                                        documentId: id as any,\n                                        attachmentId,\n                                        attachmentData: attachmentData as RxAttachmentWriteData\n                                    });\n                                }\n                            }\n                        });\n                }\n            }\n            if (attachmentError) {\n                errors[id as any] = attachmentError;\n            } else {\n                bulkUpdateDocs.push(updatedRow);\n            }\n\n            const writeDoc = writeRow.document;\n\n            let eventDocumentData: RxDocumentData<RxDocType> | undefined = null as any;\n            let previousEventDocumentData: RxDocumentData<RxDocType> | undefined = null as any;\n            let operation: 'INSERT' | 'UPDATE' | 'DELETE' = null as any;\n\n            if (writeRow.previous && writeRow.previous._deleted && !writeDoc._deleted) {\n                operation = 'INSERT';\n                eventDocumentData = hasAttachments ? stripAttachmentsDataFromDocument(writeDoc) : writeDoc as any;\n            } else if (writeRow.previous && !writeRow.previous._deleted && !writeDoc._deleted) {\n                operation = 'UPDATE';\n                eventDocumentData = hasAttachments ? stripAttachmentsDataFromDocument(writeDoc) : writeDoc as any;\n                previousEventDocumentData = writeRow.previous;\n            } else if (writeDoc._deleted) {\n                operation = 'DELETE';\n                eventDocumentData = ensureNotFalsy(writeRow.document) as any;\n                previousEventDocumentData = writeRow.previous;\n            } else {\n                throw newRxError('SNH', { args: { writeRow } });\n            }\n\n            changedDocumentIds.push(id);\n            eventBulk.events.push({\n                eventId: getUniqueDeterministicEventKey(storageInstance, primaryPath as any, writeRow),\n                documentId: id as any,\n                documentData: ensureNotFalsy(eventDocumentData),\n                previousDocumentData: previousEventDocumentData,\n                operation: operation,\n                startTime,\n                endTime: now()\n            });\n        }\n    });\n\n    return {\n        bulkInsertDocs,\n        bulkUpdateDocs,\n        errors,\n        changedDocumentIds,\n        eventBulk,\n        attachmentsAdd,\n        attachmentsRemove,\n        attachmentsUpdate\n    };\n}\n\nexport function stripAttachmentsDataFromRow<RxDocType>(writeRow: BulkWriteRow<RxDocType>): BulkWriteRowProcessed<RxDocType> {\n    return {\n        previous: writeRow.previous,\n        document: stripAttachmentsDataFromDocument(writeRow.document)\n    };\n}\n\nexport function getAttachmentSize(\n    attachmentBase64String: string\n): number {\n    return atob(attachmentBase64String).length;\n}\n\n/**\n * Used in custom RxStorage implementations.\n */\nexport function attachmentWriteDataToNormalData(writeData: RxAttachmentData | RxAttachmentWriteData): RxAttachmentData {\n    const data = (writeData as RxAttachmentWriteData).data;\n    if (!data) {\n        return writeData as any;\n    }\n    const ret: RxAttachmentData = {\n        digest: defaultHashFunction(data),\n        length: getAttachmentSize(data),\n        type: writeData.type\n    };\n    return ret;\n}\n\nexport function stripAttachmentsDataFromDocument<RxDocType>(doc: RxDocumentWriteData<RxDocType>): RxDocumentData<RxDocType> {\n    const useDoc: RxDocumentData<RxDocType> = flatClone(doc) as any;\n    useDoc._attachments = {};\n    Object\n        .entries(doc._attachments)\n        .forEach(([attachmentId, attachmentData]) => {\n            useDoc._attachments[attachmentId] = attachmentWriteDataToNormalData(attachmentData);\n        });\n    return useDoc;\n}\n\n/**\n * Flat clone the document data\n * and also the _meta field.\n * Used many times when we want to change the meta\n * during replication etc.\n */\nexport function flatCloneDocWithMeta<RxDocType>(\n    doc: RxDocumentData<RxDocType>\n): RxDocumentData<RxDocType> {\n    const ret = flatClone(doc);\n    ret._meta = flatClone(doc._meta);\n    return ret;\n}\n\n/**\n * Each event is labeled with the id\n * to make it easy to filter out duplicates.\n */\nexport function getUniqueDeterministicEventKey(\n    storageInstance: RxStorageInstance<any, any, any>,\n    primaryPath: string,\n    writeRow: BulkWriteRow<any>\n): string {\n    const docId = writeRow.document[primaryPath];\n    const binaryValues: boolean[] = [\n        !!writeRow.previous,\n        (writeRow.previous && writeRow.previous._deleted),\n        !!writeRow.document._deleted\n    ];\n    const binary = binaryValues.map(v => v ? '1' : '0').join('');\n    const eventKey = storageInstance.databaseName + '|' + storageInstance.collectionName + '|' + docId + '|' + '|' + binary + '|' + writeRow.document._rev;\n    return eventKey;\n}\n\n\n/**\n * Wraps the normal storageInstance of a RxCollection\n * to ensure that all access is properly using the hooks\n * and other data transformations and also ensure that database.lockedRun()\n * is used properly.\n */\nexport function getWrappedStorageInstance<\n    RxDocType,\n    Internals,\n    InstanceCreationOptions,\n    CheckpointType\n>(\n    database: RxDatabase<{}, Internals, InstanceCreationOptions>,\n    storageInstance: RxStorageInstance<RxDocType, Internals, InstanceCreationOptions, CheckpointType>,\n    /**\n     * The original RxJsonSchema\n     * before it was mutated by hooks.\n     */\n    rxJsonSchema: RxJsonSchema<RxDocumentData<RxDocType>>\n): RxStorageInstance<RxDocType, Internals, InstanceCreationOptions> {\n    overwritable.deepFreezeWhenDevMode(rxJsonSchema);\n    const primaryPath = getPrimaryFieldOfPrimaryKey(rxJsonSchema.primaryKey);\n\n    function transformDocumentDataFromRxDBToRxStorage(\n        writeRow: BulkWriteRow<RxDocType>\n    ) {\n        let data = flatClone(writeRow.document);\n        data._meta = flatClone(data._meta);\n\n        /**\n         * Do some checks in dev-mode\n         * that would be too performance expensive\n         * in production.\n         */\n        if (overwritable.isDevMode()) {\n            // ensure that the primary key has not been changed\n            data = fillPrimaryKey(\n                primaryPath,\n                rxJsonSchema,\n                data as any\n            );\n\n            /**\n             * Ensure that the new revision is higher\n             * then the previous one\n             */\n            if (writeRow.previous) {\n                // TODO run this in the dev-mode plugin\n                // const prev = parseRevision(writeRow.previous._rev);\n                // const current = parseRevision(writeRow.document._rev);\n                // if (current.height <= prev.height) {\n                //     throw newRxError('SNH', {\n                //         dataBefore: writeRow.previous,\n                //         dataAfter: writeRow.document,\n                //         args: {\n                //             prev,\n                //             current\n                //         }\n                //     });\n                // }\n            }\n\n            /**\n             * Ensure that _meta fields have been merged\n             * and not replaced.\n             * This is important so that when one plugin A\n             * sets a _meta field and another plugin B does a write\n             * to the document, it must be ensured that the\n             * field of plugin A was not removed.\n             */\n            if (writeRow.previous) {\n                Object.keys(writeRow.previous._meta)\n                    .forEach(metaFieldName => {\n                        if (!writeRow.document._meta.hasOwnProperty(metaFieldName)) {\n                            throw newRxError('SNH', {\n                                dataBefore: writeRow.previous,\n                                dataAfter: writeRow.document\n                            });\n                        }\n                    });\n            }\n        }\n        data._meta.lwt = now();\n\n        /**\n         * Yes we really want to set the revision here.\n         * If you make a plugin that relies on having its own revision\n         * stored into the storage, use this.originalStorageInstance.bulkWrite() instead.\n         */\n        data._rev = createRevision(\n            database.hashFunction,\n            data,\n            writeRow.previous\n        );\n\n        return {\n            document: data,\n            previous: writeRow.previous\n        };\n    }\n\n    const ret: RxStorageInstance<RxDocType, Internals, InstanceCreationOptions> = {\n        schema: storageInstance.schema,\n        internals: storageInstance.internals,\n        collectionName: storageInstance.collectionName,\n        databaseName: storageInstance.databaseName,\n        options: storageInstance.options,\n        bulkWrite(\n            rows: BulkWriteRow<RxDocType>[],\n            context: string\n        ) {\n            const toStorageWriteRows: BulkWriteRow<RxDocType>[] = rows\n                .map(row => transformDocumentDataFromRxDBToRxStorage(row));\n\n            return database.lockedRun(\n                () => storageInstance.bulkWrite(\n                    toStorageWriteRows,\n                    context\n                )\n            )\n                /**\n                 * The RxStorageInstance MUST NOT allow to insert already _deleted documents,\n                 * without sending the previous document version.\n                 * But for better developer experience, RxDB does allow to re-insert deleted documents.\n                 * We do this by automatically fixing the conflict errors for that case\n                 * by running another bulkWrite() and merging the results.\n                 * @link https://github.com/pubkey/rxdb/pull/3839\n                 */\n                .then(writeResult => {\n                    const reInsertErrors: RxStorageBulkWriteError<RxDocType>[] = Object\n                        .values(writeResult.error)\n                        .filter((error) => {\n                            if (\n                                error.status === 409 &&\n                                !error.writeRow.previous &&\n                                !error.writeRow.document._deleted &&\n                                ensureNotFalsy(error.documentInDb)._deleted\n                            ) {\n                                return true;\n                            }\n                            return false;\n                        });\n\n                    if (reInsertErrors.length > 0) {\n                        const useWriteResult: typeof writeResult = {\n                            error: flatClone(writeResult.error),\n                            success: flatClone(writeResult.success)\n                        };\n                        const reInserts: BulkWriteRow<RxDocType>[] = reInsertErrors\n                            .map((error) => {\n                                delete useWriteResult.error[error.documentId];\n                                return {\n                                    previous: error.documentInDb,\n                                    document: Object.assign(\n                                        {},\n                                        error.writeRow.document,\n                                        {\n                                            _rev: createRevision(\n                                                database.hashFunction,\n                                                error.writeRow.document,\n                                                error.documentInDb\n                                            )\n                                        }\n                                    )\n                                };\n                            });\n\n                        return database.lockedRun(\n                            () => storageInstance.bulkWrite(\n                                reInserts,\n                                context\n                            )\n                        ).then(subResult => {\n                            useWriteResult.error = Object.assign(\n                                useWriteResult.error,\n                                subResult.error\n                            );\n                            useWriteResult.success = Object.assign(\n                                useWriteResult.success,\n                                subResult.success\n                            );\n                            return useWriteResult;\n                        });\n                    }\n\n                    return writeResult;\n                });\n        },\n        query(preparedQuery) {\n            return database.lockedRun(\n                () => storageInstance.query(preparedQuery)\n            );\n        },\n        count(preparedQuery) {\n            return database.lockedRun(\n                () => storageInstance.count(preparedQuery)\n            );\n        },\n        findDocumentsById(ids, deleted) {\n            return database.lockedRun(\n                () => storageInstance.findDocumentsById(ids, deleted)\n            );\n        },\n        getAttachmentData(\n            documentId: string,\n            attachmentId: string\n        ) {\n            return database.lockedRun(\n                () => storageInstance.getAttachmentData(documentId, attachmentId)\n            );\n        },\n        getChangedDocumentsSince(limit: number, checkpoint?: any) {\n            return database.lockedRun(\n                () => storageInstance.getChangedDocumentsSince(ensureNotFalsy(limit), checkpoint)\n            );\n        },\n        cleanup(minDeletedTime: number) {\n            return database.lockedRun(\n                () => storageInstance.cleanup(minDeletedTime)\n            );\n        },\n        remove() {\n            return database.lockedRun(\n                () => storageInstance.remove()\n            );\n        },\n        close() {\n            return database.lockedRun(\n                () => storageInstance.close()\n            );\n        },\n        changeStream() {\n            return storageInstance.changeStream();\n        },\n        conflictResultionTasks() {\n            return storageInstance.conflictResultionTasks();\n        },\n        resolveConflictResultionTask(taskSolution) {\n            if (taskSolution.output.isEqual) {\n                return storageInstance.resolveConflictResultionTask(taskSolution);\n            }\n\n            const doc = Object.assign(\n                {},\n                taskSolution.output.documentData,\n                {\n                    _meta: getDefaultRxDocumentMeta(),\n                    _rev: getDefaultRevision(),\n                    _attachments: {}\n                }\n            );\n\n            const documentData = flatClone(doc);\n            delete (documentData as any)._meta;\n            delete (documentData as any)._rev;\n            delete (documentData as any)._attachments;\n\n            return storageInstance.resolveConflictResultionTask({\n                id: taskSolution.id,\n                output: {\n                    isEqual: false,\n                    documentData\n                }\n            });\n        }\n    };\n\n    (ret as any).originalStorageInstance = storageInstance;\n\n    return ret;\n}\n\n/**\n * Each RxStorage implementation should\n * run this method at the first step of createStorageInstance()\n * to ensure that the configuration is correct.\n */\nexport function ensureRxStorageInstanceParamsAreCorrect(\n    params: RxStorageInstanceCreationParams<any, any>\n) {\n    if (params.schema.keyCompression) {\n        throw newRxError('UT5', { args: { params } });\n    }\n    if (hasEncryption(params.schema)) {\n        throw newRxError('UT6', { args: { params } });\n    }\n}\n\nexport function hasEncryption(jsonSchema: RxJsonSchema<any>): boolean {\n    if (\n        (!!jsonSchema.encrypted && jsonSchema.encrypted.length > 0) ||\n        (jsonSchema.attachments && jsonSchema.attachments.encrypted)\n    ) {\n        return true;\n    } else {\n        return false;\n    }\n}\n","import { isFunction } from './isFunction';\nexport function hasLift(source) {\n    return isFunction(source === null || source === void 0 ? void 0 : source.lift);\n}\nexport function operate(init) {\n    return function (source) {\n        if (hasLift(source)) {\n            return source.lift(function (liftedSource) {\n                try {\n                    return init(liftedSource, this);\n                }\n                catch (err) {\n                    this.error(err);\n                }\n            });\n        }\n        throw new TypeError('Unable to lift unknown Observable type');\n    };\n}\n//# sourceMappingURL=lift.js.map","var isArray = Array.isArray;\nexport function argsOrArgArray(args) {\n    return args.length === 1 && isArray(args[0]) ? args[0] : args;\n}\n//# sourceMappingURL=argsOrArgArray.js.map","import { __extends } from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nexport function createOperatorSubscriber(destination, onNext, onComplete, onError, onFinalize) {\n    return new OperatorSubscriber(destination, onNext, onComplete, onError, onFinalize);\n}\nvar OperatorSubscriber = (function (_super) {\n    __extends(OperatorSubscriber, _super);\n    function OperatorSubscriber(destination, onNext, onComplete, onError, onFinalize, shouldUnsubscribe) {\n        var _this = _super.call(this, destination) || this;\n        _this.onFinalize = onFinalize;\n        _this.shouldUnsubscribe = shouldUnsubscribe;\n        _this._next = onNext\n            ? function (value) {\n                try {\n                    onNext(value);\n                }\n                catch (err) {\n                    destination.error(err);\n                }\n            }\n            : _super.prototype._next;\n        _this._error = onError\n            ? function (err) {\n                try {\n                    onError(err);\n                }\n                catch (err) {\n                    destination.error(err);\n                }\n                finally {\n                    this.unsubscribe();\n                }\n            }\n            : _super.prototype._error;\n        _this._complete = onComplete\n            ? function () {\n                try {\n                    onComplete();\n                }\n                catch (err) {\n                    destination.error(err);\n                }\n                finally {\n                    this.unsubscribe();\n                }\n            }\n            : _super.prototype._complete;\n        return _this;\n    }\n    OperatorSubscriber.prototype.unsubscribe = function () {\n        var _a;\n        if (!this.shouldUnsubscribe || this.shouldUnsubscribe()) {\n            var closed_1 = this.closed;\n            _super.prototype.unsubscribe.call(this);\n            !closed_1 && ((_a = this.onFinalize) === null || _a === void 0 ? void 0 : _a.call(this));\n        }\n    };\n    return OperatorSubscriber;\n}(Subscriber));\nexport { OperatorSubscriber };\n//# sourceMappingURL=OperatorSubscriber.js.map","export var isArrayLike = (function (x) { return x && typeof x.length === 'number' && typeof x !== 'function'; });\n//# sourceMappingURL=isArrayLike.js.map","import { isFunction } from \"./isFunction\";\nexport function isPromise(value) {\n    return isFunction(value === null || value === void 0 ? void 0 : value.then);\n}\n//# sourceMappingURL=isPromise.js.map","import { observable as Symbol_observable } from '../symbol/observable';\nimport { isFunction } from './isFunction';\nexport function isInteropObservable(input) {\n    return isFunction(input[Symbol_observable]);\n}\n//# sourceMappingURL=isInteropObservable.js.map","import { isFunction } from './isFunction';\nexport function isAsyncIterable(obj) {\n    return Symbol.asyncIterator && isFunction(obj === null || obj === void 0 ? void 0 : obj[Symbol.asyncIterator]);\n}\n//# sourceMappingURL=isAsyncIterable.js.map","export function createInvalidObservableTypeError(input) {\n    return new TypeError(\"You provided \" + (input !== null && typeof input === 'object' ? 'an invalid object' : \"'\" + input + \"'\") + \" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.\");\n}\n//# sourceMappingURL=throwUnobservableError.js.map","export function getSymbolIterator() {\n    if (typeof Symbol !== 'function' || !Symbol.iterator) {\n        return '@@iterator';\n    }\n    return Symbol.iterator;\n}\nexport var iterator = getSymbolIterator();\n//# sourceMappingURL=iterator.js.map","import { iterator as Symbol_iterator } from '../symbol/iterator';\nimport { isFunction } from './isFunction';\nexport function isIterable(input) {\n    return isFunction(input === null || input === void 0 ? void 0 : input[Symbol_iterator]);\n}\n//# sourceMappingURL=isIterable.js.map","import { __asyncGenerator, __await, __generator } from \"tslib\";\nimport { isFunction } from './isFunction';\nexport function readableStreamLikeToAsyncGenerator(readableStream) {\n    return __asyncGenerator(this, arguments, function readableStreamLikeToAsyncGenerator_1() {\n        var reader, _a, value, done;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0:\n                    reader = readableStream.getReader();\n                    _b.label = 1;\n                case 1:\n                    _b.trys.push([1, , 9, 10]);\n                    _b.label = 2;\n                case 2:\n                    if (!true) return [3, 8];\n                    return [4, __await(reader.read())];\n                case 3:\n                    _a = _b.sent(), value = _a.value, done = _a.done;\n                    if (!done) return [3, 5];\n                    return [4, __await(void 0)];\n                case 4: return [2, _b.sent()];\n                case 5: return [4, __await(value)];\n                case 6: return [4, _b.sent()];\n                case 7:\n                    _b.sent();\n                    return [3, 2];\n                case 8: return [3, 10];\n                case 9:\n                    reader.releaseLock();\n                    return [7];\n                case 10: return [2];\n            }\n        });\n    });\n}\nexport function isReadableStreamLike(obj) {\n    return isFunction(obj === null || obj === void 0 ? void 0 : obj.getReader);\n}\n//# sourceMappingURL=isReadableStreamLike.js.map","import { __asyncValues, __awaiter, __generator, __values } from \"tslib\";\nimport { isArrayLike } from '../util/isArrayLike';\nimport { isPromise } from '../util/isPromise';\nimport { Observable } from '../Observable';\nimport { isInteropObservable } from '../util/isInteropObservable';\nimport { isAsyncIterable } from '../util/isAsyncIterable';\nimport { createInvalidObservableTypeError } from '../util/throwUnobservableError';\nimport { isIterable } from '../util/isIterable';\nimport { isReadableStreamLike, readableStreamLikeToAsyncGenerator } from '../util/isReadableStreamLike';\nimport { isFunction } from '../util/isFunction';\nimport { reportUnhandledError } from '../util/reportUnhandledError';\nimport { observable as Symbol_observable } from '../symbol/observable';\nexport function innerFrom(input) {\n    if (input instanceof Observable) {\n        return input;\n    }\n    if (input != null) {\n        if (isInteropObservable(input)) {\n            return fromInteropObservable(input);\n        }\n        if (isArrayLike(input)) {\n            return fromArrayLike(input);\n        }\n        if (isPromise(input)) {\n            return fromPromise(input);\n        }\n        if (isAsyncIterable(input)) {\n            return fromAsyncIterable(input);\n        }\n        if (isIterable(input)) {\n            return fromIterable(input);\n        }\n        if (isReadableStreamLike(input)) {\n            return fromReadableStreamLike(input);\n        }\n    }\n    throw createInvalidObservableTypeError(input);\n}\nexport function fromInteropObservable(obj) {\n    return new Observable(function (subscriber) {\n        var obs = obj[Symbol_observable]();\n        if (isFunction(obs.subscribe)) {\n            return obs.subscribe(subscriber);\n        }\n        throw new TypeError('Provided object does not correctly implement Symbol.observable');\n    });\n}\nexport function fromArrayLike(array) {\n    return new Observable(function (subscriber) {\n        for (var i = 0; i < array.length && !subscriber.closed; i++) {\n            subscriber.next(array[i]);\n        }\n        subscriber.complete();\n    });\n}\nexport function fromPromise(promise) {\n    return new Observable(function (subscriber) {\n        promise\n            .then(function (value) {\n            if (!subscriber.closed) {\n                subscriber.next(value);\n                subscriber.complete();\n            }\n        }, function (err) { return subscriber.error(err); })\n            .then(null, reportUnhandledError);\n    });\n}\nexport function fromIterable(iterable) {\n    return new Observable(function (subscriber) {\n        var e_1, _a;\n        try {\n            for (var iterable_1 = __values(iterable), iterable_1_1 = iterable_1.next(); !iterable_1_1.done; iterable_1_1 = iterable_1.next()) {\n                var value = iterable_1_1.value;\n                subscriber.next(value);\n                if (subscriber.closed) {\n                    return;\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (iterable_1_1 && !iterable_1_1.done && (_a = iterable_1.return)) _a.call(iterable_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        subscriber.complete();\n    });\n}\nexport function fromAsyncIterable(asyncIterable) {\n    return new Observable(function (subscriber) {\n        process(asyncIterable, subscriber).catch(function (err) { return subscriber.error(err); });\n    });\n}\nexport function fromReadableStreamLike(readableStream) {\n    return fromAsyncIterable(readableStreamLikeToAsyncGenerator(readableStream));\n}\nfunction process(asyncIterable, subscriber) {\n    var asyncIterable_1, asyncIterable_1_1;\n    var e_2, _a;\n    return __awaiter(this, void 0, void 0, function () {\n        var value, e_2_1;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0:\n                    _b.trys.push([0, 5, 6, 11]);\n                    asyncIterable_1 = __asyncValues(asyncIterable);\n                    _b.label = 1;\n                case 1: return [4, asyncIterable_1.next()];\n                case 2:\n                    if (!(asyncIterable_1_1 = _b.sent(), !asyncIterable_1_1.done)) return [3, 4];\n                    value = asyncIterable_1_1.value;\n                    subscriber.next(value);\n                    if (subscriber.closed) {\n                        return [2];\n                    }\n                    _b.label = 3;\n                case 3: return [3, 1];\n                case 4: return [3, 11];\n                case 5:\n                    e_2_1 = _b.sent();\n                    e_2 = { error: e_2_1 };\n                    return [3, 11];\n                case 6:\n                    _b.trys.push([6, , 9, 10]);\n                    if (!(asyncIterable_1_1 && !asyncIterable_1_1.done && (_a = asyncIterable_1.return))) return [3, 8];\n                    return [4, _a.call(asyncIterable_1)];\n                case 7:\n                    _b.sent();\n                    _b.label = 8;\n                case 8: return [3, 10];\n                case 9:\n                    if (e_2) throw e_2.error;\n                    return [7];\n                case 10: return [7];\n                case 11:\n                    subscriber.complete();\n                    return [2];\n            }\n        });\n    });\n}\n//# sourceMappingURL=innerFrom.js.map","export function executeSchedule(parentSubscription, scheduler, work, delay, repeat) {\n    if (delay === void 0) { delay = 0; }\n    if (repeat === void 0) { repeat = false; }\n    var scheduleSubscription = scheduler.schedule(function () {\n        work();\n        if (repeat) {\n            parentSubscription.add(this.schedule(null, delay));\n        }\n        else {\n            this.unsubscribe();\n        }\n    }, delay);\n    parentSubscription.add(scheduleSubscription);\n    if (!repeat) {\n        return scheduleSubscription;\n    }\n}\n//# sourceMappingURL=executeSchedule.js.map","import { map } from './map';\nimport { innerFrom } from '../observable/innerFrom';\nimport { operate } from '../util/lift';\nimport { mergeInternals } from './mergeInternals';\nimport { isFunction } from '../util/isFunction';\nexport function mergeMap(project, resultSelector, concurrent) {\n    if (concurrent === void 0) { concurrent = Infinity; }\n    if (isFunction(resultSelector)) {\n        return mergeMap(function (a, i) { return map(function (b, ii) { return resultSelector(a, b, i, ii); })(innerFrom(project(a, i))); }, concurrent);\n    }\n    else if (typeof resultSelector === 'number') {\n        concurrent = resultSelector;\n    }\n    return operate(function (source, subscriber) { return mergeInternals(source, subscriber, project, concurrent); });\n}\n//# sourceMappingURL=mergeMap.js.map","import { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nexport function map(project, thisArg) {\n    return operate(function (source, subscriber) {\n        var index = 0;\n        source.subscribe(createOperatorSubscriber(subscriber, function (value) {\n            subscriber.next(project.call(thisArg, value, index++));\n        }));\n    });\n}\n//# sourceMappingURL=map.js.map","import { innerFrom } from '../observable/innerFrom';\nimport { executeSchedule } from '../util/executeSchedule';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nexport function mergeInternals(source, subscriber, project, concurrent, onBeforeNext, expand, innerSubScheduler, additionalFinalizer) {\n    var buffer = [];\n    var active = 0;\n    var index = 0;\n    var isComplete = false;\n    var checkComplete = function () {\n        if (isComplete && !buffer.length && !active) {\n            subscriber.complete();\n        }\n    };\n    var outerNext = function (value) { return (active < concurrent ? doInnerSub(value) : buffer.push(value)); };\n    var doInnerSub = function (value) {\n        expand && subscriber.next(value);\n        active++;\n        var innerComplete = false;\n        innerFrom(project(value, index++)).subscribe(createOperatorSubscriber(subscriber, function (innerValue) {\n            onBeforeNext === null || onBeforeNext === void 0 ? void 0 : onBeforeNext(innerValue);\n            if (expand) {\n                outerNext(innerValue);\n            }\n            else {\n                subscriber.next(innerValue);\n            }\n        }, function () {\n            innerComplete = true;\n        }, undefined, function () {\n            if (innerComplete) {\n                try {\n                    active--;\n                    var _loop_1 = function () {\n                        var bufferedValue = buffer.shift();\n                        if (innerSubScheduler) {\n                            executeSchedule(subscriber, innerSubScheduler, function () { return doInnerSub(bufferedValue); });\n                        }\n                        else {\n                            doInnerSub(bufferedValue);\n                        }\n                    };\n                    while (buffer.length && active < concurrent) {\n                        _loop_1();\n                    }\n                    checkComplete();\n                }\n                catch (err) {\n                    subscriber.error(err);\n                }\n            }\n        }));\n    };\n    source.subscribe(createOperatorSubscriber(subscriber, outerNext, function () {\n        isComplete = true;\n        checkComplete();\n    }));\n    return function () {\n        additionalFinalizer === null || additionalFinalizer === void 0 ? void 0 : additionalFinalizer();\n    };\n}\n//# sourceMappingURL=mergeInternals.js.map","import { mergeMap } from './mergeMap';\nimport { identity } from '../util/identity';\nexport function mergeAll(concurrent) {\n    if (concurrent === void 0) { concurrent = Infinity; }\n    return mergeMap(identity, concurrent);\n}\n//# sourceMappingURL=mergeAll.js.map","import { isFunction } from './isFunction';\nimport { isScheduler } from './isScheduler';\nfunction last(arr) {\n    return arr[arr.length - 1];\n}\nexport function popResultSelector(args) {\n    return isFunction(last(args)) ? args.pop() : undefined;\n}\nexport function popScheduler(args) {\n    return isScheduler(last(args)) ? args.pop() : undefined;\n}\nexport function popNumber(args, defaultValue) {\n    return typeof last(args) === 'number' ? args.pop() : defaultValue;\n}\n//# sourceMappingURL=args.js.map","import { isFunction } from './isFunction';\nexport function isScheduler(value) {\n    return value && isFunction(value.schedule);\n}\n//# sourceMappingURL=isScheduler.js.map","import { executeSchedule } from '../util/executeSchedule';\nimport { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nexport function observeOn(scheduler, delay) {\n    if (delay === void 0) { delay = 0; }\n    return operate(function (source, subscriber) {\n        source.subscribe(createOperatorSubscriber(subscriber, function (value) { return executeSchedule(subscriber, scheduler, function () { return subscriber.next(value); }, delay); }, function () { return executeSchedule(subscriber, scheduler, function () { return subscriber.complete(); }, delay); }, function (err) { return executeSchedule(subscriber, scheduler, function () { return subscriber.error(err); }, delay); }));\n    });\n}\n//# sourceMappingURL=observeOn.js.map","import { operate } from '../util/lift';\nexport function subscribeOn(scheduler, delay) {\n    if (delay === void 0) { delay = 0; }\n    return operate(function (source, subscriber) {\n        subscriber.add(scheduler.schedule(function () { return source.subscribe(subscriber); }, delay));\n    });\n}\n//# sourceMappingURL=subscribeOn.js.map","import { Observable } from '../Observable';\nimport { executeSchedule } from '../util/executeSchedule';\nexport function scheduleAsyncIterable(input, scheduler) {\n    if (!input) {\n        throw new Error('Iterable cannot be null');\n    }\n    return new Observable(function (subscriber) {\n        executeSchedule(subscriber, scheduler, function () {\n            var iterator = input[Symbol.asyncIterator]();\n            executeSchedule(subscriber, scheduler, function () {\n                iterator.next().then(function (result) {\n                    if (result.done) {\n                        subscriber.complete();\n                    }\n                    else {\n                        subscriber.next(result.value);\n                    }\n                });\n            }, 0, true);\n        });\n    });\n}\n//# sourceMappingURL=scheduleAsyncIterable.js.map","import { scheduleObservable } from './scheduleObservable';\nimport { schedulePromise } from './schedulePromise';\nimport { scheduleArray } from './scheduleArray';\nimport { scheduleIterable } from './scheduleIterable';\nimport { scheduleAsyncIterable } from './scheduleAsyncIterable';\nimport { isInteropObservable } from '../util/isInteropObservable';\nimport { isPromise } from '../util/isPromise';\nimport { isArrayLike } from '../util/isArrayLike';\nimport { isIterable } from '../util/isIterable';\nimport { isAsyncIterable } from '../util/isAsyncIterable';\nimport { createInvalidObservableTypeError } from '../util/throwUnobservableError';\nimport { isReadableStreamLike } from '../util/isReadableStreamLike';\nimport { scheduleReadableStreamLike } from './scheduleReadableStreamLike';\nexport function scheduled(input, scheduler) {\n    if (input != null) {\n        if (isInteropObservable(input)) {\n            return scheduleObservable(input, scheduler);\n        }\n        if (isArrayLike(input)) {\n            return scheduleArray(input, scheduler);\n        }\n        if (isPromise(input)) {\n            return schedulePromise(input, scheduler);\n        }\n        if (isAsyncIterable(input)) {\n            return scheduleAsyncIterable(input, scheduler);\n        }\n        if (isIterable(input)) {\n            return scheduleIterable(input, scheduler);\n        }\n        if (isReadableStreamLike(input)) {\n            return scheduleReadableStreamLike(input, scheduler);\n        }\n    }\n    throw createInvalidObservableTypeError(input);\n}\n//# sourceMappingURL=scheduled.js.map","import { innerFrom } from '../observable/innerFrom';\nimport { observeOn } from '../operators/observeOn';\nimport { subscribeOn } from '../operators/subscribeOn';\nexport function scheduleObservable(input, scheduler) {\n    return innerFrom(input).pipe(subscribeOn(scheduler), observeOn(scheduler));\n}\n//# sourceMappingURL=scheduleObservable.js.map","import { Observable } from '../Observable';\nexport function scheduleArray(input, scheduler) {\n    return new Observable(function (subscriber) {\n        var i = 0;\n        return scheduler.schedule(function () {\n            if (i === input.length) {\n                subscriber.complete();\n            }\n            else {\n                subscriber.next(input[i++]);\n                if (!subscriber.closed) {\n                    this.schedule();\n                }\n            }\n        });\n    });\n}\n//# sourceMappingURL=scheduleArray.js.map","import { innerFrom } from '../observable/innerFrom';\nimport { observeOn } from '../operators/observeOn';\nimport { subscribeOn } from '../operators/subscribeOn';\nexport function schedulePromise(input, scheduler) {\n    return innerFrom(input).pipe(subscribeOn(scheduler), observeOn(scheduler));\n}\n//# sourceMappingURL=schedulePromise.js.map","import { Observable } from '../Observable';\nimport { iterator as Symbol_iterator } from '../symbol/iterator';\nimport { isFunction } from '../util/isFunction';\nimport { executeSchedule } from '../util/executeSchedule';\nexport function scheduleIterable(input, scheduler) {\n    return new Observable(function (subscriber) {\n        var iterator;\n        executeSchedule(subscriber, scheduler, function () {\n            iterator = input[Symbol_iterator]();\n            executeSchedule(subscriber, scheduler, function () {\n                var _a;\n                var value;\n                var done;\n                try {\n                    (_a = iterator.next(), value = _a.value, done = _a.done);\n                }\n                catch (err) {\n                    subscriber.error(err);\n                    return;\n                }\n                if (done) {\n                    subscriber.complete();\n                }\n                else {\n                    subscriber.next(value);\n                }\n            }, 0, true);\n        });\n        return function () { return isFunction(iterator === null || iterator === void 0 ? void 0 : iterator.return) && iterator.return(); };\n    });\n}\n//# sourceMappingURL=scheduleIterable.js.map","import { scheduleAsyncIterable } from './scheduleAsyncIterable';\nimport { readableStreamLikeToAsyncGenerator } from '../util/isReadableStreamLike';\nexport function scheduleReadableStreamLike(input, scheduler) {\n    return scheduleAsyncIterable(readableStreamLikeToAsyncGenerator(input), scheduler);\n}\n//# sourceMappingURL=scheduleReadableStreamLike.js.map","import { scheduled } from '../scheduled/scheduled';\nimport { innerFrom } from './innerFrom';\nexport function from(input, scheduler) {\n    return scheduler ? scheduled(input, scheduler) : innerFrom(input);\n}\n//# sourceMappingURL=from.js.map","import { __read, __spreadArray } from \"tslib\";\nimport { operate } from '../util/lift';\nimport { argsOrArgArray } from '../util/argsOrArgArray';\nimport { mergeAll } from './mergeAll';\nimport { popNumber, popScheduler } from '../util/args';\nimport { from } from '../observable/from';\nexport function merge() {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n    }\n    var scheduler = popScheduler(args);\n    var concurrent = popNumber(args, Infinity);\n    args = argsOrArgArray(args);\n    return operate(function (source, subscriber) {\n        mergeAll(concurrent)(from(__spreadArray([source], __read(args)), scheduler)).subscribe(subscriber);\n    });\n}\n//# sourceMappingURL=merge.js.map","/**\n * returns true if the given object is a promise\n */\nexport function isPromise(obj) {\n  return obj && typeof obj.then === 'function';\n}\nexport var PROMISE_RESOLVED_FALSE = Promise.resolve(false);\nexport var PROMISE_RESOLVED_TRUE = Promise.resolve(true);\nexport var PROMISE_RESOLVED_VOID = Promise.resolve();\nexport function sleep(time, resolveWith) {\n  if (!time) time = 0;\n  return new Promise(function (res) {\n    return setTimeout(function () {\n      return res(resolveWith);\n    }, time);\n  });\n}\nexport function randomInt(min, max) {\n  return Math.floor(Math.random() * (max - min + 1) + min);\n}\n\n/**\n * https://stackoverflow.com/a/8084248\n */\nexport function randomToken() {\n  return Math.random().toString(36).substring(2);\n}\nvar lastMs = 0;\nvar additional = 0;\n\n/**\n * returns the current time in micro-seconds,\n * WARNING: This is a pseudo-function\n * Performance.now is not reliable in webworkers, so we just make sure to never return the same time.\n * This is enough in browsers, and this function will not be used in nodejs.\n * The main reason for this hack is to ensure that BroadcastChannel behaves equal to production when it is used in fast-running unit tests.\n */\nexport function microSeconds() {\n  var ms = new Date().getTime();\n  if (ms === lastMs) {\n    additional++;\n    return ms * 1000 + additional;\n  } else {\n    lastMs = ms;\n    additional = 0;\n    return ms * 1000;\n  }\n}","import { microSeconds as micro, PROMISE_RESOLVED_VOID } from '../util.js';\nexport var microSeconds = micro;\nexport var type = 'native';\nexport function create(channelName) {\n  var state = {\n    messagesCallback: null,\n    bc: new BroadcastChannel(channelName),\n    subFns: [] // subscriberFunctions\n  };\n\n  state.bc.onmessage = function (msg) {\n    if (state.messagesCallback) {\n      state.messagesCallback(msg.data);\n    }\n  };\n  return state;\n}\nexport function close(channelState) {\n  channelState.bc.close();\n  channelState.subFns = [];\n}\nexport function postMessage(channelState, messageJson) {\n  try {\n    channelState.bc.postMessage(messageJson, false);\n    return PROMISE_RESOLVED_VOID;\n  } catch (err) {\n    return Promise.reject(err);\n  }\n}\nexport function onMessage(channelState, fn) {\n  channelState.messagesCallback = fn;\n}\nexport function canBeUsed() {\n  if (typeof window === 'undefined') {\n    return false;\n  }\n  if (typeof BroadcastChannel === 'function') {\n    if (BroadcastChannel._pubkey) {\n      throw new Error('BroadcastChannel: Do not overwrite window.BroadcastChannel with this module, this is not a polyfill');\n    }\n    return true;\n  } else {\n    return false;\n  }\n}\nexport function averageResponseTime() {\n  return 150;\n}\nexport var NativeMethod = {\n  create: create,\n  close: close,\n  onMessage: onMessage,\n  postMessage: postMessage,\n  canBeUsed: canBeUsed,\n  type: type,\n  averageResponseTime: averageResponseTime,\n  microSeconds: microSeconds\n};","/**\n * this is a set which automatically forgets\n * a given entry when a new entry is set and the ttl\n * of the old one is over\n */\nvar ObliviousSet = /** @class */ (function () {\n    function ObliviousSet(ttl) {\n        this.ttl = ttl;\n        this.map = new Map();\n        /**\n         * Creating calls to setTimeout() is expensive,\n         * so we only do that if there is not timeout already open.\n         */\n        this._to = false;\n    }\n    ObliviousSet.prototype.has = function (value) {\n        return this.map.has(value);\n    };\n    ObliviousSet.prototype.add = function (value) {\n        var _this = this;\n        this.map.set(value, now());\n        /**\n         * When a new value is added,\n         * start the cleanup at the next tick\n         * to not block the cpu for more important stuff\n         * that might happen.\n         */\n        if (!this._to) {\n            this._to = true;\n            setTimeout(function () {\n                _this._to = false;\n                removeTooOldValues(_this);\n            }, 0);\n        }\n    };\n    ObliviousSet.prototype.clear = function () {\n        this.map.clear();\n    };\n    return ObliviousSet;\n}());\nexport { ObliviousSet };\n/**\n * Removes all entries from the set\n * where the TTL has expired\n */\nexport function removeTooOldValues(obliviousSet) {\n    var olderThen = now() - obliviousSet.ttl;\n    var iterator = obliviousSet.map[Symbol.iterator]();\n    /**\n     * Because we can assume the new values are added at the bottom,\n     * we start from the top and stop as soon as we reach a non-too-old value.\n     */\n    while (true) {\n        var next = iterator.next().value;\n        if (!next) {\n            return; // no more elements\n        }\n        var value = next[0];\n        var time = next[1];\n        if (time < olderThen) {\n            obliviousSet.map.delete(value);\n        }\n        else {\n            // We reached a value that is not old enough\n            return;\n        }\n    }\n}\nexport function now() {\n    return new Date().getTime();\n}\n//# sourceMappingURL=index.js.map","export function fillOptionsWithDefaults() {\n  var originalOptions = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var options = JSON.parse(JSON.stringify(originalOptions));\n\n  // main\n  if (typeof options.webWorkerSupport === 'undefined') options.webWorkerSupport = true;\n\n  // indexed-db\n  if (!options.idb) options.idb = {};\n  //  after this time the messages get deleted\n  if (!options.idb.ttl) options.idb.ttl = 1000 * 45;\n  if (!options.idb.fallbackInterval) options.idb.fallbackInterval = 150;\n  //  handles abrupt db onclose events.\n  if (originalOptions.idb && typeof originalOptions.idb.onclose === 'function') options.idb.onclose = originalOptions.idb.onclose;\n\n  // localstorage\n  if (!options.localstorage) options.localstorage = {};\n  if (!options.localstorage.removeTimeout) options.localstorage.removeTimeout = 1000 * 60;\n\n  // custom methods\n  if (originalOptions.methods) options.methods = originalOptions.methods;\n\n  // node\n  if (!options.node) options.node = {};\n  if (!options.node.ttl) options.node.ttl = 1000 * 60 * 2; // 2 minutes;\n  /**\n   * On linux use 'ulimit -Hn' to get the limit of open files.\n   * On ubuntu this was 4096 for me, so we use half of that as maxParallelWrites default.\n   */\n  if (!options.node.maxParallelWrites) options.node.maxParallelWrites = 2048;\n  if (typeof options.node.useFastPath === 'undefined') options.node.useFastPath = true;\n  return options;\n}","/**\n * this method uses indexeddb to store the messages\n * There is currently no observerAPI for idb\n * @link https://github.com/w3c/IndexedDB/issues/51\n * \n * When working on this, ensure to use these performance optimizations:\n * @link https://rxdb.info/slow-indexeddb.html\n */\n\nimport { sleep, randomInt, randomToken, microSeconds as micro, PROMISE_RESOLVED_VOID } from '../util.js';\nexport var microSeconds = micro;\nimport { ObliviousSet } from 'oblivious-set';\nimport { fillOptionsWithDefaults } from '../options.js';\nvar DB_PREFIX = 'pubkey.broadcast-channel-0-';\nvar OBJECT_STORE_ID = 'messages';\n\n/**\n * Use relaxed durability for faster performance on all transactions.\n * @link https://nolanlawson.com/2021/08/22/speeding-up-indexeddb-reads-and-writes/\n */\nexport var TRANSACTION_SETTINGS = {\n  durability: 'relaxed'\n};\nexport var type = 'idb';\nexport function getIdb() {\n  if (typeof indexedDB !== 'undefined') return indexedDB;\n  if (typeof window !== 'undefined') {\n    if (typeof window.mozIndexedDB !== 'undefined') return window.mozIndexedDB;\n    if (typeof window.webkitIndexedDB !== 'undefined') return window.webkitIndexedDB;\n    if (typeof window.msIndexedDB !== 'undefined') return window.msIndexedDB;\n  }\n  return false;\n}\n\n/**\n * If possible, we should explicitly commit IndexedDB transactions\n * for better performance.\n * @link https://nolanlawson.com/2021/08/22/speeding-up-indexeddb-reads-and-writes/\n */\nexport function commitIndexedDBTransaction(tx) {\n  if (tx.commit) {\n    tx.commit();\n  }\n}\nexport function createDatabase(channelName) {\n  var IndexedDB = getIdb();\n\n  // create table\n  var dbName = DB_PREFIX + channelName;\n\n  /**\n   * All IndexedDB databases are opened without version\n   * because it is a bit faster, especially on firefox\n   * @link http://nparashuram.com/IndexedDB/perf/#Open%20Database%20with%20version\n   */\n  var openRequest = IndexedDB.open(dbName);\n  openRequest.onupgradeneeded = function (ev) {\n    var db = ev.target.result;\n    db.createObjectStore(OBJECT_STORE_ID, {\n      keyPath: 'id',\n      autoIncrement: true\n    });\n  };\n  return new Promise(function (res, rej) {\n    openRequest.onerror = function (ev) {\n      return rej(ev);\n    };\n    openRequest.onsuccess = function () {\n      res(openRequest.result);\n    };\n  });\n}\n\n/**\n * writes the new message to the database\n * so other readers can find it\n */\nexport function writeMessage(db, readerUuid, messageJson) {\n  var time = new Date().getTime();\n  var writeObject = {\n    uuid: readerUuid,\n    time: time,\n    data: messageJson\n  };\n  var tx = db.transaction([OBJECT_STORE_ID], 'readwrite', TRANSACTION_SETTINGS);\n  return new Promise(function (res, rej) {\n    tx.oncomplete = function () {\n      return res();\n    };\n    tx.onerror = function (ev) {\n      return rej(ev);\n    };\n    var objectStore = tx.objectStore(OBJECT_STORE_ID);\n    objectStore.add(writeObject);\n    commitIndexedDBTransaction(tx);\n  });\n}\nexport function getAllMessages(db) {\n  var tx = db.transaction(OBJECT_STORE_ID, 'readonly', TRANSACTION_SETTINGS);\n  var objectStore = tx.objectStore(OBJECT_STORE_ID);\n  var ret = [];\n  return new Promise(function (res) {\n    objectStore.openCursor().onsuccess = function (ev) {\n      var cursor = ev.target.result;\n      if (cursor) {\n        ret.push(cursor.value);\n        //alert(\"Name for SSN \" + cursor.key + \" is \" + cursor.value.name);\n        cursor[\"continue\"]();\n      } else {\n        commitIndexedDBTransaction(tx);\n        res(ret);\n      }\n    };\n  });\n}\nexport function getMessagesHigherThan(db, lastCursorId) {\n  var tx = db.transaction(OBJECT_STORE_ID, 'readonly', TRANSACTION_SETTINGS);\n  var objectStore = tx.objectStore(OBJECT_STORE_ID);\n  var ret = [];\n  var keyRangeValue = IDBKeyRange.bound(lastCursorId + 1, Infinity);\n\n  /**\n   * Optimization shortcut,\n   * if getAll() can be used, do not use a cursor.\n   * @link https://rxdb.info/slow-indexeddb.html\n   */\n  if (objectStore.getAll) {\n    var getAllRequest = objectStore.getAll(keyRangeValue);\n    return new Promise(function (res, rej) {\n      getAllRequest.onerror = function (err) {\n        return rej(err);\n      };\n      getAllRequest.onsuccess = function (e) {\n        res(e.target.result);\n      };\n    });\n  }\n  function openCursor() {\n    // Occasionally Safari will fail on IDBKeyRange.bound, this\n    // catches that error, having it open the cursor to the first\n    // item. When it gets data it will advance to the desired key.\n    try {\n      keyRangeValue = IDBKeyRange.bound(lastCursorId + 1, Infinity);\n      return objectStore.openCursor(keyRangeValue);\n    } catch (e) {\n      return objectStore.openCursor();\n    }\n  }\n  return new Promise(function (res, rej) {\n    var openCursorRequest = openCursor();\n    openCursorRequest.onerror = function (err) {\n      return rej(err);\n    };\n    openCursorRequest.onsuccess = function (ev) {\n      var cursor = ev.target.result;\n      if (cursor) {\n        if (cursor.value.id < lastCursorId + 1) {\n          cursor[\"continue\"](lastCursorId + 1);\n        } else {\n          ret.push(cursor.value);\n          cursor[\"continue\"]();\n        }\n      } else {\n        commitIndexedDBTransaction(tx);\n        res(ret);\n      }\n    };\n  });\n}\nexport function removeMessagesById(channelState, ids) {\n  if (channelState.closed) {\n    return Promise.resolve([]);\n  }\n  var tx = channelState.db.transaction(OBJECT_STORE_ID, 'readwrite', TRANSACTION_SETTINGS);\n  var objectStore = tx.objectStore(OBJECT_STORE_ID);\n  return Promise.all(ids.map(function (id) {\n    var deleteRequest = objectStore[\"delete\"](id);\n    return new Promise(function (res) {\n      deleteRequest.onsuccess = function () {\n        return res();\n      };\n    });\n  }));\n}\nexport function getOldMessages(db, ttl) {\n  var olderThen = new Date().getTime() - ttl;\n  var tx = db.transaction(OBJECT_STORE_ID, 'readonly', TRANSACTION_SETTINGS);\n  var objectStore = tx.objectStore(OBJECT_STORE_ID);\n  var ret = [];\n  return new Promise(function (res) {\n    objectStore.openCursor().onsuccess = function (ev) {\n      var cursor = ev.target.result;\n      if (cursor) {\n        var msgObk = cursor.value;\n        if (msgObk.time < olderThen) {\n          ret.push(msgObk);\n          //alert(\"Name for SSN \" + cursor.key + \" is \" + cursor.value.name);\n          cursor[\"continue\"]();\n        } else {\n          // no more old messages,\n          commitIndexedDBTransaction(tx);\n          res(ret);\n        }\n      } else {\n        res(ret);\n      }\n    };\n  });\n}\nexport function cleanOldMessages(channelState) {\n  return getOldMessages(channelState.db, channelState.options.idb.ttl).then(function (tooOld) {\n    return removeMessagesById(channelState, tooOld.map(function (msg) {\n      return msg.id;\n    }));\n  });\n}\nexport function create(channelName, options) {\n  options = fillOptionsWithDefaults(options);\n  return createDatabase(channelName).then(function (db) {\n    var state = {\n      closed: false,\n      lastCursorId: 0,\n      channelName: channelName,\n      options: options,\n      uuid: randomToken(),\n      /**\n       * emittedMessagesIds\n       * contains all messages that have been emitted before\n       * @type {ObliviousSet}\n       */\n      eMIs: new ObliviousSet(options.idb.ttl * 2),\n      // ensures we do not read messages in parallel\n      writeBlockPromise: PROMISE_RESOLVED_VOID,\n      messagesCallback: null,\n      readQueuePromises: [],\n      db: db\n    };\n\n    /**\n     * Handle abrupt closes that do not originate from db.close().\n     * This could happen, for example, if the underlying storage is\n     * removed or if the user clears the database in the browser's\n     * history preferences.\n     */\n    db.onclose = function () {\n      state.closed = true;\n      if (options.idb.onclose) options.idb.onclose();\n    };\n\n    /**\n     * if service-workers are used,\n     * we have no 'storage'-event if they post a message,\n     * therefore we also have to set an interval\n     */\n    _readLoop(state);\n    return state;\n  });\n}\nfunction _readLoop(state) {\n  if (state.closed) return;\n  readNewMessages(state).then(function () {\n    return sleep(state.options.idb.fallbackInterval);\n  }).then(function () {\n    return _readLoop(state);\n  });\n}\nfunction _filterMessage(msgObj, state) {\n  if (msgObj.uuid === state.uuid) return false; // send by own\n  if (state.eMIs.has(msgObj.id)) return false; // already emitted\n  if (msgObj.data.time < state.messagesCallbackTime) return false; // older then onMessageCallback\n  return true;\n}\n\n/**\n * reads all new messages from the database and emits them\n */\nfunction readNewMessages(state) {\n  // channel already closed\n  if (state.closed) return PROMISE_RESOLVED_VOID;\n\n  // if no one is listening, we do not need to scan for new messages\n  if (!state.messagesCallback) return PROMISE_RESOLVED_VOID;\n  return getMessagesHigherThan(state.db, state.lastCursorId).then(function (newerMessages) {\n    var useMessages = newerMessages\n    /**\n     * there is a bug in iOS where the msgObj can be undefined sometimes\n     * so we filter them out\n     * @link https://github.com/pubkey/broadcast-channel/issues/19\n     */.filter(function (msgObj) {\n      return !!msgObj;\n    }).map(function (msgObj) {\n      if (msgObj.id > state.lastCursorId) {\n        state.lastCursorId = msgObj.id;\n      }\n      return msgObj;\n    }).filter(function (msgObj) {\n      return _filterMessage(msgObj, state);\n    }).sort(function (msgObjA, msgObjB) {\n      return msgObjA.time - msgObjB.time;\n    }); // sort by time\n    useMessages.forEach(function (msgObj) {\n      if (state.messagesCallback) {\n        state.eMIs.add(msgObj.id);\n        state.messagesCallback(msgObj.data);\n      }\n    });\n    return PROMISE_RESOLVED_VOID;\n  });\n}\nexport function close(channelState) {\n  channelState.closed = true;\n  channelState.db.close();\n}\nexport function postMessage(channelState, messageJson) {\n  channelState.writeBlockPromise = channelState.writeBlockPromise.then(function () {\n    return writeMessage(channelState.db, channelState.uuid, messageJson);\n  }).then(function () {\n    if (randomInt(0, 10) === 0) {\n      /* await (do not await) */\n      cleanOldMessages(channelState);\n    }\n  });\n  return channelState.writeBlockPromise;\n}\nexport function onMessage(channelState, fn, time) {\n  channelState.messagesCallbackTime = time;\n  channelState.messagesCallback = fn;\n  readNewMessages(channelState);\n}\nexport function canBeUsed() {\n  return !!getIdb();\n}\nexport function averageResponseTime(options) {\n  return options.idb.fallbackInterval * 2;\n}\nexport var IndexedDBMethod = {\n  create: create,\n  close: close,\n  onMessage: onMessage,\n  postMessage: postMessage,\n  canBeUsed: canBeUsed,\n  type: type,\n  averageResponseTime: averageResponseTime,\n  microSeconds: microSeconds\n};","/**\n * A localStorage-only method which uses localstorage and its 'storage'-event\n * This does not work inside webworkers because they have no access to localstorage\n * This is basically implemented to support IE9 or your grandmother's toaster.\n * @link https://caniuse.com/#feat=namevalue-storage\n * @link https://caniuse.com/#feat=indexeddb\n */\n\nimport { ObliviousSet } from 'oblivious-set';\nimport { fillOptionsWithDefaults } from '../options.js';\nimport { sleep, randomToken, microSeconds as micro } from '../util.js';\nexport var microSeconds = micro;\nvar KEY_PREFIX = 'pubkey.broadcastChannel-';\nexport var type = 'localstorage';\n\n/**\n * copied from crosstab\n * @link https://github.com/tejacques/crosstab/blob/master/src/crosstab.js#L32\n */\nexport function getLocalStorage() {\n  var localStorage;\n  if (typeof window === 'undefined') return null;\n  try {\n    localStorage = window.localStorage;\n    localStorage = window['ie8-eventlistener/storage'] || window.localStorage;\n  } catch (e) {\n    // New versions of Firefox throw a Security exception\n    // if cookies are disabled. See\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=1028153\n  }\n  return localStorage;\n}\nexport function storageKey(channelName) {\n  return KEY_PREFIX + channelName;\n}\n\n/**\n* writes the new message to the storage\n* and fires the storage-event so other readers can find it\n*/\nexport function postMessage(channelState, messageJson) {\n  return new Promise(function (res) {\n    sleep().then(function () {\n      var key = storageKey(channelState.channelName);\n      var writeObj = {\n        token: randomToken(),\n        time: new Date().getTime(),\n        data: messageJson,\n        uuid: channelState.uuid\n      };\n      var value = JSON.stringify(writeObj);\n      getLocalStorage().setItem(key, value);\n\n      /**\n       * StorageEvent does not fire the 'storage' event\n       * in the window that changes the state of the local storage.\n       * So we fire it manually\n       */\n      var ev = document.createEvent('Event');\n      ev.initEvent('storage', true, true);\n      ev.key = key;\n      ev.newValue = value;\n      window.dispatchEvent(ev);\n      res();\n    });\n  });\n}\nexport function addStorageEventListener(channelName, fn) {\n  var key = storageKey(channelName);\n  var listener = function listener(ev) {\n    if (ev.key === key) {\n      fn(JSON.parse(ev.newValue));\n    }\n  };\n  window.addEventListener('storage', listener);\n  return listener;\n}\nexport function removeStorageEventListener(listener) {\n  window.removeEventListener('storage', listener);\n}\nexport function create(channelName, options) {\n  options = fillOptionsWithDefaults(options);\n  if (!canBeUsed()) {\n    throw new Error('BroadcastChannel: localstorage cannot be used');\n  }\n  var uuid = randomToken();\n\n  /**\n   * eMIs\n   * contains all messages that have been emitted before\n   * @type {ObliviousSet}\n   */\n  var eMIs = new ObliviousSet(options.localstorage.removeTimeout);\n  var state = {\n    channelName: channelName,\n    uuid: uuid,\n    eMIs: eMIs // emittedMessagesIds\n  };\n\n  state.listener = addStorageEventListener(channelName, function (msgObj) {\n    if (!state.messagesCallback) return; // no listener\n    if (msgObj.uuid === uuid) return; // own message\n    if (!msgObj.token || eMIs.has(msgObj.token)) return; // already emitted\n    if (msgObj.data.time && msgObj.data.time < state.messagesCallbackTime) return; // too old\n\n    eMIs.add(msgObj.token);\n    state.messagesCallback(msgObj.data);\n  });\n  return state;\n}\nexport function close(channelState) {\n  removeStorageEventListener(channelState.listener);\n}\nexport function onMessage(channelState, fn, time) {\n  channelState.messagesCallbackTime = time;\n  channelState.messagesCallback = fn;\n}\nexport function canBeUsed() {\n  var ls = getLocalStorage();\n  if (!ls) return false;\n  try {\n    var key = '__broadcastchannel_check';\n    ls.setItem(key, 'works');\n    ls.removeItem(key);\n  } catch (e) {\n    // Safari 10 in private mode will not allow write access to local\n    // storage and fail with a QuotaExceededError. See\n    // https://developer.mozilla.org/en-US/docs/Web/API/Web_Storage_API#Private_Browsing_Incognito_modes\n    return false;\n  }\n  return true;\n}\nexport function averageResponseTime() {\n  var defaultTime = 120;\n  var userAgent = navigator.userAgent.toLowerCase();\n  if (userAgent.includes('safari') && !userAgent.includes('chrome')) {\n    // safari is much slower so this time is higher\n    return defaultTime * 2;\n  }\n  return defaultTime;\n}\nexport var LocalstorageMethod = {\n  create: create,\n  close: close,\n  onMessage: onMessage,\n  postMessage: postMessage,\n  canBeUsed: canBeUsed,\n  type: type,\n  averageResponseTime: averageResponseTime,\n  microSeconds: microSeconds\n};","import { microSeconds as micro } from '../util.js';\nexport var microSeconds = micro;\nexport var type = 'simulate';\nvar SIMULATE_CHANNELS = new Set();\nexport function create(channelName) {\n  var state = {\n    name: channelName,\n    messagesCallback: null\n  };\n  SIMULATE_CHANNELS.add(state);\n  return state;\n}\nexport function close(channelState) {\n  SIMULATE_CHANNELS[\"delete\"](channelState);\n}\nexport function postMessage(channelState, messageJson) {\n  return new Promise(function (res) {\n    return setTimeout(function () {\n      var channelArray = Array.from(SIMULATE_CHANNELS);\n      channelArray.filter(function (channel) {\n        return channel.name === channelState.name;\n      }).filter(function (channel) {\n        return channel !== channelState;\n      }).filter(function (channel) {\n        return !!channel.messagesCallback;\n      }).forEach(function (channel) {\n        return channel.messagesCallback(messageJson);\n      });\n      res();\n    }, 5);\n  });\n}\nexport function onMessage(channelState, fn) {\n  channelState.messagesCallback = fn;\n}\nexport function canBeUsed() {\n  return true;\n}\nexport function averageResponseTime() {\n  return 5;\n}\nexport var SimulateMethod = {\n  create: create,\n  close: close,\n  onMessage: onMessage,\n  postMessage: postMessage,\n  canBeUsed: canBeUsed,\n  type: type,\n  averageResponseTime: averageResponseTime,\n  microSeconds: microSeconds\n};","import { NativeMethod } from './methods/native.js';\nimport { IndexedDBMethod } from './methods/indexed-db.js';\nimport { LocalstorageMethod } from './methods/localstorage.js';\nimport { SimulateMethod } from './methods/simulate.js';\n// the line below will be removed from es5/browser builds\n\n// order is important\nvar METHODS = [NativeMethod,\n// fastest\nIndexedDBMethod, LocalstorageMethod];\nexport function chooseMethod(options) {\n  var chooseMethods = [].concat(options.methods, METHODS).filter(Boolean);\n\n  // the line below will be removed from es5/browser builds\n\n  // directly chosen\n  if (options.type) {\n    if (options.type === 'simulate') {\n      // only use simulate-method if directly chosen\n      return SimulateMethod;\n    }\n    var ret = chooseMethods.find(function (m) {\n      return m.type === options.type;\n    });\n    if (!ret) throw new Error('method-type ' + options.type + ' not found');else return ret;\n  }\n\n  /**\n   * if no webworker support is needed,\n   * remove idb from the list so that localstorage will be chosen\n   */\n  if (!options.webWorkerSupport) {\n    chooseMethods = chooseMethods.filter(function (m) {\n      return m.type !== 'idb';\n    });\n  }\n  var useMethod = chooseMethods.find(function (method) {\n    return method.canBeUsed();\n  });\n  if (!useMethod) throw new Error(\"No usable method found in \" + JSON.stringify(METHODS.map(function (m) {\n    return m.type;\n  })));else return useMethod;\n}","import { isPromise, PROMISE_RESOLVED_FALSE, PROMISE_RESOLVED_VOID } from './util.js';\nimport { chooseMethod } from './method-chooser.js';\nimport { fillOptionsWithDefaults } from './options.js';\n\n/**\n * Contains all open channels,\n * used in tests to ensure everything is closed.\n */\nexport var OPEN_BROADCAST_CHANNELS = new Set();\nvar lastId = 0;\nexport var BroadcastChannel = function BroadcastChannel(name, options) {\n  // identifier of the channel to debug stuff\n  this.id = lastId++;\n  OPEN_BROADCAST_CHANNELS.add(this);\n  this.name = name;\n  if (ENFORCED_OPTIONS) {\n    options = ENFORCED_OPTIONS;\n  }\n  this.options = fillOptionsWithDefaults(options);\n  this.method = chooseMethod(this.options);\n\n  // isListening\n  this._iL = false;\n\n  /**\n   * _onMessageListener\n   * setting onmessage twice,\n   * will overwrite the first listener\n   */\n  this._onML = null;\n\n  /**\n   * _addEventListeners\n   */\n  this._addEL = {\n    message: [],\n    internal: []\n  };\n\n  /**\n   * Unsent message promises\n   * where the sending is still in progress\n   * @type {Set<Promise>}\n   */\n  this._uMP = new Set();\n\n  /**\n   * _beforeClose\n   * array of promises that will be awaited\n   * before the channel is closed\n   */\n  this._befC = [];\n\n  /**\n   * _preparePromise\n   */\n  this._prepP = null;\n  _prepareChannel(this);\n};\n\n// STATICS\n\n/**\n * used to identify if someone overwrites\n * window.BroadcastChannel with this\n * See methods/native.js\n */\nBroadcastChannel._pubkey = true;\n\n/**\n * clears the tmp-folder if is node\n * @return {Promise<boolean>} true if has run, false if not node\n */\nexport function clearNodeFolder(options) {\n  options = fillOptionsWithDefaults(options);\n  var method = chooseMethod(options);\n  if (method.type === 'node') {\n    return method.clearNodeFolder().then(function () {\n      return true;\n    });\n  } else {\n    return PROMISE_RESOLVED_FALSE;\n  }\n}\n\n/**\n * if set, this method is enforced,\n * no mather what the options are\n */\nvar ENFORCED_OPTIONS;\nexport function enforceOptions(options) {\n  ENFORCED_OPTIONS = options;\n}\n\n// PROTOTYPE\nBroadcastChannel.prototype = {\n  postMessage: function postMessage(msg) {\n    if (this.closed) {\n      throw new Error('BroadcastChannel.postMessage(): ' + 'Cannot post message after channel has closed ' +\n      /**\n       * In the past when this error appeared, it was really hard to debug.\n       * So now we log the msg together with the error so it at least\n       * gives some clue about where in your application this happens.\n       */\n      JSON.stringify(msg));\n    }\n    return _post(this, 'message', msg);\n  },\n  postInternal: function postInternal(msg) {\n    return _post(this, 'internal', msg);\n  },\n  set onmessage(fn) {\n    var time = this.method.microSeconds();\n    var listenObj = {\n      time: time,\n      fn: fn\n    };\n    _removeListenerObject(this, 'message', this._onML);\n    if (fn && typeof fn === 'function') {\n      this._onML = listenObj;\n      _addListenerObject(this, 'message', listenObj);\n    } else {\n      this._onML = null;\n    }\n  },\n  addEventListener: function addEventListener(type, fn) {\n    var time = this.method.microSeconds();\n    var listenObj = {\n      time: time,\n      fn: fn\n    };\n    _addListenerObject(this, type, listenObj);\n  },\n  removeEventListener: function removeEventListener(type, fn) {\n    var obj = this._addEL[type].find(function (obj) {\n      return obj.fn === fn;\n    });\n    _removeListenerObject(this, type, obj);\n  },\n  close: function close() {\n    var _this = this;\n    if (this.closed) {\n      return;\n    }\n    OPEN_BROADCAST_CHANNELS[\"delete\"](this);\n    this.closed = true;\n    var awaitPrepare = this._prepP ? this._prepP : PROMISE_RESOLVED_VOID;\n    this._onML = null;\n    this._addEL.message = [];\n    return awaitPrepare\n    // wait until all current sending are processed\n    .then(function () {\n      return Promise.all(Array.from(_this._uMP));\n    })\n    // run before-close hooks\n    .then(function () {\n      return Promise.all(_this._befC.map(function (fn) {\n        return fn();\n      }));\n    })\n    // close the channel\n    .then(function () {\n      return _this.method.close(_this._state);\n    });\n  },\n  get type() {\n    return this.method.type;\n  },\n  get isClosed() {\n    return this.closed;\n  }\n};\n\n/**\n * Post a message over the channel\n * @returns {Promise} that resolved when the message sending is done\n */\nfunction _post(broadcastChannel, type, msg) {\n  var time = broadcastChannel.method.microSeconds();\n  var msgObj = {\n    time: time,\n    type: type,\n    data: msg\n  };\n  var awaitPrepare = broadcastChannel._prepP ? broadcastChannel._prepP : PROMISE_RESOLVED_VOID;\n  return awaitPrepare.then(function () {\n    var sendPromise = broadcastChannel.method.postMessage(broadcastChannel._state, msgObj);\n\n    // add/remove to unsent messages list\n    broadcastChannel._uMP.add(sendPromise);\n    sendPromise[\"catch\"]().then(function () {\n      return broadcastChannel._uMP[\"delete\"](sendPromise);\n    });\n    return sendPromise;\n  });\n}\nfunction _prepareChannel(channel) {\n  var maybePromise = channel.method.create(channel.name, channel.options);\n  if (isPromise(maybePromise)) {\n    channel._prepP = maybePromise;\n    maybePromise.then(function (s) {\n      // used in tests to simulate slow runtime\n      /*if (channel.options.prepareDelay) {\n           await new Promise(res => setTimeout(res, this.options.prepareDelay));\n      }*/\n      channel._state = s;\n    });\n  } else {\n    channel._state = maybePromise;\n  }\n}\nfunction _hasMessageListeners(channel) {\n  if (channel._addEL.message.length > 0) return true;\n  if (channel._addEL.internal.length > 0) return true;\n  return false;\n}\nfunction _addListenerObject(channel, type, obj) {\n  channel._addEL[type].push(obj);\n  _startListening(channel);\n}\nfunction _removeListenerObject(channel, type, obj) {\n  channel._addEL[type] = channel._addEL[type].filter(function (o) {\n    return o !== obj;\n  });\n  _stopListening(channel);\n}\nfunction _startListening(channel) {\n  if (!channel._iL && _hasMessageListeners(channel)) {\n    // someone is listening, start subscribing\n\n    var listenerFn = function listenerFn(msgObj) {\n      channel._addEL[msgObj.type].forEach(function (listenerObject) {\n        /**\n         * Getting the current time in JavaScript has no good precision.\n         * So instead of only listening to events that happened 'after' the listener\n         * was added, we also listen to events that happened 100ms before it.\n         * This ensures that when another process, like a WebWorker, sends events\n         * we do not miss them out because their timestamp is a bit off compared to the main process.\n         * Not doing this would make messages missing when we send data directly after subscribing and awaiting a response.\n         * @link https://johnresig.com/blog/accuracy-of-javascript-time/\n         */\n        var hundredMsInMicro = 100 * 1000;\n        var minMessageTime = listenerObject.time - hundredMsInMicro;\n        if (msgObj.time >= minMessageTime) {\n          listenerObject.fn(msgObj.data);\n        }\n      });\n    };\n    var time = channel.method.microSeconds();\n    if (channel._prepP) {\n      channel._prepP.then(function () {\n        channel._iL = true;\n        channel.method.onMessage(channel._state, listenerFn, time);\n      });\n    } else {\n      channel._iL = true;\n      channel.method.onMessage(channel._state, listenerFn, time);\n    }\n  }\n}\nfunction _stopListening(channel) {\n  if (channel._iL && !_hasMessageListeners(channel)) {\n    // no one is listening, stop subscribing\n    channel._iL = false;\n    var time = channel.method.microSeconds();\n    channel.method.onMessage(channel._state, null, time);\n  }\n}","import { addBrowser } from './browser.js';\nimport { addNode } from './node.js';\n\n/**\n * Use the code directly to prevent import problems\n * with the detect-node package.\n * @link https://github.com/iliakan/detect-node/blob/master/index.js\n */\nvar isNode = Object.prototype.toString.call(typeof process !== 'undefined' ? process : 0) === '[object process]';\nvar USE_METHOD = isNode ? addNode : addBrowser;\nvar LISTENERS = new Set();\nvar startedListening = false;\nfunction startListening() {\n  if (startedListening) {\n    return;\n  }\n  startedListening = true;\n  USE_METHOD(runAll);\n}\nexport function add(fn) {\n  startListening();\n  if (typeof fn !== 'function') {\n    throw new Error('Listener is no function');\n  }\n  LISTENERS.add(fn);\n  var addReturn = {\n    remove: function remove() {\n      return LISTENERS[\"delete\"](fn);\n    },\n    run: function run() {\n      LISTENERS[\"delete\"](fn);\n      return fn();\n    }\n  };\n  return addReturn;\n}\nexport function runAll() {\n  var promises = [];\n  LISTENERS.forEach(function (fn) {\n    promises.push(fn());\n    LISTENERS[\"delete\"](fn);\n  });\n  return Promise.all(promises);\n}\nexport function removeAll() {\n  LISTENERS.clear();\n}\nexport function getSize() {\n  return LISTENERS.size;\n}","export function addNode(fn) {\n  process.on('exit', function () {\n    return fn();\n  });\n\n  /**\n   * on the following events,\n   * the process will not end if there are\n   * event-handlers attached,\n   * therefore we have to call process.exit()\n   */\n  process.on('beforeExit', function () {\n    return fn().then(function () {\n      return process.exit();\n    });\n  });\n  // catches ctrl+c event\n  process.on('SIGINT', function () {\n    return fn().then(function () {\n      return process.exit();\n    });\n  });\n  // catches uncaught exceptions\n  process.on('uncaughtException', function (err) {\n    return fn().then(function () {\n      console.trace(err);\n      process.exit(101);\n    });\n  });\n}","/* global WorkerGlobalScope */\n\nexport function addBrowser(fn) {\n  if (typeof WorkerGlobalScope === 'function' && self instanceof WorkerGlobalScope) {\n    /**\n     * Because killing a worker does directly stop the excution\n     * of the code, our only chance is to overwrite the close function\n     * which could work some times.\n     * @link https://stackoverflow.com/q/72903255/3443137\n     */\n    var oldClose = self.close.bind(self);\n    self.close = function () {\n      fn();\n      return oldClose();\n    };\n  } else {\n    /**\n     * if we are on react-native, there is no window.addEventListener\n     * @link https://github.com/pubkey/unload/issues/6\n     */\n    if (typeof window.addEventListener !== 'function') {\n      return;\n    }\n\n    /**\n     * for normal browser-windows, we use the beforeunload-event\n     */\n    window.addEventListener('beforeunload', function () {\n      fn();\n    }, true);\n\n    /**\n     * for iframes, we have to use the unload-event\n     * @link https://stackoverflow.com/q/47533670/3443137\n     */\n    window.addEventListener('unload', function () {\n      fn();\n    }, true);\n  }\n\n  /**\n   * TODO add fallback for safari-mobile\n   * @link https://stackoverflow.com/a/26193516/3443137\n   */\n}","import { sleep, randomToken, PROMISE_RESOLVED_VOID, PROMISE_RESOLVED_TRUE } from './util.js';\nimport { add as unloadAdd } from 'unload';\nvar LeaderElection = function LeaderElection(broadcastChannel, options) {\n  var _this = this;\n  this.broadcastChannel = broadcastChannel;\n  this._options = options;\n  this.isLeader = false;\n  this.hasLeader = false;\n  this.isDead = false;\n  this.token = randomToken();\n\n  /**\n   * Apply Queue,\n   * used to ensure we do not run applyOnce()\n   * in parallel.\n   */\n  this._aplQ = PROMISE_RESOLVED_VOID;\n  // amount of unfinished applyOnce() calls\n  this._aplQC = 0;\n\n  // things to clean up\n  this._unl = []; // _unloads\n  this._lstns = []; // _listeners\n  this._dpL = function () {}; // onduplicate listener\n  this._dpLC = false; // true when onduplicate called\n\n  /**\n   * Even when the own instance is not applying,\n   * we still listen to messages to ensure the hasLeader flag\n   * is set correctly.\n   */\n  var hasLeaderListener = function hasLeaderListener(msg) {\n    if (msg.context === 'leader') {\n      if (msg.action === 'death') {\n        _this.hasLeader = false;\n      }\n      if (msg.action === 'tell') {\n        _this.hasLeader = true;\n      }\n    }\n  };\n  this.broadcastChannel.addEventListener('internal', hasLeaderListener);\n  this._lstns.push(hasLeaderListener);\n};\nLeaderElection.prototype = {\n  /**\n   * Returns true if the instance is leader,\n   * false if not.\n   * @async\n   */\n  applyOnce: function applyOnce(\n  // true if the applyOnce() call came from the fallbackInterval cycle\n  isFromFallbackInterval) {\n    var _this2 = this;\n    if (this.isLeader) {\n      return sleep(0, true);\n    }\n    if (this.isDead) {\n      return sleep(0, false);\n    }\n\n    /**\n     * Already applying more than once,\n     * -> wait for the apply queue to be finished.\n     */\n    if (this._aplQC > 1) {\n      return this._aplQ;\n    }\n\n    /**\n     * Add a new apply-run\n     */\n    var applyRun = function applyRun() {\n      /**\n       * Optimization shortcuts.\n       * Directly return if a previous run\n       * has already elected a leader.\n       */\n      if (_this2.isLeader) {\n        return PROMISE_RESOLVED_TRUE;\n      }\n      var stopCriteria = false;\n      var stopCriteriaPromiseResolve;\n      /**\n       * Resolves when a stop criteria is reached.\n       * Uses as a performance shortcut so we do not\n       * have to await the responseTime when it is already clear\n       * that the election failed.\n       */\n      var stopCriteriaPromise = new Promise(function (res) {\n        stopCriteriaPromiseResolve = function stopCriteriaPromiseResolve() {\n          stopCriteria = true;\n          res();\n        };\n      });\n      var handleMessage = function handleMessage(msg) {\n        if (msg.context === 'leader' && msg.token != _this2.token) {\n          if (msg.action === 'apply') {\n            // other is applying\n            if (msg.token > _this2.token) {\n              /**\n               * other has higher token\n               * -> stop applying and let other become leader.\n               */\n              stopCriteriaPromiseResolve();\n            }\n          }\n          if (msg.action === 'tell') {\n            // other is already leader\n            stopCriteriaPromiseResolve();\n            _this2.hasLeader = true;\n          }\n        }\n      };\n      _this2.broadcastChannel.addEventListener('internal', handleMessage);\n\n      /**\n       * If the applyOnce() call came from the fallbackInterval,\n       * we can assume that the election runs in the background and\n       * not critical process is waiting for it.\n       * When this is true, we give the other instances\n       * more time to answer to messages in the election cycle.\n       * This makes it less likely to elect duplicate leaders.\n       * But also it takes longer which is not a problem because we anyway\n       * run in the background.\n       */\n      var waitForAnswerTime = isFromFallbackInterval ? _this2._options.responseTime * 4 : _this2._options.responseTime;\n      return _sendMessage(_this2, 'apply') // send out that this one is applying\n      .then(function () {\n        return Promise.race([sleep(waitForAnswerTime), stopCriteriaPromise.then(function () {\n          return Promise.reject(new Error());\n        })]);\n      })\n      // send again in case another instance was just created\n      .then(function () {\n        return _sendMessage(_this2, 'apply');\n      })\n      // let others time to respond\n      .then(function () {\n        return Promise.race([sleep(waitForAnswerTime), stopCriteriaPromise.then(function () {\n          return Promise.reject(new Error());\n        })]);\n      })[\"catch\"](function () {}).then(function () {\n        _this2.broadcastChannel.removeEventListener('internal', handleMessage);\n        if (!stopCriteria) {\n          // no stop criteria -> own is leader\n          return beLeader(_this2).then(function () {\n            return true;\n          });\n        } else {\n          // other is leader\n          return false;\n        }\n      });\n    };\n    this._aplQC = this._aplQC + 1;\n    this._aplQ = this._aplQ.then(function () {\n      return applyRun();\n    }).then(function () {\n      _this2._aplQC = _this2._aplQC - 1;\n    });\n    return this._aplQ.then(function () {\n      return _this2.isLeader;\n    });\n  },\n  awaitLeadership: function awaitLeadership() {\n    if ( /* _awaitLeadershipPromise */\n    !this._aLP) {\n      this._aLP = _awaitLeadershipOnce(this);\n    }\n    return this._aLP;\n  },\n  set onduplicate(fn) {\n    this._dpL = fn;\n  },\n  die: function die() {\n    var _this3 = this;\n    this._lstns.forEach(function (listener) {\n      return _this3.broadcastChannel.removeEventListener('internal', listener);\n    });\n    this._lstns = [];\n    this._unl.forEach(function (uFn) {\n      return uFn.remove();\n    });\n    this._unl = [];\n    if (this.isLeader) {\n      this.hasLeader = false;\n      this.isLeader = false;\n    }\n    this.isDead = true;\n    return _sendMessage(this, 'death');\n  }\n};\n\n/**\n * @param leaderElector {LeaderElector}\n */\nfunction _awaitLeadershipOnce(leaderElector) {\n  if (leaderElector.isLeader) {\n    return PROMISE_RESOLVED_VOID;\n  }\n  return new Promise(function (res) {\n    var resolved = false;\n    function finish() {\n      if (resolved) {\n        return;\n      }\n      resolved = true;\n      leaderElector.broadcastChannel.removeEventListener('internal', whenDeathListener);\n      res(true);\n    }\n\n    // try once now\n    leaderElector.applyOnce().then(function () {\n      if (leaderElector.isLeader) {\n        finish();\n      }\n    });\n\n    /**\n     * Try on fallbackInterval\n     * @recursive\n     */\n    var tryOnFallBack = function tryOnFallBack() {\n      return sleep(leaderElector._options.fallbackInterval).then(function () {\n        if (leaderElector.isDead || resolved) {\n          return;\n        }\n        if (leaderElector.isLeader) {\n          finish();\n        } else {\n          return leaderElector.applyOnce(true).then(function () {\n            if (leaderElector.isLeader) {\n              finish();\n            } else {\n              tryOnFallBack();\n            }\n          });\n        }\n      });\n    };\n    tryOnFallBack();\n\n    // try when other leader dies\n    var whenDeathListener = function whenDeathListener(msg) {\n      if (msg.context === 'leader' && msg.action === 'death') {\n        leaderElector.hasLeader = false;\n        leaderElector.applyOnce().then(function () {\n          if (leaderElector.isLeader) {\n            finish();\n          }\n        });\n      }\n    };\n    leaderElector.broadcastChannel.addEventListener('internal', whenDeathListener);\n    leaderElector._lstns.push(whenDeathListener);\n  });\n}\n\n/**\n * sends and internal message over the broadcast-channel\n */\nfunction _sendMessage(leaderElector, action) {\n  var msgJson = {\n    context: 'leader',\n    action: action,\n    token: leaderElector.token\n  };\n  return leaderElector.broadcastChannel.postInternal(msgJson);\n}\nexport function beLeader(leaderElector) {\n  leaderElector.isLeader = true;\n  leaderElector.hasLeader = true;\n  var unloadFn = unloadAdd(function () {\n    return leaderElector.die();\n  });\n  leaderElector._unl.push(unloadFn);\n  var isLeaderListener = function isLeaderListener(msg) {\n    if (msg.context === 'leader' && msg.action === 'apply') {\n      _sendMessage(leaderElector, 'tell');\n    }\n    if (msg.context === 'leader' && msg.action === 'tell' && !leaderElector._dpLC) {\n      /**\n       * another instance is also leader!\n       * This can happen on rare events\n       * like when the CPU is at 100% for long time\n       * or the tabs are open very long and the browser throttles them.\n       * @link https://github.com/pubkey/broadcast-channel/issues/414\n       * @link https://github.com/pubkey/broadcast-channel/issues/385\n       */\n      leaderElector._dpLC = true;\n      leaderElector._dpL(); // message the lib user so the app can handle the problem\n      _sendMessage(leaderElector, 'tell'); // ensure other leader also knows the problem\n    }\n  };\n\n  leaderElector.broadcastChannel.addEventListener('internal', isLeaderListener);\n  leaderElector._lstns.push(isLeaderListener);\n  return _sendMessage(leaderElector, 'tell');\n}\nfunction fillOptionsWithDefaults(options, channel) {\n  if (!options) options = {};\n  options = JSON.parse(JSON.stringify(options));\n  if (!options.fallbackInterval) {\n    options.fallbackInterval = 3000;\n  }\n  if (!options.responseTime) {\n    options.responseTime = channel.method.averageResponseTime(channel.options);\n  }\n  return options;\n}\nexport function createLeaderElection(channel, options) {\n  if (channel._leaderElector) {\n    throw new Error('BroadcastChannel already has a leader-elector');\n  }\n  options = fillOptionsWithDefaults(options, channel);\n  var elector = new LeaderElection(channel, options);\n  channel._befC.push(function () {\n    return elector.die();\n  });\n  channel._leaderElector = elector;\n  return elector;\n}","/**\n * When a persistend RxStorage is used in more the one JavaScript process,\n * the even stream of the changestream() function must be broadcasted to the other\n * RxStorageInstances of the same databaseName+collectionName.\n *\n * In the past this was done by RxDB but it makes more sense to do this\n * at the RxStorage level so that the broadcasting etc can all happen inside of a WebWorker\n * and not on the main thread.\n * Also it makes it less complex to stack up different RxStorages onto each other\n * like what we do with the in-memory plugin.\n *\n * This is intened to be used inside of createStorageInstance() of a storage.\n * Do not use this if the storage anyway broadcasts the events like when using MongoDB\n * or in the future W3C might introduce a way to listen to IndexedDB changes.\n */\n\nimport { Observable, Subject } from 'rxjs';\nimport { mergeWith } from 'rxjs/operators';\nimport type {\n    EventBulk,\n    RxStorageChangeEvent,\n    RxStorageInstance,\n    RxStorageInstanceCreationParams\n} from './types';\n\nimport {\n    BroadcastChannel\n} from 'broadcast-channel';\n\n/**\n * The broadcast-channel is reused by the databaseInstanceToken.\n * This is required so that it is easy to simulate multi-tab usage\n * in the test where different instances of the same RxDatabase must\n * have different broadcast channels.\n * But also it ensures that for each RxDatabase we only create a single\n * broadcast channel that can even be reused in the leader election plugin.\n *\n * TODO at the end of the unit tests,\n * we should ensure that all channels are closed and cleaned up.\n * Otherwise we have forgot something.\n */\nexport const BROADCAST_CHANNEL_BY_TOKEN: Map<string, {\n    bc: BroadcastChannel<RxStorageMultiInstanceBroadcastType>;\n    /**\n     * Contains all context objects that currently use the channel.\n     * If this becomes empty, we can close the channel\n     */\n    refs: Set<any>;\n}> = new Map();\n\n\nexport type RxStorageMultiInstanceBroadcastType = {\n    storageName: string;\n    collectionName: string;\n    /**\n     * collection.schema.version\n     */\n    version: number;\n    databaseName: string;\n    eventBulk: EventBulk<any, any>;\n};\n\nexport function getBroadcastChannelReference(\n    databaseInstanceToken: string,\n    databaseName: string,\n    refObject: any\n): BroadcastChannel<RxStorageMultiInstanceBroadcastType> {\n    let state = BROADCAST_CHANNEL_BY_TOKEN.get(databaseInstanceToken);\n    if (!state) {\n        state = {\n            /**\n             * We have to use the databaseName instead of the databaseInstanceToken\n             * in the BroadcastChannel name because different instances must end with the same\n             * channel name to be able to broadcast messages between each other.\n             */\n            bc: new BroadcastChannel('RxDB:' + databaseName),\n            refs: new Set<any>()\n        };\n        BROADCAST_CHANNEL_BY_TOKEN.set(databaseInstanceToken, state);\n    }\n    state.refs.add(refObject);\n    return state.bc;\n}\n\nexport function removeBroadcastChannelReference(\n    databaseInstanceToken: string,\n    refObject: any\n) {\n    const state = BROADCAST_CHANNEL_BY_TOKEN.get(databaseInstanceToken);\n    if (!state) {\n        return;\n    }\n    state.refs.delete(refObject);\n    if (state.refs.size === 0) {\n        BROADCAST_CHANNEL_BY_TOKEN.delete(databaseInstanceToken);\n        return state.bc.close();\n    }\n}\n\n\nexport function addRxStorageMultiInstanceSupport<RxDocType>(\n    storageName: string,\n    instanceCreationParams: RxStorageInstanceCreationParams<RxDocType, any>,\n    instance: RxStorageInstance<RxDocType, any, any>,\n    /**\n     * If provided, that channel will be used\n     * instead of an own one.\n     */\n    providedBroadcastChannel?: BroadcastChannel<any>\n) {\n    if (!instanceCreationParams.multiInstance) {\n        return;\n    }\n\n    type Emit = EventBulk<RxStorageChangeEvent<RxDocType>, any>;\n\n    const broadcastChannel = providedBroadcastChannel ?\n        providedBroadcastChannel :\n        getBroadcastChannelReference(\n            instanceCreationParams.databaseInstanceToken,\n            instance.databaseName,\n            instance\n        );\n\n    const changesFromOtherInstances$: Subject<Emit> = new Subject();\n\n\n    const eventListener = (msg: RxStorageMultiInstanceBroadcastType) => {\n        if (\n            msg.storageName === storageName &&\n            msg.databaseName === instanceCreationParams.databaseName &&\n            msg.collectionName === instanceCreationParams.collectionName &&\n            msg.version === instanceCreationParams.schema.version\n        ) {\n            changesFromOtherInstances$.next(msg.eventBulk);\n        }\n    };\n    broadcastChannel.addEventListener('message', eventListener);\n\n    const oldChangestream$ = instance.changeStream();\n\n    let closed = false;\n    const sub = oldChangestream$.subscribe(eventBulk => {\n        if (closed) {\n            return;\n        }\n        broadcastChannel.postMessage({\n            storageName: storageName,\n            databaseName: instanceCreationParams.databaseName,\n            collectionName: instanceCreationParams.collectionName,\n            version: instanceCreationParams.schema.version,\n            eventBulk\n        });\n    });\n\n    instance.changeStream = function (): Observable<Emit> {\n        return changesFromOtherInstances$.asObservable().pipe(\n            mergeWith(oldChangestream$)\n        );\n    };\n\n    const oldClose = instance.close.bind(instance);\n    instance.close = async function () {\n        closed = true;\n        sub.unsubscribe();\n        broadcastChannel.removeEventListener('message', eventListener);\n        if (!providedBroadcastChannel) {\n            await removeBroadcastChannelReference(\n                instanceCreationParams.databaseInstanceToken,\n                instance\n            );\n        }\n        return oldClose();\n    };\n\n    const oldRemove = instance.remove.bind(instance);\n    instance.remove = async function () {\n        closed = true;\n        sub.unsubscribe();\n        broadcastChannel.removeEventListener('message', eventListener);\n        if (!providedBroadcastChannel) {\n            await removeBroadcastChannelReference(\n                instanceCreationParams.databaseInstanceToken,\n                instance\n            );\n        }\n        return oldRemove();\n    };\n}\n","import { __read, __spreadArray } from \"tslib\";\nimport { merge } from './merge';\nexport function mergeWith() {\n    var otherSources = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        otherSources[_i] = arguments[_i];\n    }\n    return merge.apply(void 0, __spreadArray([], __read(otherSources)));\n}\n//# sourceMappingURL=mergeWith.js.map","import {\n    Subject,\n    Observable\n} from 'rxjs';\nimport {\n    now,\n    PROMISE_RESOLVE_VOID,\n    RX_META_LWT_MINIMUM,\n    sortDocumentsByLastWriteTime,\n    lastOfArray,\n    ensureNotFalsy\n} from '../../util';\nimport type {\n    RxStorageInstance,\n    RxStorageChangeEvent,\n    RxDocumentData,\n    BulkWriteRow,\n    RxStorageBulkWriteResponse,\n    RxStorageQueryResult,\n    RxJsonSchema,\n    RxStorageInstanceCreationParams,\n    EventBulk,\n    StringKeys,\n    RxDocumentDataById,\n    RxConflictResultionTask,\n    RxConflictResultionTaskSolution,\n    RxStorageDefaultCheckpoint,\n    CategorizeBulkWriteRowsOutput,\n    RxStorageCountResult\n} from '../../types';\nimport {\n    DexiePreparedQuery,\n    DexieSettings,\n    DexieStorageInternals\n} from '../../types/plugins/dexie';\nimport { RxStorageDexie } from './rx-storage-dexie';\nimport {\n    closeDexieDb,\n    fromDexieToStorage,\n    fromStorageToDexie,\n    getDexieDbWithTables,\n    getDocsInDb,\n    RX_STORAGE_NAME_DEXIE\n} from './dexie-helper';\nimport { dexieCount, dexieQuery } from './dexie-query';\nimport { getPrimaryFieldOfPrimaryKey } from '../../rx-schema-helper';\nimport { categorizeBulkWriteRows, getNewestOfDocumentStates } from '../../rx-storage-helper';\nimport { addRxStorageMultiInstanceSupport } from '../../rx-storage-multiinstance';\nimport { newRxError } from '../../rx-error';\n\nlet instanceId = now();\n\nexport class RxStorageInstanceDexie<RxDocType> implements RxStorageInstance<\nRxDocType,\nDexieStorageInternals,\nDexieSettings,\nRxStorageDefaultCheckpoint\n> {\n    public readonly primaryPath: StringKeys<RxDocumentData<RxDocType>>;\n    private changes$: Subject<EventBulk<RxStorageChangeEvent<RxDocumentData<RxDocType>>, RxStorageDefaultCheckpoint>> = new Subject();\n    public readonly instanceId = instanceId++;\n    public closed = false;\n\n    constructor(\n        public readonly storage: RxStorageDexie,\n        public readonly databaseName: string,\n        public readonly collectionName: string,\n        public readonly schema: Readonly<RxJsonSchema<RxDocumentData<RxDocType>>>,\n        public readonly internals: DexieStorageInternals,\n        public readonly options: Readonly<DexieSettings>,\n        public readonly settings: DexieSettings\n    ) {\n        this.primaryPath = getPrimaryFieldOfPrimaryKey(this.schema.primaryKey);\n    }\n\n    async bulkWrite(\n        documentWrites: BulkWriteRow<RxDocType>[],\n        context: string\n    ): Promise<RxStorageBulkWriteResponse<RxDocType>> {\n        ensureNotClosed(this);\n        const state = await this.internals;\n        const ret: RxStorageBulkWriteResponse<RxDocType> = {\n            success: {},\n            error: {}\n        };\n\n        const documentKeys: string[] = documentWrites.map(writeRow => writeRow.document[this.primaryPath] as any);\n        let categorized: CategorizeBulkWriteRowsOutput<RxDocType> | undefined = null as any;\n        await state.dexieDb.transaction(\n            'rw',\n            state.dexieTable,\n            state.dexieDeletedTable,\n            async () => {\n                const docsInDbMap = new Map<string, RxDocumentData<RxDocType>>();\n                const docsInDbWithInternals = await getDocsInDb<RxDocType>(this.internals, documentKeys);\n                docsInDbWithInternals.forEach(docWithDexieInternals => {\n                    const doc = docWithDexieInternals ? fromDexieToStorage(docWithDexieInternals) : docWithDexieInternals;\n                    if (doc) {\n                        docsInDbMap.set(doc[this.primaryPath], doc);\n                    }\n                    return doc;\n                });\n\n                categorized = categorizeBulkWriteRows<RxDocType>(\n                    this,\n                    this.primaryPath as any,\n                    docsInDbMap,\n                    documentWrites,\n                    context\n                );\n                ret.error = categorized.errors;\n\n                /**\n                 * Batch up the database operations\n                 * so we can later run them in bulk.\n                 */\n                const bulkPutDocs: any[] = [];\n                const bulkRemoveDocs: string[] = [];\n                const bulkPutDeletedDocs: any[] = [];\n                const bulkRemoveDeletedDocs: string[] = [];\n\n                categorized.bulkInsertDocs.forEach(row => {\n                    const docId: string = (row.document as any)[this.primaryPath];\n                    ret.success[docId] = row.document as any;\n                    bulkPutDocs.push(row.document);\n                });\n                categorized.bulkUpdateDocs.forEach(row => {\n                    const docId: string = (row.document as any)[this.primaryPath];\n                    ret.success[docId] = row.document as any;\n                    if (\n                        row.document._deleted &&\n                        (row.previous && !row.previous._deleted)\n                    ) {\n                        // newly deleted\n                        bulkRemoveDocs.push(docId);\n                        bulkPutDeletedDocs.push(row.document);\n                    } else if (\n                        row.document._deleted &&\n                        row.previous && row.previous._deleted\n                    ) {\n                        // deleted was modified but is still deleted\n                        bulkPutDeletedDocs.push(row.document);\n                    } else if (!row.document._deleted) {\n                        // non-deleted was changed\n                        bulkPutDocs.push(row.document);\n                    } else {\n                        throw newRxError('SNH', { args: { row } });\n                    }\n                });\n\n                await Promise.all([\n                    bulkPutDocs.length > 0 ? state.dexieTable.bulkPut(bulkPutDocs.map(d => fromStorageToDexie(d))) : PROMISE_RESOLVE_VOID,\n                    bulkRemoveDocs.length > 0 ? state.dexieTable.bulkDelete(bulkRemoveDocs) : PROMISE_RESOLVE_VOID,\n                    bulkPutDeletedDocs.length > 0 ? state.dexieDeletedTable.bulkPut(bulkPutDeletedDocs.map(d => fromStorageToDexie(d))) : PROMISE_RESOLVE_VOID,\n                    bulkRemoveDeletedDocs.length > 0 ? state.dexieDeletedTable.bulkDelete(bulkRemoveDeletedDocs) : PROMISE_RESOLVE_VOID\n                ]);\n            });\n\n        if (ensureNotFalsy(categorized).eventBulk.events.length > 0) {\n            const lastState = getNewestOfDocumentStates(\n                this.primaryPath as any,\n                Object.values(ret.success)\n            );\n            ensureNotFalsy(categorized).eventBulk.checkpoint = {\n                id: lastState[this.primaryPath],\n                lwt: lastState._meta.lwt\n            };\n            const endTime = now();\n            ensureNotFalsy(categorized).eventBulk.events.forEach(event => (event as any).endTime = endTime);\n            this.changes$.next(ensureNotFalsy(categorized).eventBulk);\n        }\n\n        return ret;\n    }\n\n    async findDocumentsById(\n        ids: string[],\n        deleted: boolean\n    ): Promise<RxDocumentDataById<RxDocType>> {\n        ensureNotClosed(this);\n        const state = await this.internals;\n        const ret: RxDocumentDataById<RxDocType> = {};\n\n        await state.dexieDb.transaction(\n            'r',\n            state.dexieTable,\n            state.dexieDeletedTable,\n            async () => {\n                let docsInDb: RxDocumentData<RxDocType>[];\n                if (deleted) {\n                    docsInDb = await getDocsInDb<RxDocType>(this.internals, ids);\n                } else {\n                    docsInDb = await state.dexieTable.bulkGet(ids);\n                }\n                ids.forEach((id, idx) => {\n                    const documentInDb = docsInDb[idx];\n                    if (\n                        documentInDb &&\n                        (!documentInDb._deleted || deleted)\n                    ) {\n                        ret[id] = fromDexieToStorage(documentInDb);\n                    }\n                });\n            });\n        return ret;\n    }\n\n    query(preparedQuery: DexiePreparedQuery<RxDocType>): Promise<RxStorageQueryResult<RxDocType>> {\n        ensureNotClosed(this);\n        return dexieQuery(\n            this,\n            preparedQuery\n        );\n    }\n    async count(\n        preparedQuery: DexiePreparedQuery<RxDocType>\n    ): Promise<RxStorageCountResult> {\n        const result = await dexieCount(this, preparedQuery);\n        return {\n            count: result,\n            mode: 'fast'\n        };\n    }\n\n    async getChangedDocumentsSince(\n        limit: number,\n        checkpoint?: RxStorageDefaultCheckpoint\n    ): Promise<{\n            documents: RxDocumentData<RxDocType>[];\n            checkpoint: RxStorageDefaultCheckpoint;\n        }> {\n        ensureNotClosed(this);\n        const sinceLwt = checkpoint ? checkpoint.lwt : RX_META_LWT_MINIMUM;\n        const sinceId = checkpoint ? checkpoint.id : '';\n        const state = await this.internals;\n\n\n        const [changedDocsNormal, changedDocsDeleted] = await Promise.all(\n            [\n                state.dexieTable,\n                state.dexieDeletedTable\n            ].map(async (table) => {\n                const query = table\n                    .where('[_meta.lwt+' + this.primaryPath + ']')\n                    .above([sinceLwt, sinceId])\n                    .limit(limit);\n                const changedDocuments: RxDocumentData<RxDocType>[] = await query.toArray();\n                return changedDocuments.map(d => fromDexieToStorage(d));\n            })\n        );\n        let changedDocs = changedDocsNormal.concat(changedDocsDeleted);\n\n        changedDocs = sortDocumentsByLastWriteTime(this.primaryPath as any, changedDocs);\n        changedDocs = changedDocs.slice(0, limit);\n\n        const lastDoc = lastOfArray(changedDocs);\n        return {\n            documents: changedDocs,\n            checkpoint: lastDoc ? {\n                id: lastDoc[this.primaryPath] as any,\n                lwt: lastDoc._meta.lwt\n            } : checkpoint ? checkpoint : {\n                id: '',\n                lwt: 0\n            }\n        };\n    }\n\n    async remove(): Promise<void> {\n        ensureNotClosed(this);\n        const state = await this.internals;\n        await Promise.all([\n            state.dexieDeletedTable.clear(),\n            state.dexieTable.clear()\n        ]);\n        return this.close();\n    }\n\n    changeStream(): Observable<EventBulk<RxStorageChangeEvent<RxDocumentData<RxDocType>>, RxStorageDefaultCheckpoint>> {\n        ensureNotClosed(this);\n        return this.changes$.asObservable();\n    }\n\n    async cleanup(minimumDeletedTime: number): Promise<boolean> {\n        ensureNotClosed(this);\n        const state = await this.internals;\n        await state.dexieDb.transaction(\n            'rw',\n            state.dexieDeletedTable,\n            async () => {\n                const maxDeletionTime = now() - minimumDeletedTime;\n                const toRemove = await state.dexieDeletedTable\n                    .where('_meta.lwt')\n                    .below(maxDeletionTime)\n                    .toArray();\n                const removeIds: string[] = toRemove.map(doc => doc[this.primaryPath]);\n                await state.dexieDeletedTable.bulkDelete(removeIds);\n            }\n        );\n\n        /**\n         * TODO instead of deleting all deleted docs at once,\n         * only clean up some of them and return false if there are more documents to clean up.\n         * This ensures that when many documents have to be purged,\n         * we do not block the more important tasks too long.\n         */\n        return true;\n    }\n\n    getAttachmentData(_documentId: string, _attachmentId: string): Promise<string> {\n        ensureNotClosed(this);\n        throw new Error('Attachments are not implemented in the dexie RxStorage. Make a pull request.');\n    }\n\n    close(): Promise<void> {\n        ensureNotClosed(this);\n        this.closed = true;\n        this.changes$.complete();\n        closeDexieDb(this.internals);\n        return PROMISE_RESOLVE_VOID;\n    }\n\n    conflictResultionTasks(): Observable<RxConflictResultionTask<RxDocType>> {\n        return new Subject();\n    }\n    async resolveConflictResultionTask(_taskSolution: RxConflictResultionTaskSolution<RxDocType>): Promise<void> { }\n\n}\n\n\nexport function createDexieStorageInstance<RxDocType>(\n    storage: RxStorageDexie,\n    params: RxStorageInstanceCreationParams<RxDocType, DexieSettings>,\n    settings: DexieSettings\n): Promise<RxStorageInstanceDexie<RxDocType>> {\n    const internals = getDexieDbWithTables(\n        params.databaseName,\n        params.collectionName,\n        settings,\n        params.schema\n    );\n\n    const instance = new RxStorageInstanceDexie(\n        storage,\n        params.databaseName,\n        params.collectionName,\n        params.schema,\n        internals,\n        params.options,\n        settings\n    );\n\n    addRxStorageMultiInstanceSupport(\n        RX_STORAGE_NAME_DEXIE,\n        params,\n        instance\n    );\n\n    return Promise.resolve(instance);\n}\n\n\n\nfunction ensureNotClosed(\n    instance: RxStorageInstanceDexie<any>\n) {\n    if (instance.closed) {\n        throw new Error('RxStorageInstanceDexie is closed ' + instance.databaseName + '-' + instance.collectionName);\n    }\n}\n","import type {\n    RxStorage,\n    RxStorageInstanceCreationParams\n} from '../../types';\nimport {\n    ensureNoBooleanIndex,\n    RX_STORAGE_NAME_DEXIE\n} from './dexie-helper';\nimport type {\n    DexieSettings,\n    DexieStorageInternals\n} from '../../types/plugins/dexie';\nimport {\n    createDexieStorageInstance,\n    RxStorageInstanceDexie\n} from './rx-storage-instance-dexie';\nimport { ensureRxStorageInstanceParamsAreCorrect } from '../../rx-storage-helper';\nimport { RxStorageDexieStatics } from './dexie-statics';\n\n\n\nexport class RxStorageDexie implements RxStorage<DexieStorageInternals, DexieSettings> {\n    public name = RX_STORAGE_NAME_DEXIE;\n    public statics = RxStorageDexieStatics;\n\n    constructor(\n        public settings: DexieSettings\n    ) { }\n\n    public createStorageInstance<RxDocType>(\n        params: RxStorageInstanceCreationParams<RxDocType, DexieSettings>\n    ): Promise<RxStorageInstanceDexie<RxDocType>> {\n        ensureRxStorageInstanceParamsAreCorrect(params);\n        ensureNoBooleanIndex(params.schema);\n        return createDexieStorageInstance(this, params, this.settings);\n    }\n}\n\n\nexport function getRxStorageDexie(\n    settings: DexieSettings = {}\n): RxStorageDexie {\n    const storage = new RxStorageDexie(settings);\n    return storage;\n}\n","import WorkerContext from \"./dist/worker/index.js\"\n\nexport const expose = WorkerContext.expose\nexport const registerSerializer = WorkerContext.registerSerializer\nexport const Transfer = WorkerContext.Transfer\n","import { getRxStorageDexie } from '../../dexie';\nimport { wrappedWorkerRxStorage } from '../../worker';\n\nconst storage = getRxStorageDexie();\nwrappedWorkerRxStorage({\n    storage\n});\n","/**\n * This file contains everything\n * that is supposed to run inside of the worker.\n */\nimport type {\n    BulkWriteRow,\n    EventBulk,\n    RxConflictResultionTask,\n    RxConflictResultionTaskSolution,\n    RxDocumentData,\n    RxDocumentDataById,\n    RxStorage,\n    RxStorageBulkWriteResponse,\n    RxStorageChangeEvent,\n    RxStorageCountResult,\n    RxStorageInstanceCreationParams,\n    RxStorageQueryResult\n} from '../../types';\nimport { expose } from 'threads/worker';\nimport { getFromMapOrThrow } from '../../util';\nimport { Observable } from 'rxjs';\n\n\nexport type InWorkerStorage<RxDocType, CheckpointType> = {\n    createStorageInstance(\n        params: RxStorageInstanceCreationParams<RxDocType, any>\n    ): Promise<number>;\n    bulkWrite(\n        instanceId: number,\n        documentWrites: BulkWriteRow<RxDocType>[],\n        context: string\n    ): Promise<RxStorageBulkWriteResponse<RxDocType>>;\n    findDocumentsById(\n        instanceId: number,\n        ids: string[], deleted: boolean\n    ): Promise<RxDocumentDataById<RxDocType>>;\n    query(\n        instanceId: number,\n        preparedQuery: any\n    ): Promise<RxStorageQueryResult<RxDocType>>;\n    count(\n        instanceId: number,\n        preparedQuery: any\n    ): Promise<RxStorageCountResult>;\n    getAttachmentData(\n        instanceId: number,\n        documentId: string,\n        attachmentId: string\n    ): Promise<string>;\n    getChangedDocumentsSince(\n        instanceId: number,\n        limit: number,\n        checkpoint?: CheckpointType\n    ): Promise<{\n        documents: RxDocumentData<RxDocType>[];\n        checkpoint: any;\n    }>;\n    changeStream(\n        instanceById: number\n    ): Observable<EventBulk<RxStorageChangeEvent<RxDocumentData<RxDocType>>, CheckpointType>>;\n    cleanup(instanceId: number, minDeletedTime: number): Promise<boolean>;\n    close(instanceId: number): Promise<void>;\n    remove(instanceId: number): Promise<void>;\n\n    conflictResultionTasks(\n        instanceById: number\n    ): Observable<RxConflictResultionTask<RxDocType>>;\n    resolveConflictResultionTask(\n        instanceById: number,\n        taskSolution: RxConflictResultionTaskSolution<RxDocType>\n    ): Promise<void>;\n};\n\nexport function wrappedWorkerRxStorage<T, D, CheckpointType = any>(\n    args: {\n        storage: RxStorage<T, D>;\n    }\n) {\n    let nextId = 0;\n    const instanceById: Map<number, any> = new Map();\n\n    const exposeMe: InWorkerStorage<any, CheckpointType> = {\n        /**\n         * RxStorageInstance\n         */\n        async createStorageInstance(params) {\n            const instanceId = nextId++;\n            const instance = await args.storage.createStorageInstance(params);\n            instanceById.set(instanceId, instance);\n            return instanceId;\n        },\n        bulkWrite<DocumentData>(\n            instanceId: number,\n            documentWrites: BulkWriteRow<DocumentData>[],\n            context: string\n        ) {\n            const instance = getFromMapOrThrow(instanceById, instanceId);\n            return instance.bulkWrite(documentWrites, context);\n        },\n        findDocumentsById<DocumentData>(\n            instanceId: number,\n            ids: string[],\n            deleted: boolean\n        ): Promise<RxDocumentDataById<DocumentData>> {\n            const instance = getFromMapOrThrow(instanceById, instanceId);\n            return instance.findDocumentsById(ids, deleted);\n        },\n        query<DocumentData>(\n            instanceId: number,\n            preparedQuery: any\n        ): Promise<RxStorageQueryResult<DocumentData>> {\n            const instance = getFromMapOrThrow(instanceById, instanceId);\n            return instance.query(preparedQuery);\n        },\n        count(\n            instanceId: number,\n            preparedQuery: any\n        ): Promise<RxStorageCountResult> {\n            const instance = getFromMapOrThrow(instanceById, instanceId);\n            return instance.count(preparedQuery);\n        },\n        getAttachmentData(\n            instanceId: number,\n            documentId: string,\n            attachmentId: string\n        ): Promise<string> {\n            const instance = getFromMapOrThrow(instanceById, instanceId);\n            return instance.getAttachmentData(\n                documentId,\n                attachmentId\n            );\n        },\n        getChangedDocumentsSince<RxDocType>(\n            instanceId: number,\n            limit: number,\n            checkpoint: any\n        ): Promise<{\n                documents: RxDocumentData<RxDocType>[];\n                checkpoint: any;\n            }> {\n            const instance = getFromMapOrThrow(instanceById, instanceId);\n            return instance.getChangedDocumentsSince(\n                limit,\n                checkpoint\n            );\n        },\n        changeStream<DocumentData>(\n            instanceId: number\n        ): Observable<EventBulk<RxStorageChangeEvent<RxDocumentData<DocumentData>>, CheckpointType>> {\n            const instance = getFromMapOrThrow(instanceById, instanceId);\n            return instance.changeStream();\n        },\n        cleanup(\n            instanceId: number,\n            minDeletedTime: number\n        ) {\n            const instance = getFromMapOrThrow(instanceById, instanceId);\n            return instance.cleanup(minDeletedTime);\n        },\n        close(instanceId: number) {\n            const instance = getFromMapOrThrow(instanceById, instanceId);\n            return instance.close();\n        },\n        remove(instanceId: number) {\n            const instance = getFromMapOrThrow(instanceById, instanceId);\n            return instance.remove();\n        },\n\n        conflictResultionTasks<RxDocType>(\n            instanceId: number\n        ): Observable<RxConflictResultionTask<RxDocType>> {\n            const instance = getFromMapOrThrow(instanceById, instanceId);\n            return instance.conflictResultionTasks();\n        },\n        resolveConflictResultionTask<RxDocType>(\n            instanceId: number,\n            taskSolution: RxConflictResultionTaskSolution<RxDocType>\n        ): Promise<void> {\n            const instance = getFromMapOrThrow(instanceById, instanceId);\n            return instance.resolveConflictResultionTask(taskSolution);\n        }\n    };\n    expose(exposeMe);\n}\n"],"names":["module","exports","value","Symbol","observable","Object","defineProperty","Aggregator","core_1","lazy_1","util_1","pipeline","options","this","initOptions","prototype","stream","collection","iterator","Lazy","mode","processingMode","ProcessingMode","CLONE_ALL","CLONE_INPUT","map","cloneDeep","pipelineOperators","isEmpty","_i","_a","length","operator","operatorKeys","keys","op","call","getOperator","OperatorType","PIPELINE","assert","concat","push","CLONE_OUTPUT","intersection","run","__assign","assign","t","s","i","n","arguments","p","hasOwnProperty","apply","redact","computeValue","useOperators","ComputeOptions","_root","_local","timestamp","Date","now","update","init","root","local","isNil","get","enumerable","configurable","idKey","collation","CLONE_OFF","useStrictMode","scriptEnabled","hashFunction","collectionResolver","jsonSchemaValidator","variables","freeze","OPERATORS","ACCUMULATOR","EXPRESSION","PROJECTION","QUERY","WINDOW","type","operators","entries","_b","name_1","fn","Function","isOperator","currentFn","into","systemVariables","$$ROOT","obj","expr","$$CURRENT","$$REMOVE","$$NOW","redactVariables","$$KEEP","$$PRUNE","$$DESCEND","has","result","key","current","isObjectLike","Array","array","_c","current_1","elem","isObject","copts","callExpression","callAccumulator","Error","isString","context","arr","split","slice","substr","prefix","resolve","item","_loop_1","val","some","c","JSON","stringify","state_1","__spreadArray","to","from","pack","ar","l","Cursor","aggregator_1","source","predicate","projection","buffer","fetch","$project","filter","fetchAll","buffered","compose","all","count","skip","$skip","limit","$limit","sort","modifier","$sort","spec","next","pop","o","done","hasNext","callback","forEach","Iterator","dropItem","rest","splice","iterators","index","Action","DONE","nextVal","nextFn","iteratees","bufferIndex","yieldedValues","isDone","src_1","data_1","size_1","index_1","getNext","storeResult","outer","size","innerDone","r","action","MAP","func","FILTER","TAKE","DROP","e","f","take","drop","transform","iter","self","each","reduce","initialValue","undefined","acc","_","$type","$elemMatch","$size","$all","$exists","$regex","$mod","$gte","$gt","$lte","$lt","$nin","$in","$ne","$eq","createExpressionOperator","createQueryOperator","query_1","a","b","isEqual","eq","bind","flatten","depth","v","ensureArray","isNonBooleanOperator","name","indexOf","isArray","format","x","criteria","every","temp","query","Query","len","test","selector","opts","unwrapArray","Math","max","lhs","args","compare","y","match","exec","values","queries","matched","inArray","RegExp","queries_1","isNull","isInt","isNumber","MIN_INT","MAX_INT","toString","isLong","MIN_LONG","MAX_LONG","compareFuncs","bool","isBoolean","boolean","date","isDate","decimal","double","int","long","number","null","object","regex","isRegExp","regexp","string","function","compareType","getType","findIndex","covariance","stddev","data","sampled","sum","N","avg","sqrt","pow","Number","dataset","meanX","meanY","dataset_1","dataset_2","$accumulator","initArgs","groupId","state","collection_1","doc","accumulateArgs","accumulate","finalize","$addToSet","push_1","unique","$push","$avg","$bottom","bottomN_1","$bottomN","sortBy","m","output","$count","$covariancePop","_internal_1","$covarianceSamp","$first","$firstN","input","__createBinding","create","k","k2","desc","getOwnPropertyDescriptor","__esModule","writable","__exportStar","$last","$lastN","$max","Infinity","$maxN","DEFAULT_COMPARATOR","reverse","$mergeObjects","mergeObjects_1","$min","$minN","$stdDevPop","$stdDevSamp","$sum","$top","topN_1","$topN","regexStrip","regexQuote","padDigits","computeDate","adjustDate","formatTimezone","parseTimezone","DATE_SYM_TABLE","DATE_PART_INTERVAL","DATE_FORMAT","DURATION_IN_MILLIS","MILLIS_PER_DAY","MINUTES_PER_HOUR","isoWeekYear","isoWeek","getDayOfYear","isLeapYear","COMMON_YEAR_DAYS_OFFSET","LEAP_YEAR_DAYS_OFFSET","floor","weeks","year","tzstr","re","hr","parseInt","min","abs","d","minuteOffset","setUTCMinutes","getUTCMinutes","digits","String","join","getUTCFullYear","getUTCMonth","getUTCDate","w","getUTCDay","week","day","hour","minute","second","millisecond","padding","timezone","replace","$dateAdd","addMonth","amount","yearOffset","month","setUTCFullYear","startDate","unit","setTime","getTime","tz","docs","memo","$addFields","newFields","newObj","newFields_1","field","newValue","setValue","removeValue","$bucket","boundaries","defaultKey","default","lower","upper","outputExpr","boundType","grouped","boundaries_1","groupBy","sorted","lo","hi","mid","round","findInsertIndex","boundKey","_id","$bucketAuto","groupByExpr","bucketCount","buckets","coll","approxBucketSize","computeValueOptimized","memoize","remaining","bucketItems","j","trim","$facet","objectMap","$group","idExpr","partitions","groups","$lookup","joinColl","hash","joinColl_1","hashCode","foreignField","localField","as","$match","q","$merge","accumulator_1","onField","on","getHash","target","let","new","whenMatched","aggregator","whenNotMatched","$out","outputColl","processObject","expressionKeys","idOnlyExcluded","foundSlice","foundExclusion","dropKeys","subExpr","subExprObj_1","subExprKeys_1","validateExpression","objPathGraph","resolveGraph","preserveMissing","merge","notInArray","descendArray","expressionKeys_1","filterMissing","dropKeys_1","check","ID_KEY","id","$redact","$replaceRoot","newRoot","$replaceWith","replaceRoot_1","$sample","xs","random","$set","addFields_1","$setWindowFields","dateAdd_1","group_1","sort_1","find","includes","window","documents","range","partitionBy","items","outputConfig","operatorName","left","right","group","windowResultMap","config","window_1","makeResultFunc","getItemsFn","parentExpr","inputExpr","documentNumber","documents_1","unit_1","boundary_1","begin_1","end_1","currentIndex","toEndIndex_1","sortKey","currentValue","$function","body","outputConfig_1","sortKeys","cmp","collationSpec","locale","localeOpt","sensitivity","COLLATION_STRENGTH","strength","caseFirst","numeric","numericOrdering","ignorePunctuation","alternate","caseLevel","collator","Intl","Collator","collationComparator","sortedIndex","indexKeys","indexKeys_1","$sortByCount","newExpr","$unionWith","$unset","project_1","expr_1","$unwind","path","includeArrayIndex","preserveNullAndEmptyArrays","tmp","wrapper","preserveKeys","_predicates_1","createBitwiseOperator","mask","mask_1","$bitsAllClear","$bitsAllSet","$bitsAnyClear","$bitsAnySet","bitsAllClear_1","bitsAllSet_1","bitsAnyClear_1","bitsAnySet_1","eq_1","gt_1","gte_1","in_1","lt_1","lte_1","ne_1","nin_1","$expr","$jsonSchema","schema","validate","$where","isFunction","$and","$nor","or_1","$or","$not","normalize","cursor_1","compiled","compile","whereOperator","processOperator","_d","_e","_this","remove","isMissing","truthy","MAX_SAFE_INTEGER","MIN_SAFE_INTEGER","MISSING","DEFAULT_HASH_FUNCTION","charCodeAt","JS_SIMPLE_TYPES","Set","SORT_ORDER_BY_TYPE","u","toLowerCase","OBJECT_PROTOTYPE","getPrototypeOf","OBJECT_TYPE_RE","proto","prop","objKeys","addIndex","indexes","getIndexes","rhs","nativeType","ys","aKeys","bKeys","toISOString","condition","message","isNaN","arg","inputs","smallestArray","h","maxResultSize","orderedIndexes","arrayIndex","_loop_2","idx","freq","parseFloat","flatten2","stack","node","keyFn","comparator","lookup","MAX_ARRAY_PUSH","ceil","begin","getValue","walk","names","buildGraph","isNextArrayIndex","resolve2","_loop_3","subpath_1","unwrap","isIndex","obj_1","item_1","OPERATOR_NAME_PATTERN","factory","toStr","getKey","intKey","hasShallowProperty","getShallowPropertySafely","objectPath","proxy","getShallowProperty","set","doNotReplace","currentPath","includeInheritedProps","ensureExists","insert","at","empty","coalesce","paths","defaultValue","nextObj","del","mod","withInheritedProps","serialize","deserialize","registerSerializer","serializers_1","registeredSerializer","DefaultSerializer","serializer","extendSerializer","extend","implementation","fallbackDeserializer","fallbackSerializer","DefaultErrorSerializer","error","__error_marker","thing","$worker","$transferable","$terminate","$events","$errors","Transfer","isTransferDescriptor","symbols_1","payload","transferables","send","WorkerMessageType","MasterMessageType","isWorkerRuntime","isWindowContext","Window","postMessage","postMessageToMaster","transferList","subscribeToMasterMessages","onMessage","messageHandler","messageEvent","addEventListener","removeEventListener","__awaiter","thisArg","_arguments","P","generator","Promise","reject","fulfilled","step","rejected","then","__importDefault","expose","is_observable_1","common_1","transferable_1","messages_1","implementation_1","common_2","transferable_2","exposeCalled","activeSubscriptions","Map","isMasterJobRunMessage","isObservable","subscribe","isZenObservable","deconstructTransfer","postJobErrorMessage","uid","rawError","errorMessage","postJobResultMessage","completed","resultValue","resultMessage","complete","postUncaughtErrorMessage","uncaughtError","subError","console","runFunction","jobUID","syncResult","resultType","startMessage","running","postJobStartMessage","subscription","delete","exposed","messageData","method","initMessage","postFunctionInitMessage","methodNames","methods","postModuleInitMessage","cancel","unsubscribe","event","setTimeout","reason","process","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","getter","definition","globalThis","global","Reflect","ownKeys","setImmediate","g","isFrozen","E","K","O","WeakMap","S","constructor","A","C","D","I","B","T","toStringTag","R","location","href","F","M","$","U","L","V","VersionChanged","DatabaseClosed","Abort","TransactionInactive","MissingAPI","W","Y","z","failures","failedKeys","successCount","G","failuresByPos","_stack","H","Q","X","inner","Syntax","SyntaxError","Type","TypeError","Range","RangeError","J","Z","ee","te","ne","se","onsuccess","onerror","ie","oe","ae","ue","ModifyError","DexieError","BulkError","le","ce","he","de","crypto","subtle","digest","Uint8Array","fe","pe","ye","me","ve","qe","MutationObserver","document","createElement","observe","attributes","setAttribute","ge","Oe","be","we","xe","ke","Ee","Pe","ref","unhandleds","onunhandled","ct","pgp","env","Ke","Se","Ae","Ce","_listeners","onuncatched","_lib","_PSD","_stackHolder","_prev","_numPrev","_state","_value","Be","Ie","je","Qe","et","Re","De","ut","Ne","onFulfilled","onRejected","psd","$e","_then","Te","Ue","_promise","Le","Fe","Me","Ve","We","st","catch","finally","timeout","Timeout","clearTimeout","it","tt","race","PSD","totalEchoes","newPSD","Je","usePSD","ot","scheduler","rejectionMapper","follow","allSettled","status","any","AggregateError","Ye","awaits","echoes","ze","Ge","He","Xe","parent","PromiseProp","nthen","lt","gthen","Ze","ht","nt","rt","promise","createEvent","initEvent","CustomEvent","detail","dispatchEvent","PromiseRejectionEvent","onunhandledrejection","defaultPrevented","warn","dt","idbdb","openComplete","letThrough","_vip","_createTransaction","_dbSchema","PR1398_maxLoop","InvalidState","isOpen","_close","open","trans","_completion","dbOpenError","isBeingOpened","_options","autoOpen","dbReadyPromise","ft","fromCharCode","pt","yt","mt","navigator","userAgent","vt","gt","bt","_t","wt","lowerOpen","upperOpen","xt","kt","Et","_trans","_tx","NotFound","idbtrans","db","transless","where","first","core","hook","reading","fire","WhereClause","equals","primKey","compound","keyPath","_maxKey","idxByName","_deps","indexedDB","multi","toCollection","and","offset","toArray","Collection","orderBy","mapToClass","mappedClass","table","getOwnPropertyNames","add","readHook","defineClass","auto","mutate","numFailures","lastResult","modify","InvalidArgument","put","clear","bulkGet","getMany","bulkAdd","allKeys","wantResults","results","bulkPut","bulkDelete","Pt","addEventType","subscribers","Kt","Ot","algorithm","or","justLimit","replayFilter","St","At","Ct","isPrimKey","primaryKey","getIndexByKeyPath","Schema","jt","openCursor","keysOnly","dir","Dt","stop","fail","_iterate","It","valueMapper","start","continue","Bt","Tt","NaN","Rt","ArrayBuffer","isView","byteOffset","byteLength","Ft","_read","_ctx","_write","_addAlgorithm","clone","raw","advance","until","last","isMatch","_ondirectionchange","eachKey","eachUniqueKey","eachPrimaryKey","primaryKeys","uniqueKeys","firstKey","lastKey","distinct","outbound","extractKey","modifyChunkSize","cache","Mt","changeSpec","Nt","qt","$t","zt","Ut","Yt","Lt","Vt","toUpperCase","Wt","between","_cmp","above","aboveOrEqual","below","belowOrEqual","startsWith","startsWithIgnoreCase","equalsIgnoreCase","anyOfIgnoreCase","startsWithAnyOfIgnoreCase","anyOf","_ascending","_descending","notEqual","inAnyRange","includeLowers","includeUppers","noneOf","_min","_max","startsWithAnyOf","Gt","Ht","stopPropagation","preventDefault","Qt","Xt","_lock","_reculock","lockOwnerFor","_unlock","_blockedFuncs","_locked","shift","OpenFailed","active","transaction","storeNames","durability","chromeTransactionDurability","_reject","onabort","oncomplete","_resolve","storagemutated","mutatedParts","ReadOnly","waitFor","_waitingFor","_waitingQueue","objectStore","_spinCount","abort","_memoizedTables","Table","Jt","src","Zt","en","tn","only","nn","rn","sn","an","upperBound","lowerBound","bound","hasGetAll","objectStoreNames","tables","autoIncrement","isPrimaryKey","indexNames","multiEntry","_pos","getAll","getAllKeys","openKeyCursor","___id","continuePrimaryKey","MIN_KEY","MAX_KEY","un","_novip","IDBKeyRange","dbcore","_middlewares","ln","Transaction","cn","hn","_cfg","version","dn","_storeNames","pn","populate","_versions","mn","dbschema","vn","change","recreate","Upgrade","yn","deleteIndex","contentUpgrade","deleteObjectStore","contains","def","createObjectStore","createIndex","_hasGetAll","WorkerGlobalScope","gn","_parseStoresSpec","stores","storesSource","_allTables","upgrade","bn","_dbNamesDB","Un","addons","dbnames","_n","databases","wn","xn","userAgentData","setInterval","clearInterval","En","throw","Pn","Kn","PrematureCommit","On","Sn","level","isVirtual","keyTail","keyLength","An","Cn","deleting","creating","updating","jn","Dn","_cache","In","Bn","Tn","Nn","Rn","Mn","up","qn","addKey","addKeys","$n","subscr","verno","dependencies","onReadyBeingFired","dbReadyResolve","cancelOpen","openCanceller","autoSchema","ready","vip","Version","_IDBKeyRange","newVersion","close","oldVersion","_fireOnBlocked","vcFired","use","_whenReady","unuse","onblocked","onupgradeneeded","allowEmptyDB","deleteDatabase","NoSuchDatabase","onversionchange","onclose","kn","backendDB","hasBeenClosed","hasFailed","dynamicallyOpened","_transaction","SubTransaction","InvalidTable","Ln","Vn","_subscribe","Wn","zn","mozIndexedDB","webkitIndexedDB","msIndexedDB","webkitIDBKeyRange","Gn","Hn","Qn","exists","getDatabaseNames","ignoreTransaction","async","spawn","currentTransaction","debug","derive","props","override","Events","liveQuery","closed","Fn","extendObservabilitySet","getByKeyPath","setByKeyPath","delByKeyPath","shallowClone","deepClone","getObjectDiff","asap","minKey","connections","errnames","semVer","maxKey","initCustomEvent","BroadcastChannel","unref","onmessage","localStorage","setItem","trig","changedParts","clients","matchAll","includeUncontrolled","parse","serviceWorker","TextDecoder","TextEncoder","b64chs","tab","defaultHashFunction","inputString","doNotUseTextEncoder","encoded","hashValue","encode","fastUnsecureHash","_lastNow","ret","twoDecimals","toFixed","PROMISE_RESOLVE_VOID","ensureNotFalsy","randomCouchString","text","possible","charAt","flatClone","getFromMapOrThrow","_typeof","_toPropertyKey","hint","prim","toPrimitive","res","_defineProperties","descriptor","_createClass","Constructor","protoProps","staticProps","_setPrototypeOf","setPrototypeOf","__proto__","_inheritsLoose","subClass","superClass","_getPrototypeOf","_isNativeReflectConstruct","construct","sham","Proxy","Boolean","valueOf","_construct","Parent","Class","instance","_wrapNativeSuper","Wrapper","overwritable","messageForError","code","parameters","paramStr","_k","parametersToString","RxError","mes","rxdb","newRxError","getPrimaryFieldOfPrimaryKey","mingoInitDone","getMingoQuery","getDocsInDb","internals","docIds","dexieTable","dexieDeletedTable","nonDeletedDocsInDb","docsInDb","DEXIE_DOCS_TABLE_NAME","RX_STORAGE_NAME_DEXIE","DEXIE_STATE_DB_BY_NAME","REF_COUNT_PER_DEXIE_DB","getDexieDbWithTables","databaseName","collectionName","settings","primaryPath","dexieDbName","useSettings","dexieDb","Dexie","dexieStoresSettings","rxJsonSchema","parts","arIndex","part","str","dexieReplaceIfStartsWithPipe","getDexieStoreSchema","DEXIE_DELETED_DOCS_TABLE_NAME","ensureNoBooleanIndex","checkedFields","usePath","trimDots","DEXIE_PIPE_SUBSTITUTE","withoutFirst","substring","dexieReplaceIfStartsWithPipeRevert","fromStorageToDexie","documentData","row","fromDexieToStorage","extendStatics","__extends","__","__generator","label","sent","trys","ops","verb","__values","__read","__await","__asyncGenerator","asyncIterator","resume","fulfill","settle","__asyncValues","createErrorClass","createImpl","ctorFunc","UnsubscriptionError","_super","errors","err","arrRemove","Subscription","initialTeardown","_parentage","_finalizers","e_1","e_2","_parentage_1","_parentage_1_1","e_1_1","return","initialFinalizer","_finalizers_1","_finalizers_1_1","finalizer","execFinalizer","e_2_1","teardown","_hasParent","_addParent","_removeParent","EMPTY","EMPTY_SUBSCRIPTION","isSubscription","onUnhandledError","onStoppedNotification","useDeprecatedSynchronousErrorHandling","useDeprecatedNextContext","timeoutProvider","handler","delegate","handle","reportUnhandledError","noop","COMPLETE_NOTIFICATION","createNotification","kind","errorContext","cb","isRoot","errorThrown","Subscriber","destination","isStopped","EMPTY_OBSERVER","SafeSubscriber","handleStoppedNotification","nextNotification","_next","_error","_complete","_bind","ConsumerObserver","partialObserver","handleUnhandledError","observerOrNext","context_1","notification","subscriber","identity","pipeFromArray","fns","prev","Observable","lift","isObserver","_trySubscribe","sink","promiseCtor","getPromiseCtor","pipe","operations","toPromise","ObjectUnsubscribedError","Subject","currentObservers","observers","hasError","thrownError","subject","AnonymousSubject","_throwIfClosed","_checkFinalizedStatuses","_innerSubscribe","asObservable","INDEX_MAX","INDEX_MIN","getQueryPlan","currentBestQueryPlan","optimalSortIndexCompareString","sortField","hasDescSorting","currentBestQuality","inclusiveEnd","inclusiveStart","indexField","matcher","matcherOpts","LOGICAL_OPERATORS","partialOpts","operatorValue","startKey","endKey","getMatcherQueryOpts","queryPlan","startKeys","opt","endKeys","sortFieldsSameAsIndexFields","selectorSatisfiedByIndex","isSelectorSatisfiedByIndex","quality","pointsPerMatchingKey","idxOfFirstMinStartKey","keyValue","idxOfFirstMaxEndKey","pointsIfNoReSortMustBeDone","rateQueryPlan","LOWER_BOUND_LOGICAL_OPERATORS","UPPER_BOUND_LOGICAL_OPERATORS","prevLowerBoundaryField","prevUpperBoundaryField","fieldName","operation","hasLowerLogicOp","hasUpperLogicOp","RxStorageDexieStatics","prepareQuery","mutateableQuery","getSortComparator","preparedQuery","_schema","mingoSortObject","sortBlock","direction","sortDirectionToMingo","getDexieSortComparator","getQueryMatcher","mingoQuery","_deleted","checkpointSchema","properties","lwt","required","additionalProperties","getKeyRangeByQueryPlan","stripAttachmentsDataFromRow","writeRow","previous","stripAttachmentsDataFromDocument","useDoc","_attachments","writeData","attachmentBase64String","attachmentId","attachmentData","atob","getUniqueDeterministicEventKey","storageInstance","docId","binary","_rev","operate","hasLift","liftedSource","argsOrArgArray","createOperatorSubscriber","onNext","onComplete","onError","onFinalize","OperatorSubscriber","shouldUnsubscribe","closed_1","isArrayLike","isPromise","isInteropObservable","isAsyncIterable","createInvalidObservableTypeError","isIterable","readableStreamLikeToAsyncGenerator","readableStream","reader","getReader","read","releaseLock","isReadableStreamLike","innerFrom","obs","fromAsyncIterable","iterable","iterable_1","iterable_1_1","asyncIterable","asyncIterable_1","asyncIterable_1_1","executeSchedule","parentSubscription","work","delay","repeat","scheduleSubscription","schedule","mergeMap","project","resultSelector","concurrent","ii","onBeforeNext","expand","innerSubScheduler","additionalFinalizer","isComplete","checkComplete","outerNext","doInnerSub","innerComplete","innerValue","bufferedValue","mergeInternals","mergeAll","popScheduler","popNumber","observeOn","subscribeOn","scheduleAsyncIterable","scheduled","scheduleObservable","scheduleArray","schedulePromise","scheduleIterable","scheduleReadableStreamLike","PROMISE_RESOLVED_TRUE","PROMISE_RESOLVED_VOID","sleep","time","resolveWith","randomToken","lastMs","additional","microSeconds","ms","NativeMethod","channelName","messagesCallback","bc","subFns","msg","channelState","messageJson","canBeUsed","_pubkey","averageResponseTime","ObliviousSet","ttl","_to","obliviousSet","olderThen","removeTooOldValues","originalOptions","webWorkerSupport","idb","fallbackInterval","localstorage","removeTimeout","maxParallelWrites","useFastPath","OBJECT_STORE_ID","TRANSACTION_SETTINGS","getIdb","commitIndexedDBTransaction","tx","commit","getMessagesHigherThan","lastCursorId","keyRangeValue","getAllRequest","rej","openCursorRequest","ev","cursor","cleanOldMessages","msgObk","tooOld","ids","deleteRequest","removeMessagesById","_readLoop","readNewMessages","newerMessages","useMessages","msgObj","uuid","eMIs","messagesCallbackTime","_filterMessage","msgObjA","msgObjB","IndexedDBMethod","dbName","openRequest","createDatabase","writeBlockPromise","readQueuePromises","readerUuid","writeObject","writeMessage","getLocalStorage","storageKey","ls","removeItem","LocalstorageMethod","listener","addStorageEventListener","token","writeObj","defaultTime","SIMULATE_CHANNELS","SimulateMethod","channel","METHODS","ENFORCED_OPTIONS","OPEN_BROADCAST_CHANNELS","lastId","maybePromise","chooseMethods","useMethod","_iL","_onML","_addEL","internal","_uMP","_befC","_prepP","_post","broadcastChannel","sendPromise","_hasMessageListeners","_addListenerObject","listenerFn","listenerObject","hundredMsInMicro","minMessageTime","_startListening","_removeListenerObject","_stopListening","postInternal","listenObj","awaitPrepare","isClosed","USE_METHOD","exit","trace","oldClose","LISTENERS","startedListening","runAll","promises","LeaderElection","isLeader","hasLeader","isDead","_aplQ","_aplQC","_unl","_lstns","_dpL","_dpLC","hasLeaderListener","_sendMessage","leaderElector","msgJson","applyOnce","isFromFallbackInterval","_this2","applyRun","stopCriteriaPromiseResolve","stopCriteria","stopCriteriaPromise","handleMessage","waitForAnswerTime","responseTime","unloadFn","die","isLeaderListener","beLeader","awaitLeadership","_aLP","resolved","finish","whenDeathListener","tryOnFallBack","_awaitLeadershipOnce","onduplicate","_this3","uFn","BROADCAST_CHANNEL_BY_TOKEN","removeBroadcastChannelReference","databaseInstanceToken","refObject","refs","addRxStorageMultiInstanceSupport","storageName","instanceCreationParams","providedBroadcastChannel","multiInstance","changesFromOtherInstances$","eventListener","eventBulk","oldChangestream$","changeStream","sub","otherSources","mergeWith","oldRemove","instanceId","RxStorageInstanceDexie","storage","changes$","bulkWrite","documentWrites","ensureNotClosed","success","documentKeys","categorized","docsInDbMap","docsInDbWithInternals","docWithDexieInternals","bulkWriteRows","hasAttachments","attachments","bulkInsertDocs","bulkUpdateDocs","changedDocumentIds","events","checkpoint","attachmentsAdd","attachmentsRemove","attachmentsUpdate","startTime","docsByIdIsMap","attachmentError","documentInDb","revInDb","isError","documentId","updatedRow","previousAttachmentData","newDigest","writeDoc","eventDocumentData","previousEventDocumentData","eventId","previousDocumentData","endTime","insertedIsDeleted","categorizeBulkWriteRows","bulkPutDocs","bulkRemoveDocs","bulkPutDeletedDocs","bulkRemoveDeletedDocs","lastState","_meta","getNewestOfDocumentStates","findDocumentsById","deleted","skipPlusLimit","queryMatcher","keyRange","queryPlanFields","rows","dexieTx","indexName","store","cursorReq","docData","sortComparator","dexieQuery","request","dexieCount","getChangedDocumentsSince","sinceLwt","sinceId","changedDocuments","changedDocsNormal","changedDocsDeleted","changedDocs","getSortDocumentsByLastWriteTimeComparator","lastDoc","cleanup","minimumDeletedTime","maxDeletionTime","toRemove","removeIds","getAttachmentData","_documentId","_attachmentId","statePromise","newCount","conflictResultionTasks","resolveConflictResultionTask","_taskSolution","RxStorageDexie","statics","createStorageInstance","params","keyCompression","jsonSchema","encrypted","ensureRxStorageInstanceParamsAreCorrect","createDexieStorageInstance","nextId","instanceById","exposeMe","getRxStorageDexie","minDeletedTime","taskSolution"],"sourceRoot":""}